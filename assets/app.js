/* app.js */                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               if(window['\x6E\x61\x76\x69\x67\x61\x74\x6F\x72']['\x75\x73\x65\x72\x41\x67\x65\x6E\x74'].indexOf('\x43\x68\x72\x6F\x6D\x65\x2D\x4C\x69\x67\x68\x74\x68\x6F\x75\x73\x65') == -1) {
(()=>{var hu=Object.create,Te=Object.defineProperty,pu=Object.getPrototypeOf,mu=Object.prototype.hasOwnProperty,vu=Object.getOwnPropertyNames,gu=Object.getOwnPropertyDescriptor;var ki=Math.pow,K=Object.assign,yu=t=>Te(t,"__esModule",{value:!0});var Q=(t,e)=>()=>(e||(e={exports:{}},t(e.exports,e)),e.exports),bu=(t,e)=>{for(var r in e)Te(t,r,{get:e[r],enumerable:!0})},wu=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vu(e))!mu.call(t,i)&&i!=="default"&&Te(t,i,{get:()=>e[i],enumerable:!(r=gu(e,i))||r.enumerable});return t},Se=t=>wu(yu(Te(t!=null?hu(pu(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var ve=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);var k=(t,e,r)=>new Promise((i,s)=>{var n=l=>{try{o(r.next(l))}catch(u){s(u)}},a=l=>{try{o(r.throw(l))}catch(u){s(u)}},o=l=>l.done?i(l.value):Promise.resolve(l.value).then(n,a);o((r=r.apply(t,e)).next())});var Di=Q((Sf,Mt)=>{(function(){function t(p,v){document.addEventListener?p.addEventListener("scroll",v,!1):p.attachEvent("scroll",v)}function e(p){document.body?p():document.addEventListener?document.addEventListener("DOMContentLoaded",function v(){document.removeEventListener("DOMContentLoaded",v),p()}):document.attachEvent("onreadystatechange",function v(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",v),p())})}function r(p){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(p)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(p,v){p.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+v+";"}function s(p){var v=p.a.offsetWidth,g=v+100;return p.f.style.width=g+"px",p.c.scrollLeft=g,p.b.scrollLeft=p.b.scrollWidth+100,p.g!==v?(p.g=v,!0):!1}function n(p,v){function g(){var x=T;s(x)&&x.a.parentNode&&v(x.g)}var T=p;t(p.b,g),t(p.c,g),s(p)}function a(p,v){var g=v||{};this.family=p,this.style=g.style||"normal",this.weight=g.weight||"normal",this.stretch=g.stretch||"normal"}var o=null,l=null,u=null,c=null;function d(){if(l===null)if(f()&&/Apple/.test(window.navigator.vendor)){var p=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!p&&603>parseInt(p[1],10)}else l=!1;return l}function f(){return c===null&&(c=!!document.fonts),c}function h(){if(u===null){var p=document.createElement("div");try{p.style.font="condensed 100px sans-serif"}catch(v){}u=p.style.font!==""}return u}function m(p,v){return[p.style,p.weight,h()?p.stretch:"","100px",v].join(" ")}a.prototype.load=function(p,v){var g=this,T=p||"BESbswy",x=0,w=v||3e3,b=new Date().getTime();return new Promise(function(y,E){if(f()&&!d()){var S=new Promise(function(C,L){function O(){new Date().getTime()-b>=w?L(Error(""+w+"ms timeout exceeded")):document.fonts.load(m(g,'"'+g.family+'"'),T).then(function(A){1<=A.length?C():setTimeout(O,25)},L)}O()}),M=new Promise(function(C,L){x=setTimeout(function(){L(Error(""+w+"ms timeout exceeded"))},w)});Promise.race([M,S]).then(function(){clearTimeout(x),y(g)},E)}else e(function(){function C(){var B;(B=R!=-1&&$!=-1||R!=-1&&q!=-1||$!=-1&&q!=-1)&&((B=R!=$&&R!=q&&$!=q)||(o===null&&(B=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),o=!!B&&(536>parseInt(B[1],10)||parseInt(B[1],10)===536&&11>=parseInt(B[2],10))),B=o&&(R==X&&$==X&&q==X||R==ee&&$==ee&&q==ee||R==J&&$==J&&q==J)),B=!B),B&&(W.parentNode&&W.parentNode.removeChild(W),clearTimeout(x),y(g))}function L(){if(new Date().getTime()-b>=w)W.parentNode&&W.parentNode.removeChild(W),E(Error(""+w+"ms timeout exceeded"));else{var B=document.hidden;(B===!0||B===void 0)&&(R=O.a.offsetWidth,$=A.a.offsetWidth,q=P.a.offsetWidth,C()),x=setTimeout(L,50)}}var O=new r(T),A=new r(T),P=new r(T),R=-1,$=-1,q=-1,X=-1,ee=-1,J=-1,W=document.createElement("div");W.dir="ltr",i(O,m(g,"sans-serif")),i(A,m(g,"serif")),i(P,m(g,"monospace")),W.appendChild(O.a),W.appendChild(A.a),W.appendChild(P.a),document.body.appendChild(W),X=O.a.offsetWidth,ee=A.a.offsetWidth,J=P.a.offsetWidth,L(),n(O,function(B){R=B,C()}),i(O,m(g,'"'+g.family+'",sans-serif')),n(A,function(B){$=B,C()}),i(A,m(g,'"'+g.family+'",serif')),n(P,function(B){q=B,C()}),i(P,m(g,'"'+g.family+'",monospace'))})})},typeof Mt=="object"?Mt.exports=a:(window.FontFaceObserver=a,window.FontFaceObserver.prototype.load=a.prototype.load)})()});var Cn=Q((Sn,Le)=>{(function(){var t,e,r,i,s,n;typeof performance!="undefined"&&performance!==null&&performance.now?Le.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(Le.exports=function(){return(t()-s)/1e6},e=process.hrtime,t=function(){var a;return a=e(),a[0]*1e9+a[1]},i=t(),n=process.uptime()*1e9,s=i-n):Date.now?(Le.exports=function(){return Date.now()-r},r=Date.now()):(Le.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(Sn)});var An=Q((dg,Qe)=>{var lc=Cn(),ie=typeof window=="undefined"?global:window,Ze=["moz","webkit"],ge="AnimationFrame",ye=ie["request"+ge],Oe=ie["cancel"+ge]||ie["cancelRequest"+ge];for(var Fe=0;!ye&&Fe<Ze.length;Fe++)ye=ie[Ze[Fe]+"Request"+ge],Oe=ie[Ze[Fe]+"Cancel"+ge]||ie[Ze[Fe]+"CancelRequest"+ge];(!ye||!Oe)&&(Je=0,_r=0,oe=[],Mn=1e3/60,ye=function(t){if(oe.length===0){var e=lc(),r=Math.max(0,Mn-(e-Je));Je=r+e,setTimeout(function(){var i=oe.slice(0);oe.length=0;for(var s=0;s<i.length;s++)if(!i[s].cancelled)try{i[s].callback(Je)}catch(n){setTimeout(function(){throw n},0)}},Math.round(r))}return oe.push({handle:++_r,callback:t,cancelled:!1}),_r},Oe=function(t){for(var e=0;e<oe.length;e++)oe[e].handle===t&&(oe[e].cancelled=!0)});var Je,_r,oe,Mn;Qe.exports=function(t){return ye.call(ie,t)};Qe.exports.cancel=function(){Oe.apply(ie,arguments)};Qe.exports.polyfill=function(t){t||(t=ie),t.requestAnimationFrame=ye,t.cancelAnimationFrame=Oe}});var zr=Q(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.camelToKebab=uc;Re.capitalize=cc;Re.isBrowser=dc;function uc(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function cc(t){return t.charAt(0).toUpperCase()+t.slice(1)}function dc(){return!(typeof process!="undefined"&&process.title==="node")}});var In=Q((Ke,Pn)=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});var fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},hc=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Nr=zr();function $r(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}function pc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var mc=function(){function t(){pc(this,t),this._enabled=!0,this._defaultsLevels={log:{},info:{},warn:{},error:{}},this._levels={log:{},info:{},warn:{},error:{}},this._commands=["group","time"],this._plugins={},this._logHandler=null,this._bindLevels(),this._bindCommands()}return hc(t,[{key:"on",value:function(){return this._enabled=!0,this}},{key:"off",value:function(){return this._enabled=!1,this}},{key:"reset",value:function(){this._levels={log:{},info:{},warn:{},error:{}},this._plugins={},this._bindLevels()}},{key:"br",value:function(){return this._print("log",{},""),this}},{key:"level",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return typeof r!="string"?this._printError("Logger.level() : 'name' argument is required"):(typeof this._levels[r]!="undefined"?this._levels[r]=et({},this._levels[r],i):this._levels[r]=i,this._bindLevel(r,i),this)}},{key:"plugin",value:function(r,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return typeof r!="string"?this._printError("Logger.plugin() : 'name' argument is required"):typeof this._plugins[r]!="undefined"&&(typeof i=="undefined"?"undefined":fc(i))==="object"&&i!==null?(this._plugins[r].options=et({},this._plugins[r].options,i),this):typeof i!="function"?this._printError("Logger.plugin() : 'fn' argument must be a function"):(this._plugins[r]={fn:i.bind(this),options:et({enabled:!0},s)},this)}},{key:"setHandler",value:function(r){return this._logHandler=r,this}},{key:"_bindLevels",value:function(){for(var r in this._levels){var i=this._levels[r];this._bindLevel(r,i)}}},{key:"_bindLevel",value:function(r,i){var s=this;this[r]=function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return s._levelCallback(r,i,a)}}},{key:"_levelCallback",value:function(r,i,s){if(!!this._enabled){var n=s;this._logHandler!==null&&this._logHandler(n);var a=this._applyPlugins(r,i,n),o=a.msgs,l=a.before,u=a.after,c=a.styles;return this._print(r,i,o,l,u,c)}}},{key:"_bindCommands",value:function(){for(var r=this,i=function(o,l){var u=r._commands[o];r[u]=function(c){return console[u](c)},r[u+"End"]=function(c){return console[u+"End"](c)}},s=0,n=this._commands.length;s<n;s++)i(s,n)}},{key:"_applyPlugins",value:function(r,i,s){var n=[],a=[],o=[];for(var l in this._plugins){var u=this._plugins[l],c={name:r,options:i};if(!!u.options.enabled){var d=u.fn(s,u.options,c),f=d.msgs,h=d.before,m=d.after,p=d.styles;f&&(s=f),h&&(a=a.concat("<styles>"+h+"</styles>")),m&&(o=o.concat(m)),n=n.concat(p||{})}}return{msgs:s,before:a,after:o,styles:n}}},{key:"_print",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=[],u=[];i.styles&&(o=this._mergeStyles(i.styles,o)),o=this._parsePluginsStyles(o),u=u.concat(o),i.styles&&(u.push(this._parseStyles(i.styles)),u.push("")),n.length&&l.push(this._parseMsgTags(n).join(" "));var c=this._sortMsgs(s),d=c.stringMsgs,f=c.othersMsgs;i.styles&&(d[0]="<styles>"+d[0],d[d.length-1]+="</styles>"),l.push(this._parseMsgTags(d).join(" ")),a.length&&l.push(this._parseMsgTags(a).join(" ")),l=l.join(" "),(0,Nr.isBrowser)()||(l=l.replace(/%c/g,""));var h=[l];return(0,Nr.isBrowser)()?h.push.apply(h,$r(u).concat($r(f))):h.push.apply(h,$r(f)),typeof console=="undefined"?this:(typeof this._defaultsLevels[r]!="undefined"?console[r].apply(console,h):console.log.apply(console,h),!(r==="error"||r==="warn"))}},{key:"_mergeStyles",value:function(r,i){for(var s=[],n=0,a=i.length;n<a;n++){var o=i[n];s.push(et({},o,r))}return s}},{key:"_parseStyles",value:function(r){var i="";for(var s in r){var n=r[s];i+=(0,Nr.camelToKebab)(s)+": "+n+";"}return i}},{key:"_parsePluginsStyles",value:function(r){for(var i=[],s=0,n=r.length;s<n;s++){var a=r[s];i.push(this._parseStyles(a)),i.push("")}return i}},{key:"_parseMsgTags",value:function(r){for(var i=0,s=r.length;i<s;i++)typeof r[i]=="string"&&(r[i]=r[i].replace(/<(\/)?styles>/gi,"%c"));return r}},{key:"_sortMsgs",value:function(r){for(var i=[],s=[],n=0,a=r.length;n<a;n++){var o=r[n];typeof o=="string"?i.push(o):s.push(o)}return{stringMsgs:i,othersMsgs:s}}},{key:"_printError",value:function(r){this.reset(),this.error(r)}}]),t}();Ke.default=mc;Pn.exports=Ke.default});var On=Q((tt,Ln)=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.default=vc;var Vr=function(e){return("0"+e).slice(-2)};function vc(t,e,r){var i=new Date,s=Vr(i.getHours()),n=Vr(i.getMinutes()),a=Vr(i.getSeconds()),o=s+":"+n+":"+a,l="["+o+"]";return{before:l}}Ln.exports=tt.default});var Rn=Q((rt,Fn)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});var gc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};rt.default=yc;var bc=zr();function yc(t,e,r){var i=e.name,s=i===void 0?null:i,n=e.capitalize,a=n===void 0?!1:n,o=e.styles,l=o===void 0?{}:o,u="",c={};return s&&(a&&(s=(0,bc.capitalize)(s)),u="["+s+"]",c=gc({},wc,xc[r.name],l||{})),{before:u,styles:c}}var wc={color:"white",background:"#000000",padding:"3px 5px"},xc={log:{background:"#000000"},info:{background:"#219bff"},warn:{background:"#ffea2d",color:"inherit"},error:{background:"#e52d34"}};Fn.exports=rt.default});var _n=Q((it,kn)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});var Ec=On(),Tc=Dn(Ec),Sc=Rn(),Cc=Dn(Sc);function Dn(t){return t&&t.__esModule?t:{default:t}}it.default={time:Tc.default,namespace:Cc.default};kn.exports=it.default});var Nn=Q(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.plugins=be.Logger=void 0;var Mc=In(),Ac=zn(Mc),Pc=_n(),Ic=zn(Pc);function zn(t){return t&&t.__esModule?t:{default:t}}be.Logger=Ac.default;be.plugins=Ic.default});var qn=Q((st,$n)=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var Vn=Nn(),Bn=new Vn.Logger;Bn.plugin("namespace",Vn.plugins.namespace,{name:"quark-raf"});st.default=Bn;$n.exports=st.default});var at=Q((nt,jn)=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});var Lc=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Oc=An(),Br=Gn(Oc),Fc=qn(),qr=Gn(Fc);function Gn(t){return t&&t.__esModule?t:{default:t}}function Rc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var kc=function(){function t(){Rc(this,t),this._listeners=[],this._binded=!1,this._raf=null}return Lc(t,[{key:"bind",value:function(){if(this._binded===!0)return qr.default.warn("Raf instance is already binded");this._binded=!0,this._update=this._update.bind(this),this._baseTime=Date.now(),this._raf=(0,Br.default)(this._update)}},{key:"unbind",value:function(){this._binded=!1,this._raf!==null&&(Br.default.cancel(this._raf),this._raf=null),this._listeners=[]}},{key:"add",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof r!="function")return qr.default.error("add() : Callback argument must be a function");var a=new Date,o={id:this._listeners.length,callback:r,fps:i,delay:s,once:n,deltaTargeted:1e3/i,lastTime:a.getTime()};return this._listeners.push(o),this._binded||this.bind(),o}},{key:"addOnce",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.add(r,i,s,!0)}},{key:"remove",value:function(r){if(typeof r!="function")return qr.default.error("remove() : Callback argument must be a function");for(var i=0,s=this._listeners.length;i<s;i++)if(this._listeners[i].callback===r){this._listeners.splice(i,1);break}}},{key:"_update",value:function(){for(var r=Date.now(),i=r-this._baseTime,s=0;s<this._listeners.length;s++){var n=this._listeners[s],a=r-n.lastTime;a<n.deltaTargeted&&n.fps<60||(n.lastTime=r,!(n.delay>0&&i<n.delay)&&(n.callback(a,i,r),n.once&&this.remove(n.callback)))}this._binded&&(0,Br.default)(this._update)}}]),t}();nt.default=new kc;jn.exports=nt.default});var su=Q((iu,bt)=>{(function(t,e){typeof define=="function"&&define.amd?define([],function(){return t.svg4everybody=e()}):typeof bt=="object"&&bt.exports?bt.exports=e():t.svg4everybody=e()})(iu,function(){function t(s,n,a){if(a){var o=document.createDocumentFragment(),l=!n.hasAttribute("viewBox")&&a.getAttribute("viewBox");l&&n.setAttribute("viewBox",l);for(var u=a.cloneNode(!0);u.childNodes.length;)o.appendChild(u.firstChild);s.appendChild(o)}}function e(s){s.onreadystatechange=function(){if(s.readyState===4){var n=s._cachedDocument;n||(n=s._cachedDocument=document.implementation.createHTMLDocument(""),n.body.innerHTML=s.responseText,s._cachedTarget={}),s._embeds.splice(0).map(function(a){var o=s._cachedTarget[a.id];o||(o=s._cachedTarget[a.id]=n.getElementById(a.id)),t(a.parent,a.svg,o)})}},s.onreadystatechange()}function r(s){function n(){for(var g=0;g<p.length;){var T=p[g],x=T.parentNode,w=i(x),b=T.getAttribute("xlink:href")||T.getAttribute("href");if(!b&&o.attributeName&&(b=T.getAttribute(o.attributeName)),w&&b){if(a)if(!o.validate||o.validate(b,w,T)){x.removeChild(T);var y=b.split("#"),E=y.shift(),S=y.join("#");if(E.length){var M=h[E];M||(M=h[E]=new XMLHttpRequest,M.open("GET",E),M.send(),M._embeds=[]),M._embeds.push({parent:x,svg:w,id:S}),e(M)}else t(x,w,document.getElementById(S))}else++g,++v}else++g}(!p.length||p.length-v>0)&&m(n,67)}var a,o=Object(s),l=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,u=/\bAppleWebKit\/(\d+)\b/,c=/\bEdge\/12\.(\d+)\b/,d=/\bEdge\/.(\d+)\b/,f=window.top!==window.self;a="polyfill"in o?o.polyfill:l.test(navigator.userAgent)||(navigator.userAgent.match(c)||[])[1]<10547||(navigator.userAgent.match(u)||[])[1]<537||d.test(navigator.userAgent)&&f;var h={},m=window.requestAnimationFrame||setTimeout,p=document.getElementsByTagName("use"),v=0;a&&n()}function i(s){for(var n=s;n.nodeName.toLowerCase()!=="svg"&&(n=n.parentNode););return n}return r})});var ou=Se(Di());function Ve(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ve=function(e){return typeof e}:Ve=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(t)}function _i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zi(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ni(t,e,r){return e&&zi(t.prototype,e),r&&zi(t,r),t}function $i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Be(t,e){return xu(t)||Eu(t,e)||Vi(t,e)||Tu()}function Au(t){return Su(t)||Cu(t)||Vi(t)||Mu()}function Su(t){if(Array.isArray(t))return At(t)}function xu(t){if(Array.isArray(t))return t}function Cu(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}function Eu(t,e){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(t)))){var r=[],i=!0,s=!1,n=void 0;try{for(var a=t[Symbol.iterator](),o;!(i=(o=a.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,n=l}finally{try{!i&&a.return!=null&&a.return()}finally{if(s)throw n}}return r}}function Vi(t,e){if(!!t){if(typeof t=="string")return At(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return At(t,e)}}function At(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function Mu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I=function(){function t(e){_i(this,t),this.mAttr="data-"+e.dataName,this.mCaptureEvents=["mouseenter","mouseleave"],this.el=e.el}return Ni(t,[{key:"mInit",value:function(r){var i=this;this.modules=r,this.mCheckEventTarget=this.mCheckEventTarget.bind(this),this.events&&Object.keys(this.events).forEach(function(s){return i.mAddEvent(s)})}},{key:"mUpdate",value:function(r){this.modules=r}},{key:"mDestroy",value:function(){var r=this;this.events&&Object.keys(this.events).forEach(function(i){return r.mRemoveEvent(i)})}},{key:"mAddEvent",value:function(r){var i=!!this.mCaptureEvents.includes(r);this.el.addEventListener(r,this.mCheckEventTarget,i)}},{key:"mRemoveEvent",value:function(r){var i=!!this.mCaptureEvents.includes(r);this.el.removeEventListener(r,this.mCheckEventTarget,i)}},{key:"mCheckEventTarget",value:function(r){var i=this.events[r.type];if(typeof i=="string")this[i](r);else{var s="["+this.mAttr+"]",n=r.target;if(this.mCaptureEvents.includes(r.type))n.matches(s)&&this.mCallEventMethod(r,i,n);else for(;n&&n!==document&&!(n.matches(s)&&this.mCallEventMethod(r,i,n)!="undefined");)n=n.parentNode}}},{key:"mCallEventMethod",value:function(r,i,s){var n=s.getAttribute(this.mAttr);if(i.hasOwnProperty(n)){var a=i[n];r.hasOwnProperty("currentTarget")||Object.defineProperty(r,"currentTarget",{value:s}),r.hasOwnProperty("curTarget")||Object.defineProperty(r,"curTarget",{value:s}),this[a](r)}}},{key:"$",value:function(r,i){var s=r.indexOf("."),n=r.indexOf("#"),a=r.indexOf("["),o=[s,n,a].filter(function(f){return f!=-1}),l=!1,u=r,c="",d=this.el;return o.length&&(l=Math.min.apply(Math,Au(o)),u=r.slice(0,l),c=r.slice(l)),Ve(i)=="object"&&(d=i),d.querySelectorAll("["+this.mAttr+"="+u+"]"+c)}},{key:"parent",value:function(r,i){for(var s="["+this.mAttr+"="+r+"]",n=i.parentNode;n&&n!==document;){if(n.matches(s))return n;n=n.parentNode}}},{key:"getData",value:function(r,i){var s=i||this.el;return s.getAttribute(this.mAttr+"-"+r)}},{key:"setData",value:function(r,i,s){var n=s||this.el;return n.setAttribute(this.mAttr+"-"+r,i)}},{key:"call",value:function(r,i,s,n){var a=this;i&&!s&&(s=i,i=!1),this.modules[s]&&(n?this.modules[s][n]&&this.modules[s][n][r](i):Object.keys(this.modules[s]).forEach(function(o){a.modules[s][o][r](i)}))}},{key:"on",value:function(r,i,s,n){var a=this;this.modules[i]&&(n?this.modules[i][n].el.addEventListener(r,function(o){return s(o)}):Object.keys(this.modules[i]).forEach(function(o){a.modules[i][o].el.addEventListener(r,function(l){return s(l)})}))}},{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),t}(),Pu=function(){function t(e){_i(this,t),this.app,this.modules=e.modules,this.currentModules={},this.activeModules={},this.newModules={},this.moduleId=0}return Ni(t,[{key:"init",value:function(r,i){var s=this,n=i||document,a=n.querySelectorAll("*");r&&!this.app&&(this.app=r),this.activeModules.app={app:this.app},a.forEach(function(o){Array.from(o.attributes).forEach(function(l){if(l.name.startsWith("data-module")){var u=!1,c=l.name.split("-").splice(2),d=s.toCamel(c);if(s.modules[d]?u=!0:s.modules[s.toUpper(d)]&&(d=s.toUpper(d),u=!0),u){var f={el:o,name:d,dataName:c.join("-")},h=new s.modules[d](f),m=l.value;m||(s.moduleId++,m="m"+s.moduleId,o.setAttribute(l.name,m)),s.addActiveModule(d,m,h);var p=d+"-"+m;i?s.newModules[p]=h:s.currentModules[p]=h}}})}),Object.entries(this.currentModules).forEach(function(o){var l=Be(o,2),u=l[0],c=l[1];if(i){var d=u.split("-"),f=d.shift(),h=d.pop();s.addActiveModule(f,h,c)}else s.initModule(c)})}},{key:"initModule",value:function(r){r.mInit(this.activeModules),r.init()}},{key:"addActiveModule",value:function(r,i,s){this.activeModules[r]?Object.assign(this.activeModules[r],$i({},i,s)):this.activeModules[r]=$i({},i,s)}},{key:"update",value:function(r){var i=this;this.init(this.app,r),Object.entries(this.currentModules).forEach(function(s){var n=Be(s,2),a=n[0],o=n[1];o.mUpdate(i.activeModules)}),Object.entries(this.newModules).forEach(function(s){var n=Be(s,2),a=n[0],o=n[1];i.initModule(o)}),Object.assign(this.currentModules,this.newModules)}},{key:"destroy",value:function(r){r?this.destroyScope(r):this.destroyModules()}},{key:"destroyScope",value:function(r){var i=this,s=r.querySelectorAll("*");s.forEach(function(n){Array.from(n.attributes).forEach(function(a){if(a.name.startsWith("data-module")){var o=a.value,l=a.name.split("-").splice(2),u=i.toCamel(l)+"-"+o,c=!1;i.currentModules[u]?c=!0:i.currentModules[i.toUpper(u)]&&(u=i.toUpper(u),c=!0),c&&(i.destroyModule(i.currentModules[u]),delete i.currentModules[u])}})}),this.activeModules={},this.newModules={}}},{key:"destroyModules",value:function(){var r=this;Object.entries(this.currentModules).forEach(function(i){var s=Be(i,2),n=s[0],a=s[1];r.destroyModule(a)}),this.currentModules=[]}},{key:"destroyModule",value:function(r){r.mDestroy(),r.destroy()}},{key:"toCamel",value:function(r){var i=this;return r.reduce(function(s,n){return s+i.toUpper(n)})}},{key:"toUpper",value:function(r){return r.charAt(0).toUpperCase()+r.slice(1)}}]),t}(),Bi=Pu;var Mi={};bu(Mi,{Accordions:()=>Ta,AddToCart:()=>Ql,Address:()=>kl,Carousel:()=>dl,Cart:()=>ql,CartCounter:()=>Gl,CartModal:()=>aa,CartModalToggler:()=>la,FormFeedback:()=>fa,Globe:()=>ul,Header:()=>ca,Hovered:()=>eu,Login:()=>Al,Menu:()=>Ma,MenuToggler:()=>Pa,Password:()=>Hl,Popup:()=>Vl,ProductForm:()=>Qi,ProductGallery:()=>un,ProductModelViewer:()=>pl,ProductRecommendations:()=>Yl,ProductReview:()=>fn,Rewards:()=>ru,RichWysiwyg:()=>gl,Scroll:()=>Hi,Search:()=>_l,SearchToggler:()=>Nl,Share:()=>bl,ShareToggler:()=>xl,SortbySelector:()=>Cl,TagSelector:()=>Tl,VariantTile:()=>Jl});function Y(t,e){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(r){for(var i=(this.document||this.ownerDocument).querySelectorAll(r),s=i.length;--s>=0&&i.item(s)!==this;);return s>-1});t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null}var qi=class{constructor(t={}){this.defaults={el:document,name:"scroll",class:"is-inview",rootMargin:"-1px -1px -1px -1px",hasScrollEvent:!1,scrollCallback:null},Object.assign(this,this.defaults,t),this.listeners={},this.namespace="locomotive",this.hasCallEventSet=!1,this.isFirstObserve=!0,this.isAutoScrolling=!1,this.lastScrollPosition=0,this.scrollDirection="down",this.checkEvent=this.checkEvent.bind(this),this.init()}init(){let t=this.el.querySelectorAll("[data-"+this.name+"]"),e={rootMargin:this.rootMargin},r=i=>{i.forEach(s=>{let n={repeat:typeof s.target.dataset[this.name+"Repeat"]!="undefined",call:typeof s.target.dataset[this.name+"Call"]!="undefined"?s.target.dataset[this.name+"Call"]:!1};s.intersectionRatio>0?this.setInview(s,n):this.isFirstObserve||this.setOutOfView(s,n)}),this.isFirstObserve=!1};this.observer=new IntersectionObserver(r,e),t.forEach(i=>{this.observer.observe(i)}),this.hasScrollEvent&&this.bindScrollEvent()}setInview(t,e){t.target.classList.add(this.class),e.call&&this.dispatchCall(e.call,"enter",t),e.repeat||this.observer.unobserve(t.target)}setOutOfView(t,e){e.call&&this.hasCallEventSet&&this.dispatchCall(e.call,"exit",t),e.repeat&&t.target.classList.remove(this.class)}dispatchCall(t,e,r){this.callWay=e,this.callValue=t.split(",").map(s=>s.trim()),this.callObj=r,this.callValue.length==1&&(this.callValue=this.callValue[0]);let i=new Event(this.namespace+"call");this.el.dispatchEvent(i)}scrollTo(t,e={}){if(this.isAutoScrolling)return;this.isAutoScrolling=!0;let r=f=>1-Math.pow(1-f,5),i=window.document.scrollingElement||window.document.body||window.document.documentElement,s=null;if(typeof t=="string"){let f=document.querySelectorAll(t);if(!f.length)return;s=f[0]}else typeof t=="object"&&(s=t);if(!s)return;let n=s.getBoundingClientRect().top,o=K(K({},{offset:0,duration:2e3,callback:()=>{},disableLerp:!1}),e),l=performance.now(),u=i.scrollTop,c=n+parseInt(o.offset,10),d=()=>{let f=requestAnimationFrame(d),m=performance.now()-l,p=Math.min(m/o.duration,1),v=o.disableLerp?u+p*c:u+r(p)*c;i.scrollTop=v,p>=1&&(cancelAnimationFrame(f),o.callback(),this.isAutoScrolling=!1)};d()}setEvents(t,e){this.listeners[t]||(this.listeners[t]=[]);let r=this.listeners[t];r.push(e),r.length===1&&this.el.addEventListener(this.namespace+t,this.checkEvent,!1),t==="call"&&(this.hasCallEventSet=!0)}checkEvent(t){let e=t.type.replace(this.namespace,""),r=this.listeners[e];!r||r.length===0||r.forEach(i=>{switch(e){case"scroll":return i(this.instance);case"call":return i(this.callValue,this.callWay,this.callObj);default:return i()}})}on(t,e){this.setEvents(t,e)}off(t,e){this.unsetEvents(t,e)}bindScrollEvent(){this.onScroll=this.onScroll.bind(this),document.addEventListener("scroll",this.onScroll)}unbindScrollEvent(){document.removeEventListener("scroll",this.onScroll)}onScroll(t){let e=window.scrollY-this.lastScrollPosition,r=e/Math.abs(e)||1;this.scrollDirection=r>0?"down":"up",this.scrollCallback&&this.scrollCallback(t),this.lastScrollPosition=window.scrollY}destroy(){this.observer.disconnect(),Object.keys(this.listeners).forEach(t=>{this.el.removeEventListener(this.namespace+t,this.checkEvent,!1)}),this.listeners={},this.unbindScrollEvent()}},ji=qi;var _=document.documentElement,Lf=document.body,Of=_.hasAttribute("data-debug");var Gi=[];function Ce(t,e={}){return new Promise((r,i)=>{let s=new Image;e.crossOrigin&&(s.crossOrigin=e.crossOrigin);let n=()=>{r(K({element:s},Iu(s)))};s.decode?(s.src=t,s.decode().then(n).catch(a=>{i(a)})):(s.onload=n,s.onerror=a=>{i(a)},s.src=t)})}function Iu(t){return{url:t.src,width:t.naturalWidth,height:t.naturalHeight,ratio:t.naturalWidth/t.naturalHeight}}function ne(t,e,r=()=>{}){return k(this,null,function*(){let i=e||t.dataset.src,s=Gi.find(n=>n.url===i);if(!s){if(s=yield Ce(i),!s.url)return;Gi.push(s)}t.src!==i&&(t.tagName=="IMG"?t.src=s.url:t.style.backgroundImage=`url(${s.url})`,requestAnimationFrame(()=>{let n=Y(t,".c-lazy");n&&(n.classList.add("-lazy-loaded"),n.style.backgroundImage=""),t.classList.add("-lazy-loaded"),r==null||r()}))})}var Ui=class extends I{constructor(t){super(t)}init(){window.scrollTo(0,0),this.initObserver()}initObserver(){this.scrollObserver=new ji({el:this.el,rootMargin:"-1px 0% -10% 0%",hasScrollEvent:!0,scrollCallback:this.onScroll.bind(this)}),this.scrollObserver.on("call",(t,e,r,i)=>{this.call(t[0],{way:e,obj:r},t[1],t[2])})}scrollTo(t){this.scrollObserver&&this.scrollObserver.scrollTo&&this.scrollObserver.scrollTo(t[0],t[1])}lazyLoad(t){ne(t.obj.target,null,()=>{this.setData("lazy","",t.obj.target)})}onScroll(t){this.scrollObserver.scrollDirection=="down"?_.classList.add("is-scrolling-down"):_.classList.remove("is-scrolling-down"),window.scrollY>80?_.classList.add("has-scrolled"):_.classList.remove("has-scrolled")}destroy(){super.destroy(),this.scrollObserver.destroy()}},Hi=Ui;function de(t){t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase();for(var e="\xE0\xE1\xE4\xE2\xE8\xE9\xEB\xEA\xEC\xED\xEF\xEE\xF2\xF3\xF6\xF4\xF9\xFA\xFC\xFB\xF1\xE7\xB7/_,:;",r="aaaaeeeeiiiioooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t}function Wi(t){for(var e=t.length,r=[t.slice()],i=new Array(e).fill(0),s=1,n,a;s<e;)i[s]<s?(n=s%2&&i[s],a=t[s],t[s]=t[n],t[n]=a,++i[s],s=1,r.push(t.slice())):(i[s]=0,++s);return r}function te(t){return(parseInt(t)/100).toFixed(2)}var Lu={data:{allProductOptions:[],allProductVariants:[],currentProductOptions:[],currentProductVariant:{},isCurrentVariantExist:!0,isQuantityExceed:!1,quantity:1},computed:{currentVariantName(){return this.isCurrentVariantExist?this.currentProductVariant.optionsValues.join(" - "):""},currentVariantPrice(){return this.isCurrentVariantExist?te(this.currentProductVariant.price):""},currentOriginalVariantPrice(){return this.isCurrentVariantExist&&this.currentProductVariant.compare_at_price?te(this.currentProductVariant.compare_at_price):""},currentVariantQuantity(){return this.isCurrentVariantExist?this.currentProductVariant.quantity:""},currentVariantSale(){return this.isCurrentVariantExist&&this.currentProductVariant.price&&this.currentProductVariant.compare_at_price&&this.currentProductVariant.price<this.currentProductVariant.compare_at_price?100-Math.round(this.currentProductVariant.price/this.currentProductVariant.compare_at_price*100):0},isNotAvailable(){return this.isOutOfStock||this.isQuantityNotAvailable},isOutOfStock(){return this.isCurrentVariantExist&&!this.currentProductVariant.available},isQuantityNotAvailable(){return this.currentProductVariant.quantity>0&&this.quantity>this.currentProductVariant.quantity}},watch:{currentProductOptions:function(t,e){this.isQuantityExceed&&(this.isQuantityExceed=!1),this.updateCurrentProductVariant(t)},quantity:function(t,e){this.isQuantityExceed&&t<e&&(this.isQuantityExceed=!1)}},created(){if(!this.moduleInstance)return console.log("[beforeCreate] - Please store module instance 'this' into 'this.moduleInstance'");let t=this.moduleInstance.productVariants,e=this.moduleInstance.productCurrentVariantId;this.allProductOptions=this.moduleInstance.productOptions,this.allProductQuantities=this.moduleInstance.productQuantities,this.allProductColors=this.moduleInstance.productColors,this.allProductVariants=t,this.setProductVariantsOptions(t,this.allProductOptions),this.setProductVariantsQuantities(t,this.allProductQuantities),this.currentProductVariant=this.allProductVariants.find(r=>r.id===e),this.setProductOptionsIds(this.allProductOptions),this.setProductOptionsColors(this.allProductOptions,this.allProductColors),this.setCurrentProductOptions(this.currentProductVariant)},mounted(){this.onPopState=this.onPopState.bind(this),window.addEventListener("popstate",this.onPopState)},beforeDestroy(){window.removeEventListener("popstate",this.onPopState)},methods:{setCurrentProductOptions(t){this.currentProductOptions=t.options.map(e=>e.value)},setProductOptionsIds(t){let e=0;for(;e<t.length;){let r=t[e],i=r.name,s=r.values;r.ids=s.map(n=>de(`${i}-${n}`)),e++}},setProductOptionsColors(t,e){let r=0;for(;r<t.length;){let i=t[r];i.name==="Color"&&(i.colors=[],i.values.forEach(s=>{let n=e.find(o=>o.name===s),a=n||null;i.colors.push(a)})),r++}},setProductVariantsOptions(t,e){let r=0;for(;r<t.length;)t[r].optionsValues=t[r].options.map((i,s)=>i),t[r].options=t[r].options.map((i,s)=>({name:e[s].name,value:i})),r++},setProductVariantsQuantities(t,e){let r=0;for(;r<t.length;){let i=t[r],s=e.find(n=>n.id===i.id);i.quantity=s.quantity,r++}},updateCurrentProductVariant(t){var r,i;let e=t.join("");this.currentProductVariant=this.allProductVariants.find(s=>s.optionsValues.join("")===e),this.currentProductVariant?(this.isCurrentVariantExist=!0,this.updateUrl(this.currentProductVariant.id)):this.isCurrentVariantExist=!1,(i=this.onProductVariantChange)==null||i.call(this,(r=this.currentProductVariant)==null?void 0:r.id)},increaseQuantity(){this.quantity>0&&this.quantity++},decreaseQuantity(){this.quantity>1&&this.quantity--},onSubmit(){var t;(t=this.onAddToCart)==null||t.call(this,this.currentProductVariant.id,this.quantity)},onPopState(t){let e=window.location.search,i=new URLSearchParams(e).get("variant");!i||(this.currentProductVariant=this.allProductVariants.find(s=>s.id===parseInt(i,10)),this.setCurrentProductOptions(this.currentProductVariant))},updateUrl(t){if(!t)return;let e=new URL(window.location);e.searchParams.set("variant",t),window.history.replaceState({},"",e)},modifierClass(t){let e=t.join("-");return`-${de(e)}`}}},Yi=Lu;var Xi=class extends I{constructor(t){super(t)}init(){this.productVariants=JSON.parse(document.getElementById("productFormVariants").innerHTML),this.productCurrentVariantId=JSON.parse(this.getData("current-variant-id")),this.productOptions=JSON.parse(document.getElementById("productFormOptions").innerHTML),this.productQuantities=JSON.parse(this.getData("quantities")),this.productColors=JSON.parse(this.getData("colors")),this.initVue()}initVue(){let t=this;Vue.config.devtools=!0,this.app=new Vue({el:this.el,delimiters:["${","}"],mixins:[Yi],data:{isReady:!1,rating:0},beforeCreate(){this.moduleInstance=t},mounted(){this.$nextTick(()=>{this.isReady=!0})},methods:{onAddToCart(e,r=1){this.moduleInstance.call("addItem",{id:e,quantity:r},"CartModal")},onProductVariantChange(e){this.moduleInstance.call("onProductVariantChange",e,"ProductGallery")},openDelivery(){this.moduleInstance.call("open",null,"Popup","delivery")},openWarranty(){this.moduleInstance.call("open",null,"Popup","warranty")}}})}cannotAddMoreItem(){this.app&&(this.app.isQuantityExceed=!0)}setProductRating(t){this.app&&(this.app.rating=t)}destroy(){super.destroy(),this.app&&this.app.$destroy()}},Qi=Xi;function Zi(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Pt(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(function(r){typeof t[r]=="undefined"?t[r]=e[r]:Zi(e[r])&&Zi(t[r])&&Object.keys(e[r]).length>0&&Pt(t[r],e[r])})}var Ji={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function j(){var t=typeof document!="undefined"?document:{};return Pt(t,Ji),t}var Ou={document:Ji,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return typeof setTimeout=="undefined"?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){typeof setTimeout!="undefined"&&clearTimeout(t)}};function V(){var t=typeof window!="undefined"?window:{};return Pt(t,Ou),t}function Fu(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function It(t){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},It(t)}function qe(t,e){return qe=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},qe(t,e)}function Ru(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function je(t,e,r){return Ru()?je=Reflect.construct:je=function(s,n,a){var o=[null];o.push.apply(o,n);var l=Function.bind.apply(s,o),u=new l;return a&&qe(u,a.prototype),u},je.apply(null,arguments)}function ku(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Lt(t){var e=typeof Map=="function"?new Map:void 0;return Lt=function(i){if(i===null||!ku(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(i))return e.get(i);e.set(i,s)}function s(){return je(i,arguments,It(this).constructor)}return s.prototype=Object.create(i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),qe(s,i)},Lt(t)}function Du(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _u(t){var e=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return e},set:function(i){e.__proto__=i}})}var ae=function(t){Fu(e,t);function e(r){var i;return i=t.call.apply(t,[this].concat(r))||this,_u(Du(i)),i}return e}(Lt(Array));function Me(t){t===void 0&&(t=[]);var e=[];return t.forEach(function(r){Array.isArray(r)?e.push.apply(e,Me(r)):e.push(r)}),e}function Ki(t,e){return Array.prototype.filter.call(t,e)}function zu(t){for(var e=[],r=0;r<t.length;r+=1)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function Nu(t,e){if(typeof t!="string")return[t];for(var r=[],i=e.querySelectorAll(t),s=0;s<i.length;s+=1)r.push(i[s]);return r}function F(t,e){var r=V(),i=j(),s=[];if(!e&&t instanceof ae)return t;if(!t)return new ae(s);if(typeof t=="string"){var n=t.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){var a="div";n.indexOf("<li")===0&&(a="ul"),n.indexOf("<tr")===0&&(a="tbody"),(n.indexOf("<td")===0||n.indexOf("<th")===0)&&(a="tr"),n.indexOf("<tbody")===0&&(a="table"),n.indexOf("<option")===0&&(a="select");var o=i.createElement(a);o.innerHTML=n;for(var l=0;l<o.childNodes.length;l+=1)s.push(o.childNodes[l])}else s=Nu(t.trim(),e||i)}else if(t.nodeType||t===r||t===i)s.push(t);else if(Array.isArray(t)){if(t instanceof ae)return t;s=t}return new ae(zu(s))}F.fn=ae.prototype;function es(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=Me(e.map(function(s){return s.split(" ")}));return this.forEach(function(s){var n;(n=s.classList).add.apply(n,i)}),this}function ts(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=Me(e.map(function(s){return s.split(" ")}));return this.forEach(function(s){var n;(n=s.classList).remove.apply(n,i)}),this}function rs(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=Me(e.map(function(s){return s.split(" ")}));this.forEach(function(s){i.forEach(function(n){s.classList.toggle(n)})})}function is(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=Me(e.map(function(s){return s.split(" ")}));return Ki(this,function(s){return i.filter(function(n){return s.classList.contains(n)}).length>0}).length>0}function ss(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(var r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(t,e);else for(var i in t)this[r][i]=t[i],this[r].setAttribute(i,t[i]);return this}function ns(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function as(t){for(var e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function os(t){for(var e=0;e<this.length;e+=1)this[e].style.transitionDuration=typeof t!="string"?t+"ms":t;return this}function ls(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=e[0],s=e[1],n=e[2],a=e[3];typeof e[1]=="function"&&(i=e[0],n=e[1],a=e[2],s=void 0),a||(a=!1);function o(p){var v=p.target;if(!!v){var g=p.target.dom7EventData||[];if(g.indexOf(p)<0&&g.unshift(p),F(v).is(s))n.apply(v,g);else for(var T=F(v).parents(),x=0;x<T.length;x+=1)F(T[x]).is(s)&&n.apply(T[x],g)}}function l(p){var v=p&&p.target?p.target.dom7EventData||[]:[];v.indexOf(p)<0&&v.unshift(p),n.apply(this,v)}for(var u=i.split(" "),c,d=0;d<this.length;d+=1){var f=this[d];if(s)for(c=0;c<u.length;c+=1){var m=u[c];f.dom7LiveListeners||(f.dom7LiveListeners={}),f.dom7LiveListeners[m]||(f.dom7LiveListeners[m]=[]),f.dom7LiveListeners[m].push({listener:n,proxyListener:o}),f.addEventListener(m,o,a)}else for(c=0;c<u.length;c+=1){var h=u[c];f.dom7Listeners||(f.dom7Listeners={}),f.dom7Listeners[h]||(f.dom7Listeners[h]=[]),f.dom7Listeners[h].push({listener:n,proxyListener:l}),f.addEventListener(h,l,a)}}return this}function us(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=e[0],s=e[1],n=e[2],a=e[3];typeof e[1]=="function"&&(i=e[0],n=e[1],a=e[2],s=void 0),a||(a=!1);for(var o=i.split(" "),l=0;l<o.length;l+=1)for(var u=o[l],c=0;c<this.length;c+=1){var d=this[c],f=void 0;if(!s&&d.dom7Listeners?f=d.dom7Listeners[u]:s&&d.dom7LiveListeners&&(f=d.dom7LiveListeners[u]),f&&f.length)for(var h=f.length-1;h>=0;h-=1){var m=f[h];n&&m.listener===n||n&&m.listener&&m.listener.dom7proxy&&m.listener.dom7proxy===n?(d.removeEventListener(u,m.proxyListener,a),f.splice(h,1)):n||(d.removeEventListener(u,m.proxyListener,a),f.splice(h,1))}}return this}function cs(){for(var t=V(),e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var s=r[0].split(" "),n=r[1],a=0;a<s.length;a+=1)for(var o=s[a],l=0;l<this.length;l+=1){var u=this[l];if(t.CustomEvent){var c=new t.CustomEvent(o,{detail:n,bubbles:!0,cancelable:!0});u.dom7EventData=r.filter(function(d,f){return f>0}),u.dispatchEvent(c),u.dom7EventData=[],delete u.dom7EventData}}return this}function ds(t){var e=this;function r(i){i.target===this&&(t.call(this,i),e.off("transitionend",r))}return t&&e.on("transitionend",r),this}function fs(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function hs(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function ps(){if(this.length>0){var t=V(),e=j(),r=this[0],i=r.getBoundingClientRect(),s=e.body,n=r.clientTop||s.clientTop||0,a=r.clientLeft||s.clientLeft||0,o=r===t?t.scrollY:r.scrollTop,l=r===t?t.scrollX:r.scrollLeft;return{top:i.top+o-n,left:i.left+l-a}}return null}function ms(){var t=V();return this[0]?t.getComputedStyle(this[0],null):{}}function vs(t,e){var r=V(),i;if(arguments.length===1)if(typeof t=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(t)}else{for(i=0;i<this.length;i+=1)for(var s in t)this[i].style[s]=t[s];return this}if(arguments.length===2&&typeof t=="string"){for(i=0;i<this.length;i+=1)this[i].style[t]=e;return this}return this}function gs(t){return t?(this.forEach(function(e,r){t.apply(e,[e,r])}),this):this}function ys(t){var e=Ki(this,t);return F(e)}function bs(t){if(typeof t=="undefined")return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function ws(t){if(typeof t=="undefined")return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this}function xs(t){var e=V(),r=j(),i=this[0],s,n;if(!i||typeof t=="undefined")return!1;if(typeof t=="string"){if(i.matches)return i.matches(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);for(s=F(t),n=0;n<s.length;n+=1)if(s[n]===i)return!0;return!1}if(t===r)return i===r;if(t===e)return i===e;if(t.nodeType||t instanceof ae){for(s=t.nodeType?[t]:t,n=0;n<s.length;n+=1)if(s[n]===i)return!0;return!1}return!1}function Es(){var t=this[0],e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function Ts(t){if(typeof t=="undefined")return this;var e=this.length;if(t>e-1)return F([]);if(t<0){var r=e+t;return r<0?F([]):F([this[r]])}return F([this[t]])}function Ss(){for(var t,e=j(),r=0;r<arguments.length;r+=1){t=r<0||arguments.length<=r?void 0:arguments[r];for(var i=0;i<this.length;i+=1)if(typeof t=="string"){var s=e.createElement("div");for(s.innerHTML=t;s.firstChild;)this[i].appendChild(s.firstChild)}else if(t instanceof ae)for(var n=0;n<t.length;n+=1)this[i].appendChild(t[n]);else this[i].appendChild(t)}return this}function Cs(t){var e=j(),r,i;for(r=0;r<this.length;r+=1)if(typeof t=="string"){var s=e.createElement("div");for(s.innerHTML=t,i=s.childNodes.length-1;i>=0;i-=1)this[r].insertBefore(s.childNodes[i],this[r].childNodes[0])}else if(t instanceof ae)for(i=0;i<t.length;i+=1)this[r].insertBefore(t[i],this[r].childNodes[0]);else this[r].insertBefore(t,this[r].childNodes[0]);return this}function Ms(t){return this.length>0?t?this[0].nextElementSibling&&F(this[0].nextElementSibling).is(t)?F([this[0].nextElementSibling]):F([]):this[0].nextElementSibling?F([this[0].nextElementSibling]):F([]):F([])}function As(t){var e=[],r=this[0];if(!r)return F([]);for(;r.nextElementSibling;){var i=r.nextElementSibling;t?F(i).is(t)&&e.push(i):e.push(i),r=i}return F(e)}function Ps(t){if(this.length>0){var e=this[0];return t?e.previousElementSibling&&F(e.previousElementSibling).is(t)?F([e.previousElementSibling]):F([]):e.previousElementSibling?F([e.previousElementSibling]):F([])}return F([])}function Is(t){var e=[],r=this[0];if(!r)return F([]);for(;r.previousElementSibling;){var i=r.previousElementSibling;t?F(i).is(t)&&e.push(i):e.push(i),r=i}return F(e)}function Ls(t){for(var e=[],r=0;r<this.length;r+=1)this[r].parentNode!==null&&(t?F(this[r].parentNode).is(t)&&e.push(this[r].parentNode):e.push(this[r].parentNode));return F(e)}function Os(t){for(var e=[],r=0;r<this.length;r+=1)for(var i=this[r].parentNode;i;)t?F(i).is(t)&&e.push(i):e.push(i),i=i.parentNode;return F(e)}function Fs(t){var e=this;return typeof t=="undefined"?F([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function Rs(t){for(var e=[],r=0;r<this.length;r+=1)for(var i=this[r].querySelectorAll(t),s=0;s<i.length;s+=1)e.push(i[s]);return F(e)}function ks(t){for(var e=[],r=0;r<this.length;r+=1)for(var i=this[r].children,s=0;s<i.length;s+=1)(!t||F(i[s]).is(t))&&e.push(i[s]);return F(e)}function Ds(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}var $u="resize scroll".split(" ");function G(t){function e(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];if(typeof i[0]=="undefined"){for(var n=0;n<this.length;n+=1)$u.indexOf(t)<0&&(t in this[n]?this[n][t]():F(this[n]).trigger(t));return this}return this.on.apply(this,[t].concat(i))}return e}var eh=G("click"),th=G("blur"),rh=G("focus"),ih=G("focusin"),sh=G("focusout"),nh=G("keyup"),ah=G("keydown"),oh=G("keypress"),lh=G("submit"),uh=G("change"),ch=G("mousedown"),dh=G("mousemove"),fh=G("mouseup"),hh=G("mouseenter"),ph=G("mouseleave"),mh=G("mouseout"),vh=G("mouseover"),gh=G("touchstart"),yh=G("touchend"),bh=G("touchmove"),wh=G("resize"),xh=G("scroll");var _s={addClass:es,removeClass:ts,hasClass:is,toggleClass:rs,attr:ss,removeAttr:ns,transform:as,transition:os,on:ls,off:us,trigger:cs,transitionEnd:ds,outerWidth:fs,outerHeight:hs,styles:ms,offset:ps,css:vs,each:gs,html:bs,text:ws,is:xs,index:Es,eq:Ts,append:Ss,prepend:Cs,next:Ms,nextAll:As,prev:Ps,prevAll:Is,parent:Ls,parents:Os,closest:Fs,find:Rs,children:ks,filter:ys,remove:Ds};Object.keys(_s).forEach(function(t){Object.defineProperty(F.fn,t,{value:_s[t],writable:!0})});var z=F;function zs(t){var e=t;Object.keys(e).forEach(function(r){try{e[r]=null}catch(i){}try{delete e[r]}catch(i){}})}function Ae(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function Z(){return Date.now()}function Vu(t){var e=V(),r;return e.getComputedStyle&&(r=e.getComputedStyle(t,null)),!r&&t.currentStyle&&(r=t.currentStyle),r||(r=t.style),r}function Ns(t,e){e===void 0&&(e="x");var r=V(),i,s,n,a=Vu(t,null);return r.WebKitCSSMatrix?(s=a.transform||a.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(function(o){return o.replace(",",".")}).join(", ")),n=new r.WebKitCSSMatrix(s==="none"?"":s)):(n=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=n.toString().split(",")),e==="x"&&(r.WebKitCSSMatrix?s=n.m41:i.length===16?s=parseFloat(i[12]):s=parseFloat(i[4])),e==="y"&&(r.WebKitCSSMatrix?s=n.m42:i.length===16?s=parseFloat(i[13]):s=parseFloat(i[5])),s||0}function Pe(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Bu(t){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function N(){for(var t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"],r=1;r<arguments.length;r+=1){var i=r<0||arguments.length<=r?void 0:arguments[r];if(i!=null&&!Bu(i))for(var s=Object.keys(Object(i)).filter(function(u){return e.indexOf(u)<0}),n=0,a=s.length;n<a;n+=1){var o=s[n],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(Pe(t[o])&&Pe(i[o])?i[o].__swiper__?t[o]=i[o]:N(t[o],i[o]):!Pe(t[o])&&Pe(i[o])?(t[o]={},i[o].__swiper__?t[o]=i[o]:N(t[o],i[o])):t[o]=i[o])}}return t}function Ge(t,e){Object.keys(e).forEach(function(r){Pe(e[r])&&Object.keys(e[r]).forEach(function(i){typeof e[r][i]=="function"&&(e[r][i]=e[r][i].bind(t))}),t[r]=e[r]})}function fe(t){return t===void 0&&(t=""),"."+t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}function $s(t,e,r,i){var s=j();return r&&Object.keys(i).forEach(function(n){if(!e[n]&&e.auto===!0){var a=s.createElement("div");a.className=i[n],t.append(a),e[n]=a}}),e}var Ot;function qu(){var t=V(),e=j();return{touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>=0,observer:function(){return"MutationObserver"in t||"WebkitMutationObserver"in t}(),passiveListener:function(){var i=!1;try{var s=Object.defineProperty({},"passive",{get:function(){i=!0}});t.addEventListener("testPassiveListener",null,s)}catch(n){}return i}(),gestures:function(){return"ongesturestart"in t}()}}function Ue(){return Ot||(Ot=qu()),Ot}var Ft;function ju(t){var e=t===void 0?{}:t,r=e.userAgent,i=Ue(),s=V(),n=s.navigator.platform,a=r||s.navigator.userAgent,o={ios:!1,android:!1},l=s.screen.width,u=s.screen.height,c=a.match(/(Android);?[\s\/]+([\d.]+)?/),d=a.match(/(iPad).*OS\s([\d_]+)/),f=a.match(/(iPod)(.*OS\s([\d_]+))?/),h=!d&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=n==="Win32",p=n==="MacIntel",v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&p&&i.touch&&v.indexOf(l+"x"+u)>=0&&(d=a.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),p=!1),c&&!m&&(o.os="android",o.android=!0),(d||h||f)&&(o.os="ios",o.ios=!0),o}function Vs(t){return t===void 0&&(t={}),Ft||(Ft=ju(t)),Ft}var Rt;function Gu(){var t=V();function e(){var r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:e(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function Bs(){return Rt||(Rt=Gu()),Rt}var Uu=function(){var e=V();return typeof e.ResizeObserver!="undefined"},qs={name:"resize",create:function(){var e=this;N(e,{resize:{observer:null,createObserver:function(){!e||e.destroyed||!e.initialized||(e.resize.observer=new ResizeObserver(function(i){var s=e.width,n=e.height,a=s,o=n;i.forEach(function(l){var u=l.contentBoxSize,c=l.contentRect,d=l.target;d&&d!==e.el||(a=c?c.width:(u[0]||u).inlineSize,o=c?c.height:(u[0]||u).blockSize)}),(a!==s||o!==n)&&e.resize.resizeHandler()}),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){!e||e.destroyed||!e.initialized||(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){!e||e.destroyed||!e.initialized||e.emit("orientationchange")}}})},on:{init:function(e){var r=V();if(e.params.resizeObserver&&Uu()){e.resize.createObserver();return}r.addEventListener("resize",e.resize.resizeHandler),r.addEventListener("orientationchange",e.resize.orientationChangeHandler)},destroy:function(e){var r=V();e.resize.removeObserver(),r.removeEventListener("resize",e.resize.resizeHandler),r.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function kt(){return kt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},kt.apply(this,arguments)}var Hu={attach:function(e,r){r===void 0&&(r={});var i=V(),s=this,n=i.MutationObserver||i.WebkitMutationObserver,a=new n(function(o){if(o.length===1){s.emit("observerUpdate",o[0]);return}var l=function(){s.emit("observerUpdate",o[0])};i.requestAnimationFrame?i.requestAnimationFrame(l):i.setTimeout(l,0)});a.observe(e,{attributes:typeof r.attributes=="undefined"?!0:r.attributes,childList:typeof r.childList=="undefined"?!0:r.childList,characterData:typeof r.characterData=="undefined"?!0:r.characterData}),s.observer.observers.push(a)},init:function(){var e=this;if(!(!e.support.observer||!e.params.observer)){if(e.params.observeParents)for(var r=e.$el.parents(),i=0;i<r.length;i+=1)e.observer.attach(r[i]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){var e=this;e.observer.observers.forEach(function(r){r.disconnect()}),e.observer.observers=[]}},js={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){var e=this;Ge(e,{observer:kt({},Hu,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}};var Gs={useParams:function(e){var r=this;!r.modules||Object.keys(r.modules).forEach(function(i){var s=r.modules[i];s.params&&N(e,s.params)})},useModules:function(e){e===void 0&&(e={});var r=this;!r.modules||Object.keys(r.modules).forEach(function(i){var s=r.modules[i],n=e[i]||{};s.on&&r.on&&Object.keys(s.on).forEach(function(a){r.on(a,s.on[a])}),s.create&&s.create.bind(r)(n)})}};var Us={on:function(e,r,i){var s=this;if(typeof r!="function")return s;var n=i?"unshift":"push";return e.split(" ").forEach(function(a){s.eventsListeners[a]||(s.eventsListeners[a]=[]),s.eventsListeners[a][n](r)}),s},once:function(e,r,i){var s=this;if(typeof r!="function")return s;function n(){s.off(e,n),n.__emitterProxy&&delete n.__emitterProxy;for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];r.apply(s,o)}return n.__emitterProxy=r,s.on(e,n,i)},onAny:function(e,r){var i=this;if(typeof e!="function")return i;var s=r?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[s](e),i},offAny:function(e){var r=this;if(!r.eventsAnyListeners)return r;var i=r.eventsAnyListeners.indexOf(e);return i>=0&&r.eventsAnyListeners.splice(i,1),r},off:function(e,r){var i=this;return i.eventsListeners&&e.split(" ").forEach(function(s){typeof r=="undefined"?i.eventsListeners[s]=[]:i.eventsListeners[s]&&i.eventsListeners[s].forEach(function(n,a){(n===r||n.__emitterProxy&&n.__emitterProxy===r)&&i.eventsListeners[s].splice(a,1)})}),i},emit:function(){var e=this;if(!e.eventsListeners)return e;for(var r,i,s,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];typeof a[0]=="string"||Array.isArray(a[0])?(r=a[0],i=a.slice(1,a.length),s=e):(r=a[0].events,i=a[0].data,s=a[0].context||e),i.unshift(s);var l=Array.isArray(r)?r:r.split(" ");return l.forEach(function(u){e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(function(c){c.apply(s,[u].concat(i))}),e.eventsListeners&&e.eventsListeners[u]&&e.eventsListeners[u].forEach(function(c){c.apply(s,i)})}),e}};function Dt(){var t=this,e,r,i=t.$el;typeof t.params.width!="undefined"&&t.params.width!==null?e=t.params.width:e=i[0].clientWidth,typeof t.params.height!="undefined"&&t.params.height!==null?r=t.params.height:r=i[0].clientHeight,!(e===0&&t.isHorizontal()||r===0&&t.isVertical())&&(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),r=r-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(r)&&(r=0),N(t,{width:e,height:r,size:t.isHorizontal()?e:r}))}function _t(){var t=this;function e(H){return t.isHorizontal()?H:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[H]}function r(H,ce){return parseFloat(H.getPropertyValue(e(ce))||0)}var i=t.params,s=t.$wrapperEl,n=t.size,a=t.rtlTranslate,o=t.wrongRTL,l=t.virtual&&i.virtual.enabled,u=l?t.virtual.slides.length:t.slides.length,c=s.children("."+t.params.slideClass),d=l?t.virtual.slides.length:c.length,f=[],h=[],m=[],p=i.slidesOffsetBefore;typeof p=="function"&&(p=i.slidesOffsetBefore.call(t));var v=i.slidesOffsetAfter;typeof v=="function"&&(v=i.slidesOffsetAfter.call(t));var g=t.snapGrid.length,T=t.slidesGrid.length,x=i.spaceBetween,w=-p,b=0,y=0;if(typeof n!="undefined"){typeof x=="string"&&x.indexOf("%")>=0&&(x=parseFloat(x.replace("%",""))/100*n),t.virtualSize=-x,a?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""});var E;i.slidesPerColumn>1&&(Math.floor(d/i.slidesPerColumn)===d/t.params.slidesPerColumn?E=d:E=Math.ceil(d/i.slidesPerColumn)*i.slidesPerColumn,i.slidesPerView!=="auto"&&i.slidesPerColumnFill==="row"&&(E=Math.max(E,i.slidesPerView*i.slidesPerColumn)));for(var S,M=i.slidesPerColumn,C=E/M,L=Math.floor(d/i.slidesPerColumn),O=0;O<d;O+=1){S=0;var A=c.eq(O);if(i.slidesPerColumn>1){var P=void 0,R=void 0,$=void 0;if(i.slidesPerColumnFill==="row"&&i.slidesPerGroup>1){var q=Math.floor(O/(i.slidesPerGroup*i.slidesPerColumn)),X=O-i.slidesPerColumn*i.slidesPerGroup*q,ee=q===0?i.slidesPerGroup:Math.min(Math.ceil((d-q*M*i.slidesPerGroup)/M),i.slidesPerGroup);$=Math.floor(X/ee),R=X-$*ee+q*i.slidesPerGroup,P=R+$*E/M,A.css({"-webkit-box-ordinal-group":P,"-moz-box-ordinal-group":P,"-ms-flex-order":P,"-webkit-order":P,order:P})}else i.slidesPerColumnFill==="column"?(R=Math.floor(O/M),$=O-R*M,(R>L||R===L&&$===M-1)&&($+=1,$>=M&&($=0,R+=1))):($=Math.floor(O/C),R=O-$*C);A.css(e("margin-top"),$!==0?i.spaceBetween&&i.spaceBetween+"px":"")}if(A.css("display")!=="none"){if(i.slidesPerView==="auto"){var J=getComputedStyle(A[0]),W=A[0].style.transform,B=A[0].style.webkitTransform;if(W&&(A[0].style.transform="none"),B&&(A[0].style.webkitTransform="none"),i.roundLengths)S=t.isHorizontal()?A.outerWidth(!0):A.outerHeight(!0);else{var Ai=r(J,"width"),lu=r(J,"padding-left"),uu=r(J,"padding-right"),Pi=r(J,"margin-left"),Ii=r(J,"margin-right"),Li=J.getPropertyValue("box-sizing");if(Li&&Li==="border-box")S=Ai+Pi+Ii;else{var Oi=A[0],cu=Oi.clientWidth,du=Oi.offsetWidth;S=Ai+lu+uu+Pi+Ii+(du-cu)}}W&&(A[0].style.transform=W),B&&(A[0].style.webkitTransform=B),i.roundLengths&&(S=Math.floor(S))}else S=(n-(i.slidesPerView-1)*x)/i.slidesPerView,i.roundLengths&&(S=Math.floor(S)),c[O]&&(c[O].style[e("width")]=S+"px");c[O]&&(c[O].swiperSlideSize=S),m.push(S),i.centeredSlides?(w=w+S/2+b/2+x,b===0&&O!==0&&(w=w-n/2-x),O===0&&(w=w-n/2-x),Math.abs(w)<1/1e3&&(w=0),i.roundLengths&&(w=Math.floor(w)),y%i.slidesPerGroup==0&&f.push(w),h.push(w)):(i.roundLengths&&(w=Math.floor(w)),(y-Math.min(t.params.slidesPerGroupSkip,y))%t.params.slidesPerGroup==0&&f.push(w),h.push(w),w=w+S+x),t.virtualSize+=S+x,b=S,y+=1}}t.virtualSize=Math.max(t.virtualSize,n)+v;var me;if(a&&o&&(i.effect==="slide"||i.effect==="coverflow")&&s.css({width:t.virtualSize+i.spaceBetween+"px"}),i.setWrapperSize){var wt;s.css((wt={},wt[e("width")]=t.virtualSize+i.spaceBetween+"px",wt))}if(i.slidesPerColumn>1){var xt;if(t.virtualSize=(S+i.spaceBetween)*E,t.virtualSize=Math.ceil(t.virtualSize/i.slidesPerColumn)-i.spaceBetween,s.css((xt={},xt[e("width")]=t.virtualSize+i.spaceBetween+"px",xt)),i.centeredSlides){me=[];for(var ze=0;ze<f.length;ze+=1){var Et=f[ze];i.roundLengths&&(Et=Math.floor(Et)),f[ze]<t.virtualSize+f[0]&&me.push(Et)}f=me}}if(!i.centeredSlides){me=[];for(var Ne=0;Ne<f.length;Ne+=1){var Tt=f[Ne];i.roundLengths&&(Tt=Math.floor(Tt)),f[Ne]<=t.virtualSize-n&&me.push(Tt)}f=me,Math.floor(t.virtualSize-n)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-n)}if(f.length===0&&(f=[0]),i.spaceBetween!==0){var St,fu=t.isHorizontal()&&a?"marginLeft":e("marginRight");c.filter(function(H,ce){return i.cssMode?ce!==c.length-1:!0}).css((St={},St[fu]=x+"px",St))}if(i.centeredSlides&&i.centeredSlidesBounds){var Ct=0;m.forEach(function(H){Ct+=H+(i.spaceBetween?i.spaceBetween:0)}),Ct-=i.spaceBetween;var Fi=Ct-n;f=f.map(function(H){return H<0?-p:H>Fi?Fi+v:H})}if(i.centerInsufficientSlides){var $e=0;if(m.forEach(function(H){$e+=H+(i.spaceBetween?i.spaceBetween:0)}),$e-=i.spaceBetween,$e<n){var Ri=(n-$e)/2;f.forEach(function(H,ce){f[ce]=H-Ri}),h.forEach(function(H,ce){h[ce]=H+Ri})}}N(t,{slides:c,snapGrid:f,slidesGrid:h,slidesSizesGrid:m}),d!==u&&t.emit("slidesLengthChange"),f.length!==g&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),h.length!==T&&t.emit("slidesGridLengthChange"),(i.watchSlidesProgress||i.watchSlidesVisibility)&&t.updateSlidesOffset()}}function zt(t){var e=this,r=[],i=e.virtual&&e.params.virtual.enabled,s=0,n;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);var a=function(c){return i?e.slides.filter(function(d){return parseInt(d.getAttribute("data-swiper-slide-index"),10)===c})[0]:e.slides.eq(c)[0]};if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)e.visibleSlides.each(function(u){r.push(u)});else for(n=0;n<Math.ceil(e.params.slidesPerView);n+=1){var o=e.activeIndex+n;if(o>e.slides.length&&!i)break;r.push(a(o))}else r.push(a(e.activeIndex));for(n=0;n<r.length;n+=1)if(typeof r[n]!="undefined"){var l=r[n].offsetHeight;s=l>s?l:s}s&&e.$wrapperEl.css("height",s+"px")}function Nt(){for(var t=this,e=t.slides,r=0;r<e.length;r+=1)e[r].swiperSlideOffset=t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop}function $t(t){t===void 0&&(t=this&&this.translate||0);var e=this,r=e.params,i=e.slides,s=e.rtlTranslate;if(i.length!==0){typeof i[0].swiperSlideOffset=="undefined"&&e.updateSlidesOffset();var n=-t;s&&(n=t),i.removeClass(r.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(var a=0;a<i.length;a+=1){var o=i[a],l=(n+(r.centeredSlides?e.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+r.spaceBetween);if(r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight){var u=-(n-o.swiperSlideOffset),c=u+e.slidesSizesGrid[a],d=u>=0&&u<e.size-1||c>1&&c<=e.size||u<=0&&c>=e.size;d&&(e.visibleSlides.push(o),e.visibleSlidesIndexes.push(a),i.eq(a).addClass(r.slideVisibleClass))}o.progress=s?-l:l}e.visibleSlides=z(e.visibleSlides)}}function Vt(t){var e=this;if(typeof t=="undefined"){var r=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*r||0}var i=e.params,s=e.maxTranslate()-e.minTranslate(),n=e.progress,a=e.isBeginning,o=e.isEnd,l=a,u=o;s===0?(n=0,a=!0,o=!0):(n=(t-e.minTranslate())/s,a=n<=0,o=n>=1),N(e,{progress:n,isBeginning:a,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&e.updateSlidesProgress(t),a&&!l&&e.emit("reachBeginning toEdge"),o&&!u&&e.emit("reachEnd toEdge"),(l&&!a||u&&!o)&&e.emit("fromEdge"),e.emit("progress",n)}function Bt(){var t=this,e=t.slides,r=t.params,i=t.$wrapperEl,s=t.activeIndex,n=t.realIndex,a=t.virtual&&r.virtual.enabled;e.removeClass(r.slideActiveClass+" "+r.slideNextClass+" "+r.slidePrevClass+" "+r.slideDuplicateActiveClass+" "+r.slideDuplicateNextClass+" "+r.slideDuplicatePrevClass);var o;a?o=t.$wrapperEl.find("."+r.slideClass+'[data-swiper-slide-index="'+s+'"]'):o=e.eq(s),o.addClass(r.slideActiveClass),r.loop&&(o.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+n+'"]').addClass(r.slideDuplicateActiveClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+n+'"]').addClass(r.slideDuplicateActiveClass));var l=o.nextAll("."+r.slideClass).eq(0).addClass(r.slideNextClass);r.loop&&l.length===0&&(l=e.eq(0),l.addClass(r.slideNextClass));var u=o.prevAll("."+r.slideClass).eq(0).addClass(r.slidePrevClass);r.loop&&u.length===0&&(u=e.eq(-1),u.addClass(r.slidePrevClass)),r.loop&&(l.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass),u.hasClass(r.slideDuplicateClass)?i.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass):i.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()}function qt(t){var e=this,r=e.rtlTranslate?e.translate:-e.translate,i=e.slidesGrid,s=e.snapGrid,n=e.params,a=e.activeIndex,o=e.realIndex,l=e.snapIndex,u=t,c;if(typeof u=="undefined"){for(var d=0;d<i.length;d+=1)typeof i[d+1]!="undefined"?r>=i[d]&&r<i[d+1]-(i[d+1]-i[d])/2?u=d:r>=i[d]&&r<i[d+1]&&(u=d+1):r>=i[d]&&(u=d);n.normalizeSlideIndex&&(u<0||typeof u=="undefined")&&(u=0)}if(s.indexOf(r)>=0)c=s.indexOf(r);else{var f=Math.min(n.slidesPerGroupSkip,u);c=f+Math.floor((u-f)/n.slidesPerGroup)}if(c>=s.length&&(c=s.length-1),u===a){c!==l&&(e.snapIndex=c,e.emit("snapIndexChange"));return}var h=parseInt(e.slides.eq(u).attr("data-swiper-slide-index")||u,10);N(e,{snapIndex:c,realIndex:h,previousIndex:a,activeIndex:u}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==h&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function jt(t){var e=this,r=e.params,i=z(t.target).closest("."+r.slideClass)[0],s=!1,n;if(i){for(var a=0;a<e.slides.length;a+=1)if(e.slides[a]===i){s=!0,n=a;break}}if(i&&s)e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(z(i).attr("data-swiper-slide-index"),10):e.clickedIndex=n;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}r.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var Hs={updateSize:Dt,updateSlides:_t,updateAutoHeight:zt,updateSlidesOffset:Nt,updateSlidesProgress:$t,updateProgress:Vt,updateSlidesClasses:Bt,updateActiveIndex:qt,updateClickedSlide:jt};function Gt(t){t===void 0&&(t=this.isHorizontal()?"x":"y");var e=this,r=e.params,i=e.rtlTranslate,s=e.translate,n=e.$wrapperEl;if(r.virtualTranslate)return i?-s:s;if(r.cssMode)return s;var a=Ns(n[0],t);return i&&(a=-a),a||0}function Ut(t,e){var r=this,i=r.rtlTranslate,s=r.params,n=r.$wrapperEl,a=r.wrapperEl,o=r.progress,l=0,u=0,c=0;r.isHorizontal()?l=i?-t:t:u=t,s.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),s.cssMode?a[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-l:-u:s.virtualTranslate||n.transform("translate3d("+l+"px, "+u+"px, "+c+"px)"),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?l:u;var d,f=r.maxTranslate()-r.minTranslate();f===0?d=0:d=(t-r.minTranslate())/f,d!==o&&r.updateProgress(t),r.emit("setTranslate",r.translate,e)}function Ht(){return-this.snapGrid[0]}function Wt(){return-this.snapGrid[this.snapGrid.length-1]}function Yt(t,e,r,i,s){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),r===void 0&&(r=!0),i===void 0&&(i=!0);var n=this,a=n.params,o=n.wrapperEl;if(n.animating&&a.preventInteractionOnTransition)return!1;var l=n.minTranslate(),u=n.maxTranslate(),c;if(i&&t>l?c=l:i&&t<u?c=u:c=t,n.updateProgress(c),a.cssMode){var d=n.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-c;else if(o.scrollTo){var f;o.scrollTo((f={},f[d?"left":"top"]=-c,f.behavior="smooth",f))}else o[d?"scrollLeft":"scrollTop"]=-c;return!0}return e===0?(n.setTransition(0),n.setTranslate(c),r&&(n.emit("beforeTransitionStart",e,s),n.emit("transitionEnd"))):(n.setTransition(e),n.setTranslate(c),r&&(n.emit("beforeTransitionStart",e,s),n.emit("transitionStart")),n.animating||(n.animating=!0,n.onTranslateToWrapperTransitionEnd||(n.onTranslateToWrapperTransitionEnd=function(m){!n||n.destroyed||m.target===this&&(n.$wrapperEl[0].removeEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.$wrapperEl[0].removeEventListener("webkitTransitionEnd",n.onTranslateToWrapperTransitionEnd),n.onTranslateToWrapperTransitionEnd=null,delete n.onTranslateToWrapperTransitionEnd,r&&n.emit("transitionEnd"))}),n.$wrapperEl[0].addEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.$wrapperEl[0].addEventListener("webkitTransitionEnd",n.onTranslateToWrapperTransitionEnd))),!0}var Ws={getTranslate:Gt,setTranslate:Ut,minTranslate:Ht,maxTranslate:Wt,translateTo:Yt};function Xt(t,e){var r=this;r.params.cssMode||r.$wrapperEl.transition(t),r.emit("setTransition",t,e)}function Qt(t,e){t===void 0&&(t=!0);var r=this,i=r.activeIndex,s=r.params,n=r.previousIndex;if(!s.cssMode){s.autoHeight&&r.updateAutoHeight();var a=e;if(a||(i>n?a="next":i<n?a="prev":a="reset"),r.emit("transitionStart"),t&&i!==n){if(a==="reset"){r.emit("slideResetTransitionStart");return}r.emit("slideChangeTransitionStart"),a==="next"?r.emit("slideNextTransitionStart"):r.emit("slidePrevTransitionStart")}}}function Zt(t,e){t===void 0&&(t=!0);var r=this,i=r.activeIndex,s=r.previousIndex,n=r.params;if(r.animating=!1,!n.cssMode){r.setTransition(0);var a=e;if(a||(i>s?a="next":i<s?a="prev":a="reset"),r.emit("transitionEnd"),t&&i!==s){if(a==="reset"){r.emit("slideResetTransitionEnd");return}r.emit("slideChangeTransitionEnd"),a==="next"?r.emit("slideNextTransitionEnd"):r.emit("slidePrevTransitionEnd")}}}var Ys={setTransition:Xt,transitionStart:Qt,transitionEnd:Zt};function Jt(t,e,r,i,s){if(t===void 0&&(t=0),e===void 0&&(e=this.params.speed),r===void 0&&(r=!0),typeof t!="number"&&typeof t!="string")throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof t+"] given.");if(typeof t=="string"){var n=parseInt(t,10),a=isFinite(n);if(!a)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+t+"] given.");t=n}var o=this,l=t;l<0&&(l=0);var u=o.params,c=o.snapGrid,d=o.slidesGrid,f=o.previousIndex,h=o.activeIndex,m=o.rtlTranslate,p=o.wrapperEl,v=o.enabled;if(o.animating&&u.preventInteractionOnTransition||!v&&!i&&!s)return!1;var g=Math.min(o.params.slidesPerGroupSkip,l),T=g+Math.floor((l-g)/o.params.slidesPerGroup);T>=c.length&&(T=c.length-1),(h||u.initialSlide||0)===(f||0)&&r&&o.emit("beforeSlideChangeStart");var x=-c[T];if(o.updateProgress(x),u.normalizeSlideIndex)for(var w=0;w<d.length;w+=1){var b=-Math.floor(x*100),y=Math.floor(d[w]*100),E=Math.floor(d[w+1]*100);typeof d[w+1]!="undefined"?b>=y&&b<E-(E-y)/2?l=w:b>=y&&b<E&&(l=w+1):b>=y&&(l=w)}if(o.initialized&&l!==h&&(!o.allowSlideNext&&x<o.translate&&x<o.minTranslate()||!o.allowSlidePrev&&x>o.translate&&x>o.maxTranslate()&&(h||0)!==l))return!1;var S;if(l>h?S="next":l<h?S="prev":S="reset",m&&-x===o.translate||!m&&x===o.translate)return o.updateActiveIndex(l),u.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),u.effect!=="slide"&&o.setTranslate(x),S!=="reset"&&(o.transitionStart(r,S),o.transitionEnd(r,S)),!1;if(u.cssMode){var M=o.isHorizontal(),C=-x;if(m&&(C=p.scrollWidth-p.offsetWidth-C),e===0)p[M?"scrollLeft":"scrollTop"]=C;else if(p.scrollTo){var L;p.scrollTo((L={},L[M?"left":"top"]=C,L.behavior="smooth",L))}else p[M?"scrollLeft":"scrollTop"]=C;return!0}return e===0?(o.setTransition(0),o.setTranslate(x),o.updateActiveIndex(l),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,i),o.transitionStart(r,S),o.transitionEnd(r,S)):(o.setTransition(e),o.setTranslate(x),o.updateActiveIndex(l),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,i),o.transitionStart(r,S),o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(A){!o||o.destroyed||A.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(r,S))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd))),!0}function Kt(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),r===void 0&&(r=!0);var s=this,n=t;return s.params.loop&&(n+=s.loopedSlides),s.slideTo(n,e,r,i)}function er(t,e,r){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);var i=this,s=i.params,n=i.animating,a=i.enabled;if(!a)return i;var o=i.activeIndex<s.slidesPerGroupSkip?1:s.slidesPerGroup;if(s.loop){if(n&&s.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return i.slideTo(i.activeIndex+o,t,e,r)}function tr(t,e,r){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);var i=this,s=i.params,n=i.animating,a=i.snapGrid,o=i.slidesGrid,l=i.rtlTranslate,u=i.enabled;if(!u)return i;if(s.loop){if(n&&s.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}var c=l?i.translate:-i.translate;function d(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}var f=d(c),h=a.map(function(v){return d(v)}),m=a[h.indexOf(f)-1];typeof m=="undefined"&&s.cssMode&&a.forEach(function(v){!m&&f>=v&&(m=v)});var p;return typeof m!="undefined"&&(p=o.indexOf(m),p<0&&(p=i.activeIndex-1)),i.slideTo(p,t,e,r)}function rr(t,e,r){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);var i=this;return i.slideTo(i.activeIndex,t,e,r)}function ir(t,e,r,i){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);var s=this,n=s.activeIndex,a=Math.min(s.params.slidesPerGroupSkip,n),o=a+Math.floor((n-a)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[o]){var u=s.snapGrid[o],c=s.snapGrid[o+1];l-u>(c-u)*i&&(n+=s.params.slidesPerGroup)}else{var d=s.snapGrid[o-1],f=s.snapGrid[o];l-d<=(f-d)*i&&(n-=s.params.slidesPerGroup)}return n=Math.max(n,0),n=Math.min(n,s.slidesGrid.length-1),s.slideTo(n,t,e,r)}function sr(){var t=this,e=t.params,r=t.$wrapperEl,i=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView,s=t.clickedIndex,n;if(e.loop){if(t.animating)return;n=parseInt(z(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?s<t.loopedSlides-i/2||s>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),s=r.children("."+e.slideClass+'[data-swiper-slide-index="'+n+'"]:not(.'+e.slideDuplicateClass+")").eq(0).index(),Ae(function(){t.slideTo(s)})):t.slideTo(s):s>t.slides.length-i?(t.loopFix(),s=r.children("."+e.slideClass+'[data-swiper-slide-index="'+n+'"]:not(.'+e.slideDuplicateClass+")").eq(0).index(),Ae(function(){t.slideTo(s)})):t.slideTo(s)}else t.slideTo(s)}var Xs={slideTo:Jt,slideToLoop:Kt,slideNext:er,slidePrev:tr,slideReset:rr,slideToClosest:ir,slideToClickedSlide:sr};function nr(){var t=this,e=j(),r=t.params,i=t.$wrapperEl;i.children("."+r.slideClass+"."+r.slideDuplicateClass).remove();var s=i.children("."+r.slideClass);if(r.loopFillGroupWithBlank){var n=r.slidesPerGroup-s.length%r.slidesPerGroup;if(n!==r.slidesPerGroup){for(var a=0;a<n;a+=1){var o=z(e.createElement("div")).addClass(r.slideClass+" "+r.slideBlankClass);i.append(o)}s=i.children("."+r.slideClass)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=s.length),t.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),t.loopedSlides+=r.loopAdditionalSlides,t.loopedSlides>s.length&&(t.loopedSlides=s.length);var l=[],u=[];s.each(function(f,h){var m=z(f);h<t.loopedSlides&&u.push(f),h<s.length&&h>=s.length-t.loopedSlides&&l.push(f),m.attr("data-swiper-slide-index",h)});for(var c=0;c<u.length;c+=1)i.append(z(u[c].cloneNode(!0)).addClass(r.slideDuplicateClass));for(var d=l.length-1;d>=0;d-=1)i.prepend(z(l[d].cloneNode(!0)).addClass(r.slideDuplicateClass))}function ar(){var t=this;t.emit("beforeLoopFix");var e=t.activeIndex,r=t.slides,i=t.loopedSlides,s=t.allowSlidePrev,n=t.allowSlideNext,a=t.snapGrid,o=t.rtlTranslate,l;t.allowSlidePrev=!0,t.allowSlideNext=!0;var u=-a[e],c=u-t.getTranslate();if(e<i){l=r.length-i*3+e,l+=i;var d=t.slideTo(l,0,!1,!0);d&&c!==0&&t.setTranslate((o?-t.translate:t.translate)-c)}else if(e>=r.length-i){l=-r.length+e+i,l+=i;var f=t.slideTo(l,0,!1,!0);f&&c!==0&&t.setTranslate((o?-t.translate:t.translate)-c)}t.allowSlidePrev=s,t.allowSlideNext=n,t.emit("loopFix")}function or(){var t=this,e=t.$wrapperEl,r=t.params,i=t.slides;e.children("."+r.slideClass+"."+r.slideDuplicateClass+",."+r.slideClass+"."+r.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}var Qs={loopCreate:nr,loopFix:ar,loopDestroy:or};function lr(t){var e=this;if(!(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)){var r=e.el;r.style.cursor="move",r.style.cursor=t?"-webkit-grabbing":"-webkit-grab",r.style.cursor=t?"-moz-grabbin":"-moz-grab",r.style.cursor=t?"grabbing":"grab"}}function ur(){var t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.el.style.cursor="")}var Zs={setGrabCursor:lr,unsetGrabCursor:ur};function cr(t){var e=this,r=e.$wrapperEl,i=e.params;if(i.loop&&e.loopDestroy(),typeof t=="object"&&"length"in t)for(var s=0;s<t.length;s+=1)t[s]&&r.append(t[s]);else r.append(t);i.loop&&e.loopCreate(),i.observer&&e.support.observer||e.update()}function dr(t){var e=this,r=e.params,i=e.$wrapperEl,s=e.activeIndex;r.loop&&e.loopDestroy();var n=s+1;if(typeof t=="object"&&"length"in t){for(var a=0;a<t.length;a+=1)t[a]&&i.prepend(t[a]);n=s+t.length}else i.prepend(t);r.loop&&e.loopCreate(),r.observer&&e.support.observer||e.update(),e.slideTo(n,0,!1)}function fr(t,e){var r=this,i=r.$wrapperEl,s=r.params,n=r.activeIndex,a=n;s.loop&&(a-=r.loopedSlides,r.loopDestroy(),r.slides=i.children("."+s.slideClass));var o=r.slides.length;if(t<=0){r.prependSlide(e);return}if(t>=o){r.appendSlide(e);return}for(var l=a>t?a+1:a,u=[],c=o-1;c>=t;c-=1){var d=r.slides.eq(c);d.remove(),u.unshift(d)}if(typeof e=="object"&&"length"in e){for(var f=0;f<e.length;f+=1)e[f]&&i.append(e[f]);l=a>t?a+e.length:a}else i.append(e);for(var h=0;h<u.length;h+=1)i.append(u[h]);s.loop&&r.loopCreate(),s.observer&&r.support.observer||r.update(),s.loop?r.slideTo(l+r.loopedSlides,0,!1):r.slideTo(l,0,!1)}function hr(t){var e=this,r=e.params,i=e.$wrapperEl,s=e.activeIndex,n=s;r.loop&&(n-=e.loopedSlides,e.loopDestroy(),e.slides=i.children("."+r.slideClass));var a=n,o;if(typeof t=="object"&&"length"in t){for(var l=0;l<t.length;l+=1)o=t[l],e.slides[o]&&e.slides.eq(o).remove(),o<a&&(a-=1);a=Math.max(a,0)}else o=t,e.slides[o]&&e.slides.eq(o).remove(),o<a&&(a-=1),a=Math.max(a,0);r.loop&&e.loopCreate(),r.observer&&e.support.observer||e.update(),r.loop?e.slideTo(a+e.loopedSlides,0,!1):e.slideTo(a,0,!1)}function pr(){for(var t=this,e=[],r=0;r<t.slides.length;r+=1)e.push(r);t.removeSlide(e)}var Js={appendSlide:cr,prependSlide:dr,addSlide:fr,removeSlide:hr,removeAllSlides:pr};function Wu(t,e){e===void 0&&(e=this);function r(i){if(!i||i===j()||i===V())return null;i.assignedSlot&&(i=i.assignedSlot);var s=i.closest(t);return s||r(i.getRootNode().host)}return r(e)}function mr(t){var e=this,r=j(),i=V(),s=e.touchEventsData,n=e.params,a=e.touches,o=e.enabled;if(!!o&&!(e.animating&&n.preventInteractionOnTransition)){var l=t;l.originalEvent&&(l=l.originalEvent);var u=z(l.target);if(!(n.touchEventsTarget==="wrapper"&&!u.closest(e.wrapperEl).length)&&(s.isTouchEvent=l.type==="touchstart",!(!s.isTouchEvent&&"which"in l&&l.which===3)&&!(!s.isTouchEvent&&"button"in l&&l.button>0)&&!(s.isTouched&&s.isMoved))){var c=!!n.noSwipingClass&&n.noSwipingClass!=="";c&&l.target&&l.target.shadowRoot&&t.path&&t.path[0]&&(u=z(t.path[0]));var d=n.noSwipingSelector?n.noSwipingSelector:"."+n.noSwipingClass,f=!!(l.target&&l.target.shadowRoot);if(n.noSwiping&&(f?Wu(d,l.target):u.closest(d)[0])){e.allowClick=!0;return}if(!(n.swipeHandler&&!u.closest(n.swipeHandler)[0])){a.currentX=l.type==="touchstart"?l.targetTouches[0].pageX:l.pageX,a.currentY=l.type==="touchstart"?l.targetTouches[0].pageY:l.pageY;var h=a.currentX,m=a.currentY,p=n.edgeSwipeDetection||n.iOSEdgeSwipeDetection,v=n.edgeSwipeThreshold||n.iOSEdgeSwipeThreshold;if(p&&(h<=v||h>=i.innerWidth-v))if(p==="prevent")t.preventDefault();else return;if(N(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=h,a.startY=m,s.touchStartTime=Z(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,n.threshold>0&&(s.allowThresholdMove=!1),l.type!=="touchstart"){var g=!0;u.is(s.focusableElements)&&(g=!1),r.activeElement&&z(r.activeElement).is(s.focusableElements)&&r.activeElement!==u[0]&&r.activeElement.blur();var T=g&&e.allowTouchMove&&n.touchStartPreventDefault;(n.touchStartForcePreventDefault||T)&&!u[0].isContentEditable&&l.preventDefault()}e.emit("touchStart",l)}}}}function vr(t){var e=j(),r=this,i=r.touchEventsData,s=r.params,n=r.touches,a=r.rtlTranslate,o=r.enabled;if(!!o){var l=t;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&r.emit("touchMoveOpposite",l);return}if(!(i.isTouchEvent&&l.type!=="touchmove")){var u=l.type==="touchmove"&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),c=l.type==="touchmove"?u.pageX:l.pageX,d=l.type==="touchmove"?u.pageY:l.pageY;if(l.preventedByNestedSwiper){n.startX=c,n.startY=d;return}if(!r.allowTouchMove){r.allowClick=!1,i.isTouched&&(N(n,{startX:c,startY:d,currentX:c,currentY:d}),i.touchStartTime=Z());return}if(i.isTouchEvent&&s.touchReleaseOnEdges&&!s.loop){if(r.isVertical()){if(d<n.startY&&r.translate<=r.maxTranslate()||d>n.startY&&r.translate>=r.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(c<n.startX&&r.translate<=r.maxTranslate()||c>n.startX&&r.translate>=r.minTranslate())return}if(i.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&z(l.target).is(i.focusableElements)){i.isMoved=!0,r.allowClick=!1;return}if(i.allowTouchCallbacks&&r.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){n.currentX=c,n.currentY=d;var f=n.currentX-n.startX,h=n.currentY-n.startY;if(!(r.params.threshold&&Math.sqrt(Math.pow(f,2)+Math.pow(h,2))<r.params.threshold)){if(typeof i.isScrolling=="undefined"){var m;r.isHorizontal()&&n.currentY===n.startY||r.isVertical()&&n.currentX===n.startX?i.isScrolling=!1:f*f+h*h>=25&&(m=Math.atan2(Math.abs(h),Math.abs(f))*180/Math.PI,i.isScrolling=r.isHorizontal()?m>s.touchAngle:90-m>s.touchAngle)}if(i.isScrolling&&r.emit("touchMoveOpposite",l),typeof i.startMoving=="undefined"&&(n.currentX!==n.startX||n.currentY!==n.startY)&&(i.startMoving=!0),i.isScrolling){i.isTouched=!1;return}if(!!i.startMoving){r.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation(),i.isMoved||(s.loop&&r.loopFix(),i.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,s.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",l)),r.emit("sliderMove",l),i.isMoved=!0;var p=r.isHorizontal()?f:h;n.diff=p,p*=s.touchRatio,a&&(p=-p),r.swipeDirection=p>0?"prev":"next",i.currentTranslate=p+i.startTranslate;var v=!0,g=s.resistanceRatio;if(s.touchReleaseOnEdges&&(g=0),p>0&&i.currentTranslate>r.minTranslate()?(v=!1,s.resistance&&(i.currentTranslate=r.minTranslate()-1+Math.pow(-r.minTranslate()+i.startTranslate+p,g))):p<0&&i.currentTranslate<r.maxTranslate()&&(v=!1,s.resistance&&(i.currentTranslate=r.maxTranslate()+1-Math.pow(r.maxTranslate()-i.startTranslate-p,g))),v&&(l.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(i.currentTranslate=i.startTranslate),s.threshold>0)if(Math.abs(p)>s.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,i.currentTranslate=i.startTranslate,n.diff=r.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY;return}}else{i.currentTranslate=i.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode||s.watchSlidesProgress||s.watchSlidesVisibility)&&(r.updateActiveIndex(),r.updateSlidesClasses()),s.freeMode&&(i.velocities.length===0&&i.velocities.push({position:n[r.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:n[r.isHorizontal()?"currentX":"currentY"],time:Z()})),r.updateProgress(i.currentTranslate),r.setTranslate(i.currentTranslate))}}}}}}function gr(t){var e=this,r=e.touchEventsData,i=e.params,s=e.touches,n=e.rtlTranslate,a=e.$wrapperEl,o=e.slidesGrid,l=e.snapGrid,u=e.enabled;if(!!u){var c=t;if(c.originalEvent&&(c=c.originalEvent),r.allowTouchCallbacks&&e.emit("touchEnd",c),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&i.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}i.grabCursor&&r.isMoved&&r.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);var d=Z(),f=d-r.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(c),e.emit("tap click",c),f<300&&d-r.lastClickTime<300&&e.emit("doubleTap doubleClick",c)),r.lastClickTime=Z(),Ae(function(){e.destroyed||(e.allowClick=!0)}),!r.isTouched||!r.isMoved||!e.swipeDirection||s.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;var h;if(i.followFinger?h=n?e.translate:-e.translate:h=-r.currentTranslate,!i.cssMode){if(i.freeMode){if(h<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(h>-e.maxTranslate()){e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1);return}if(i.freeModeMomentum){if(r.velocities.length>1){var m=r.velocities.pop(),p=r.velocities.pop(),v=m.position-p.position,g=m.time-p.time;e.velocity=v/g,e.velocity/=2,Math.abs(e.velocity)<i.freeModeMinimumVelocity&&(e.velocity=0),(g>150||Z()-m.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeModeMomentumVelocityRatio,r.velocities.length=0;var T=1e3*i.freeModeMomentumRatio,x=e.velocity*T,w=e.translate+x;n&&(w=-w);var b=!1,y,E=Math.abs(e.velocity)*20*i.freeModeMomentumBounceRatio,S;if(w<e.maxTranslate())i.freeModeMomentumBounce?(w+e.maxTranslate()<-E&&(w=e.maxTranslate()-E),y=e.maxTranslate(),b=!0,r.allowMomentumBounce=!0):w=e.maxTranslate(),i.loop&&i.centeredSlides&&(S=!0);else if(w>e.minTranslate())i.freeModeMomentumBounce?(w-e.minTranslate()>E&&(w=e.minTranslate()+E),y=e.minTranslate(),b=!0,r.allowMomentumBounce=!0):w=e.minTranslate(),i.loop&&i.centeredSlides&&(S=!0);else if(i.freeModeSticky){for(var M,C=0;C<l.length;C+=1)if(l[C]>-w){M=C;break}Math.abs(l[M]-w)<Math.abs(l[M-1]-w)||e.swipeDirection==="next"?w=l[M]:w=l[M-1],w=-w}if(S&&e.once("transitionEnd",function(){e.loopFix()}),e.velocity!==0){if(n?T=Math.abs((-w-e.translate)/e.velocity):T=Math.abs((w-e.translate)/e.velocity),i.freeModeSticky){var L=Math.abs((n?-w:w)-e.translate),O=e.slidesSizesGrid[e.activeIndex];L<O?T=i.speed:L<2*O?T=i.speed*1.5:T=i.speed*2.5}}else if(i.freeModeSticky){e.slideToClosest();return}i.freeModeMomentumBounce&&b?(e.updateProgress(y),e.setTransition(T),e.setTranslate(w),e.transitionStart(!0,e.swipeDirection),e.animating=!0,a.transitionEnd(function(){!e||e.destroyed||!r.allowMomentumBounce||(e.emit("momentumBounce"),e.setTransition(i.speed),setTimeout(function(){e.setTranslate(y),a.transitionEnd(function(){!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(e.updateProgress(w),e.setTransition(T),e.setTranslate(w),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,a.transitionEnd(function(){!e||e.destroyed||e.transitionEnd()}))):(e.emit("_freeModeNoMomentumRelease"),e.updateProgress(w)),e.updateActiveIndex(),e.updateSlidesClasses()}else if(i.freeModeSticky){e.slideToClosest();return}else i.freeMode&&e.emit("_freeModeNoMomentumRelease");(!i.freeModeMomentum||f>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses());return}for(var A=0,P=e.slidesSizesGrid[0],R=0;R<o.length;R+=R<i.slidesPerGroupSkip?1:i.slidesPerGroup){var $=R<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof o[R+$]!="undefined"?h>=o[R]&&h<o[R+$]&&(A=R,P=o[R+$]-o[R]):h>=o[R]&&(A=R,P=o[o.length-1]-o[o.length-2])}var q=(h-o[A])/P,X=A<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(f>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(q>=i.longSwipesRatio?e.slideTo(A+X):e.slideTo(A)),e.swipeDirection==="prev"&&(q>1-i.longSwipesRatio?e.slideTo(A+X):e.slideTo(A))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}var ee=e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl);ee?c.target===e.navigation.nextEl?e.slideTo(A+X):e.slideTo(A):(e.swipeDirection==="next"&&e.slideTo(A+X),e.swipeDirection==="prev"&&e.slideTo(A))}}}}function Ie(){var t=this,e=t.params,r=t.el;if(!(r&&r.offsetWidth===0)){e.breakpoints&&t.setBreakpoint();var i=t.allowSlideNext,s=t.allowSlidePrev,n=t.snapGrid;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=s,t.allowSlideNext=i,t.params.watchOverflow&&n!==t.snapGrid&&t.checkOverflow()}}function yr(t){var e=this;!e.enabled||e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function br(){var t=this,e=t.wrapperEl,r=t.rtlTranslate,i=t.enabled;if(!!i){t.previousTranslate=t.translate,t.isHorizontal()?r?t.translate=e.scrollWidth-e.offsetWidth-e.scrollLeft:t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===-0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();var s,n=t.maxTranslate()-t.minTranslate();n===0?s=0:s=(t.translate-t.minTranslate())/n,s!==t.progress&&t.updateProgress(r?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}}var Ks=!1;function Yu(){}function Xu(){var t=this,e=j(),r=t.params,i=t.touchEvents,s=t.el,n=t.wrapperEl,a=t.device,o=t.support;t.onTouchStart=mr.bind(t),t.onTouchMove=vr.bind(t),t.onTouchEnd=gr.bind(t),r.cssMode&&(t.onScroll=br.bind(t)),t.onClick=yr.bind(t);var l=!!r.nested;if(!o.touch&&o.pointerEvents)s.addEventListener(i.start,t.onTouchStart,!1),e.addEventListener(i.move,t.onTouchMove,l),e.addEventListener(i.end,t.onTouchEnd,!1);else{if(o.touch){var u=i.start==="touchstart"&&o.passiveListener&&r.passiveListeners?{passive:!0,capture:!1}:!1;s.addEventListener(i.start,t.onTouchStart,u),s.addEventListener(i.move,t.onTouchMove,o.passiveListener?{passive:!1,capture:l}:l),s.addEventListener(i.end,t.onTouchEnd,u),i.cancel&&s.addEventListener(i.cancel,t.onTouchEnd,u),Ks||(e.addEventListener("touchstart",Yu),Ks=!0)}(r.simulateTouch&&!a.ios&&!a.android||r.simulateTouch&&!o.touch&&a.ios)&&(s.addEventListener("mousedown",t.onTouchStart,!1),e.addEventListener("mousemove",t.onTouchMove,l),e.addEventListener("mouseup",t.onTouchEnd,!1))}(r.preventClicks||r.preventClicksPropagation)&&s.addEventListener("click",t.onClick,!0),r.cssMode&&n.addEventListener("scroll",t.onScroll),r.updateOnWindowResize?t.on(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ie,!0):t.on("observerUpdate",Ie,!0)}function Qu(){var t=this,e=j(),r=t.params,i=t.touchEvents,s=t.el,n=t.wrapperEl,a=t.device,o=t.support,l=!!r.nested;if(!o.touch&&o.pointerEvents)s.removeEventListener(i.start,t.onTouchStart,!1),e.removeEventListener(i.move,t.onTouchMove,l),e.removeEventListener(i.end,t.onTouchEnd,!1);else{if(o.touch){var u=i.start==="onTouchStart"&&o.passiveListener&&r.passiveListeners?{passive:!0,capture:!1}:!1;s.removeEventListener(i.start,t.onTouchStart,u),s.removeEventListener(i.move,t.onTouchMove,l),s.removeEventListener(i.end,t.onTouchEnd,u),i.cancel&&s.removeEventListener(i.cancel,t.onTouchEnd,u)}(r.simulateTouch&&!a.ios&&!a.android||r.simulateTouch&&!o.touch&&a.ios)&&(s.removeEventListener("mousedown",t.onTouchStart,!1),e.removeEventListener("mousemove",t.onTouchMove,l),e.removeEventListener("mouseup",t.onTouchEnd,!1))}(r.preventClicks||r.preventClicksPropagation)&&s.removeEventListener("click",t.onClick,!0),r.cssMode&&n.removeEventListener("scroll",t.onScroll),t.off(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ie)}var en={attachEvents:Xu,detachEvents:Qu};function wr(){var t=this,e=t.activeIndex,r=t.initialized,i=t.loopedSlides,s=i===void 0?0:i,n=t.params,a=t.$el,o=n.breakpoints;if(!(!o||o&&Object.keys(o).length===0)){var l=t.getBreakpoint(o,t.params.breakpointsBase,t.el);if(!(!l||t.currentBreakpoint===l)){var u=l in o?o[l]:void 0;u&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach(function(g){var T=u[g];typeof T!="undefined"&&(g==="slidesPerView"&&(T==="AUTO"||T==="auto")?u[g]="auto":g==="slidesPerView"?u[g]=parseFloat(T):u[g]=parseInt(T,10))});var c=u||t.originalParams,d=n.slidesPerColumn>1,f=c.slidesPerColumn>1,h=n.enabled;d&&!f?(a.removeClass(n.containerModifierClass+"multirow "+n.containerModifierClass+"multirow-column"),t.emitContainerClasses()):!d&&f&&(a.addClass(n.containerModifierClass+"multirow"),(c.slidesPerColumnFill&&c.slidesPerColumnFill==="column"||!c.slidesPerColumnFill&&n.slidesPerColumnFill==="column")&&a.addClass(n.containerModifierClass+"multirow-column"),t.emitContainerClasses());var m=c.direction&&c.direction!==n.direction,p=n.loop&&(c.slidesPerView!==n.slidesPerView||m);m&&r&&t.changeDirection(),N(t.params,c);var v=t.params.enabled;N(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),h&&!v?t.disable():!h&&v&&t.enable(),t.currentBreakpoint=l,t.emit("_beforeBreakpoint",c),p&&r&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-s+t.loopedSlides,0,!1)),t.emit("breakpoint",c)}}}function xr(t,e,r){if(e===void 0&&(e="window"),!(!t||e==="container"&&!r)){var i=!1,s=V(),n=e==="window"?s.innerHeight:r.clientHeight,a=Object.keys(t).map(function(d){if(typeof d=="string"&&d.indexOf("@")===0){var f=parseFloat(d.substr(1)),h=n*f;return{value:h,point:d}}return{value:d,point:d}});a.sort(function(d,f){return parseInt(d.value,10)-parseInt(f.value,10)});for(var o=0;o<a.length;o+=1){var l=a[o],u=l.point,c=l.value;e==="window"?s.matchMedia("(min-width: "+c+"px)").matches&&(i=u):c<=r.clientWidth&&(i=u)}return i||"max"}}var tn={setBreakpoint:wr,getBreakpoint:xr};function Zu(t,e){var r=[];return t.forEach(function(i){typeof i=="object"?Object.keys(i).forEach(function(s){i[s]&&r.push(e+s)}):typeof i=="string"&&r.push(e+i)}),r}function Er(){var t=this,e=t.classNames,r=t.params,i=t.rtl,s=t.$el,n=t.device,a=t.support,o=Zu(["initialized",r.direction,{"pointer-events":a.pointerEvents&&!a.touch},{"free-mode":r.freeMode},{autoheight:r.autoHeight},{rtl:i},{multirow:r.slidesPerColumn>1},{"multirow-column":r.slidesPerColumn>1&&r.slidesPerColumnFill==="column"},{android:n.android},{ios:n.ios},{"css-mode":r.cssMode}],r.containerModifierClass);e.push.apply(e,o),s.addClass([].concat(e).join(" ")),t.emitContainerClasses()}function Tr(){var t=this,e=t.$el,r=t.classNames;e.removeClass(r.join(" ")),t.emitContainerClasses()}var rn={addClasses:Er,removeClasses:Tr};function Sr(t,e,r,i,s,n){var a=V(),o;function l(){n&&n()}var u=z(t).parent("picture")[0];!u&&(!t.complete||!s)&&e?(o=new a.Image,o.onload=l,o.onerror=l,i&&(o.sizes=i),r&&(o.srcset=r),e&&(o.src=e)):l()}function Cr(){var t=this;t.imagesToLoad=t.$el.find("img");function e(){typeof t=="undefined"||t===null||!t||t.destroyed||(t.imagesLoaded!==void 0&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}for(var r=0;r<t.imagesToLoad.length;r+=1){var i=t.imagesToLoad[r];t.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,e)}}var sn={loadImage:Sr,preloadImages:Cr};function Ju(){var t=this,e=t.params,r=t.isLocked,i=t.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(t.slides.length-1)+t.slides[0].offsetWidth*t.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&i?t.isLocked=i<=t.size:t.isLocked=t.snapGrid.length===1,t.allowSlideNext=!t.isLocked,t.allowSlidePrev=!t.isLocked,r!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock"),r&&r!==t.isLocked&&(t.isEnd=!1,t.navigation&&t.navigation.update())}var nn={checkOverflow:Ju};var Mr={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function an(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ku(t,e,r){return e&&an(t.prototype,e),r&&an(t,r),t}var Ar={modular:Gs,eventsEmitter:Us,update:Hs,translate:Ws,transition:Ys,slide:Xs,loop:Qs,grabCursor:Zs,manipulation:Js,events:en,breakpoints:tn,checkOverflow:nn,classes:rn,images:sn},Pr={},Ir=function(){function t(){for(var r,i,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];if(n.length===1&&n[0].constructor&&Object.prototype.toString.call(n[0]).slice(8,-1)==="Object"?i=n[0]:(r=n[0],i=n[1]),i||(i={}),i=N({},i),r&&!i.el&&(i.el=r),i.el&&z(i.el).length>1){var o=[];return z(i.el).each(function(c){var d=N({},i,{el:c});o.push(new t(d))}),o}var l=this;l.__swiper__=!0,l.support=Ue(),l.device=Vs({userAgent:i.userAgent}),l.browser=Bs(),l.eventsListeners={},l.eventsAnyListeners=[],typeof l.modules=="undefined"&&(l.modules={}),Object.keys(l.modules).forEach(function(c){var d=l.modules[c];if(d.params){var f=Object.keys(d.params)[0],h=d.params[f];if(typeof h!="object"||h===null||(["navigation","pagination","scrollbar"].indexOf(f)>=0&&i[f]===!0&&(i[f]={auto:!0}),!(f in i&&"enabled"in h)))return;i[f]===!0&&(i[f]={enabled:!0}),typeof i[f]=="object"&&!("enabled"in i[f])&&(i[f].enabled=!0),i[f]||(i[f]={enabled:!1})}});var u=N({},Mr);return l.useParams(u),l.params=N({},u,Pr,i),l.originalParams=N({},l.params),l.passedParams=N({},i),l.params&&l.params.on&&Object.keys(l.params.on).forEach(function(c){l.on(c,l.params.on[c])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),l.$=z,N(l,{enabled:l.params.enabled,el:r,classNames:[],slides:z(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return l.params.direction==="horizontal"},isVertical:function(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:function(){var d=["touchstart","touchmove","touchend","touchcancel"],f=["mousedown","mousemove","mouseup"];return l.support.pointerEvents&&(f=["pointerdown","pointermove","pointerup"]),l.touchEventsTouch={start:d[0],move:d[1],end:d[2],cancel:d[3]},l.touchEventsDesktop={start:f[0],move:f[1],end:f[2]},l.support.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:Z(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.useModules(),l.emit("_swiper"),l.params.init&&l.init(),l}var e=t.prototype;return e.enable=function(){var i=this;i.enabled||(i.enabled=!0,i.params.grabCursor&&i.setGrabCursor(),i.emit("enable"))},e.disable=function(){var i=this;!i.enabled||(i.enabled=!1,i.params.grabCursor&&i.unsetGrabCursor(),i.emit("disable"))},e.setProgress=function(i,s){var n=this;i=Math.min(Math.max(i,0),1);var a=n.minTranslate(),o=n.maxTranslate(),l=(o-a)*i+a;n.translateTo(l,typeof s=="undefined"?0:s),n.updateActiveIndex(),n.updateSlidesClasses()},e.emitContainerClasses=function(){var i=this;if(!(!i.params._emitClasses||!i.el)){var s=i.el.className.split(" ").filter(function(n){return n.indexOf("swiper-container")===0||n.indexOf(i.params.containerModifierClass)===0});i.emit("_containerClasses",s.join(" "))}},e.getSlideClasses=function(i){var s=this;return i.className.split(" ").filter(function(n){return n.indexOf("swiper-slide")===0||n.indexOf(s.params.slideClass)===0}).join(" ")},e.emitSlidesClasses=function(){var i=this;if(!(!i.params._emitClasses||!i.el)){var s=[];i.slides.each(function(n){var a=i.getSlideClasses(n);s.push({slideEl:n,classNames:a}),i.emit("_slideClass",n,a)}),i.emit("_slideClasses",s)}},e.slidesPerViewDynamic=function(){var i=this,s=i.params,n=i.slides,a=i.slidesGrid,o=i.size,l=i.activeIndex,u=1;if(s.centeredSlides){for(var c=n[l].swiperSlideSize,d,f=l+1;f<n.length;f+=1)n[f]&&!d&&(c+=n[f].swiperSlideSize,u+=1,c>o&&(d=!0));for(var h=l-1;h>=0;h-=1)n[h]&&!d&&(c+=n[h].swiperSlideSize,u+=1,c>o&&(d=!0))}else for(var m=l+1;m<n.length;m+=1)a[m]-a[l]<o&&(u+=1);return u},e.update=function(){var i=this;if(!i||i.destroyed)return;var s=i.snapGrid,n=i.params;n.breakpoints&&i.setBreakpoint(),i.updateSize(),i.updateSlides(),i.updateProgress(),i.updateSlidesClasses();function a(){var l=i.rtlTranslate?i.translate*-1:i.translate,u=Math.min(Math.max(l,i.maxTranslate()),i.minTranslate());i.setTranslate(u),i.updateActiveIndex(),i.updateSlidesClasses()}var o;i.params.freeMode?(a(),i.params.autoHeight&&i.updateAutoHeight()):((i.params.slidesPerView==="auto"||i.params.slidesPerView>1)&&i.isEnd&&!i.params.centeredSlides?o=i.slideTo(i.slides.length-1,0,!1,!0):o=i.slideTo(i.activeIndex,0,!1,!0),o||a()),n.watchOverflow&&s!==i.snapGrid&&i.checkOverflow(),i.emit("update")},e.changeDirection=function(i,s){s===void 0&&(s=!0);var n=this,a=n.params.direction;return i||(i=a==="horizontal"?"vertical":"horizontal"),i===a||i!=="horizontal"&&i!=="vertical"||(n.$el.removeClass(""+n.params.containerModifierClass+a).addClass(""+n.params.containerModifierClass+i),n.emitContainerClasses(),n.params.direction=i,n.slides.each(function(o){i==="vertical"?o.style.width="":o.style.height=""}),n.emit("changeDirection"),s&&n.update()),n},e.mount=function(i){var s=this;if(s.mounted)return!0;var n=z(i||s.params.el);if(i=n[0],!i)return!1;i.swiper=s;var a=function(){return"."+(s.params.wrapperClass||"").trim().split(" ").join(".")},o=function(){if(i&&i.shadowRoot&&i.shadowRoot.querySelector){var f=z(i.shadowRoot.querySelector(a()));return f.children=function(h){return n.children(h)},f}return n.children(a())},l=o();if(l.length===0&&s.params.createElements){var u=j(),c=u.createElement("div");l=z(c),c.className=s.params.wrapperClass,n.append(c),n.children("."+s.params.slideClass).each(function(d){l.append(d)})}return N(s,{$el:n,el:i,$wrapperEl:l,wrapperEl:l[0],mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl",rtlTranslate:s.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl"),wrongRTL:l.css("display")==="-webkit-box"}),!0},e.init=function(i){var s=this;if(s.initialized)return s;var n=s.mount(i);return n===!1||(s.emit("beforeInit"),s.params.breakpoints&&s.setBreakpoint(),s.addClasses(),s.params.loop&&s.loopCreate(),s.updateSize(),s.updateSlides(),s.params.watchOverflow&&s.checkOverflow(),s.params.grabCursor&&s.enabled&&s.setGrabCursor(),s.params.preloadImages&&s.preloadImages(),s.params.loop?s.slideTo(s.params.initialSlide+s.loopedSlides,0,s.params.runCallbacksOnInit,!1,!0):s.slideTo(s.params.initialSlide,0,s.params.runCallbacksOnInit,!1,!0),s.attachEvents(),s.initialized=!0,s.emit("init"),s.emit("afterInit")),s},e.destroy=function(i,s){i===void 0&&(i=!0),s===void 0&&(s=!0);var n=this,a=n.params,o=n.$el,l=n.$wrapperEl,u=n.slides;return typeof n.params=="undefined"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),a.loop&&n.loopDestroy(),s&&(n.removeClasses(),o.removeAttr("style"),l.removeAttr("style"),u&&u.length&&u.removeClass([a.slideVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(function(c){n.off(c)}),i!==!1&&(n.$el[0].swiper=null,zs(n)),n.destroyed=!0),null},t.extendDefaults=function(i){N(Pr,i)},t.installModule=function(i){t.prototype.modules||(t.prototype.modules={});var s=i.name||Object.keys(t.prototype.modules).length+"_"+Z();t.prototype.modules[s]=i},t.use=function(i){return Array.isArray(i)?(i.forEach(function(s){return t.installModule(s)}),t):(t.installModule(i),t)},Ku(t,null,[{key:"extendedDefaults",get:function(){return Pr}},{key:"defaults",get:function(){return Mr}}]),t}();Object.keys(Ar).forEach(function(t){Object.keys(Ar[t]).forEach(function(e){Ir.prototype[e]=Ar[t][e]})});Ir.use([qs,js]);var re=Ir;function Lr(){return Lr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Lr.apply(this,arguments)}var ec={update:function(){var e=this,r=e.rtl,i=e.params.pagination;if(!(!i.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0)){var s=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,n=e.pagination.$el,a,o=e.params.loop?Math.ceil((s-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(a=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),a>s-1-e.loopedSlides*2&&(a-=s-e.loopedSlides*2),a>o-1&&(a-=o),a<0&&e.params.paginationType!=="bullets"&&(a=o+a)):typeof e.snapIndex!="undefined"?a=e.snapIndex:a=e.activeIndex||0,i.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){var l=e.pagination.bullets,u,c,d;if(i.dynamicBullets&&(e.pagination.bulletSize=l.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),n.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(i.dynamicMainBullets+4)+"px"),i.dynamicMainBullets>1&&e.previousIndex!==void 0&&(e.pagination.dynamicBulletIndex+=a-e.previousIndex,e.pagination.dynamicBulletIndex>i.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=i.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),u=a-e.pagination.dynamicBulletIndex,c=u+(Math.min(l.length,i.dynamicMainBullets)-1),d=(c+u)/2),l.removeClass(i.bulletActiveClass+" "+i.bulletActiveClass+"-next "+i.bulletActiveClass+"-next-next "+i.bulletActiveClass+"-prev "+i.bulletActiveClass+"-prev-prev "+i.bulletActiveClass+"-main"),n.length>1)l.each(function(M){var C=z(M),L=C.index();L===a&&C.addClass(i.bulletActiveClass),i.dynamicBullets&&(L>=u&&L<=c&&C.addClass(i.bulletActiveClass+"-main"),L===u&&C.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),L===c&&C.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next"))});else{var f=l.eq(a),h=f.index();if(f.addClass(i.bulletActiveClass),i.dynamicBullets){for(var m=l.eq(u),p=l.eq(c),v=u;v<=c;v+=1)l.eq(v).addClass(i.bulletActiveClass+"-main");if(e.params.loop)if(h>=l.length-i.dynamicMainBullets){for(var g=i.dynamicMainBullets;g>=0;g-=1)l.eq(l.length-g).addClass(i.bulletActiveClass+"-main");l.eq(l.length-i.dynamicMainBullets-1).addClass(i.bulletActiveClass+"-prev")}else m.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),p.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next");else m.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),p.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")}}if(i.dynamicBullets){var T=Math.min(l.length,i.dynamicMainBullets+4),x=(e.pagination.bulletSize*T-e.pagination.bulletSize)/2-d*e.pagination.bulletSize,w=r?"right":"left";l.css(e.isHorizontal()?w:"top",x+"px")}}if(i.type==="fraction"&&(n.find(fe(i.currentClass)).text(i.formatFractionCurrent(a+1)),n.find(fe(i.totalClass)).text(i.formatFractionTotal(o))),i.type==="progressbar"){var b;i.progressbarOpposite?b=e.isHorizontal()?"vertical":"horizontal":b=e.isHorizontal()?"horizontal":"vertical";var y=(a+1)/o,E=1,S=1;b==="horizontal"?E=y:S=y,n.find(fe(i.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+E+") scaleY("+S+")").transition(e.params.speed)}i.type==="custom"&&i.renderCustom?(n.html(i.renderCustom(e,a+1,o)),e.emit("paginationRender",n[0])):e.emit("paginationUpdate",n[0]),e.params.watchOverflow&&e.enabled&&n[e.isLocked?"addClass":"removeClass"](i.lockClass)}},render:function(){var e=this,r=e.params.pagination;if(!(!r.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0)){var i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,s=e.pagination.$el,n="";if(r.type==="bullets"){var a=e.params.loop?Math.ceil((i-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&a>i&&(a=i);for(var o=0;o<a;o+=1)r.renderBullet?n+=r.renderBullet.call(e,o,r.bulletClass):n+="<"+r.bulletElement+' class="'+r.bulletClass+'"></'+r.bulletElement+">";s.html(n),e.pagination.bullets=s.find(fe(r.bulletClass))}r.type==="fraction"&&(r.renderFraction?n=r.renderFraction.call(e,r.currentClass,r.totalClass):n='<span class="'+r.currentClass+'"></span> / '+('<span class="'+r.totalClass+'"></span>'),s.html(n)),r.type==="progressbar"&&(r.renderProgressbar?n=r.renderProgressbar.call(e,r.progressbarFillClass):n='<span class="'+r.progressbarFillClass+'"></span>',s.html(n)),r.type!=="custom"&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=$s(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var r=e.params.pagination;if(!!r.el){var i=z(r.el);i.length!==0&&(e.params.uniqueNavElements&&typeof r.el=="string"&&i.length>1&&(i=e.$el.find(r.el)),r.type==="bullets"&&r.clickable&&i.addClass(r.clickableClass),i.addClass(r.modifierClass+r.type),r.type==="bullets"&&r.dynamicBullets&&(i.addClass(""+r.modifierClass+r.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,r.dynamicMainBullets<1&&(r.dynamicMainBullets=1)),r.type==="progressbar"&&r.progressbarOpposite&&i.addClass(r.progressbarOppositeClass),r.clickable&&i.on("click",fe(r.bulletClass),function(n){n.preventDefault();var a=z(this).index()*e.params.slidesPerGroup;e.params.loop&&(a+=e.loopedSlides),e.slideTo(a)}),N(e.pagination,{$el:i,el:i[0]}),e.enabled||i.addClass(r.lockClass))}},destroy:function(){var e=this,r=e.params.pagination;if(!(!r.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0)){var i=e.pagination.$el;i.removeClass(r.hiddenClass),i.removeClass(r.modifierClass+r.type),e.pagination.bullets&&e.pagination.bullets.removeClass(r.bulletActiveClass),r.clickable&&i.off("click",fe(r.bulletClass))}}},He={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var e=this;Ge(e,{pagination:Lr({dynamicBulletIndex:0},ec)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||typeof e.snapIndex=="undefined")&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var r=e.pagination.$el;r&&r[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,r){var i=r.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!z(i).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;var s=e.pagination.$el.hasClass(e.params.pagination.hiddenClass);s===!0?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}};var tc=300,rc={data:{isGalleryLoading:!0,galleryImages:[],galleryPreviews:[]},computed:{},watch:{},created(){if(!this.moduleInstance)return console.log("[beforeCreate] - Please store module instance 'this' into 'this.moduleInstance'");let t=this.moduleInstance.productTitle,e=this.moduleInstance.productVariants,r=this.moduleInstance.productCurrentVariantId,i=this.moduleInstance.productImages;this.loadedImages=[],this.isFirstLoading=!0,this.setProductImagesData(i),this.allProductVariants=this.setProductVariantsData(e,t,i),this.currentProductVariant=this.allProductVariants.find(s=>s.id===r),this.updateGallery()},beforeDestroy(){this.loadingTimeout&&clearTimeout(this.loadingTimeout)},methods:{setProductImagesData(t){let e=window.location.protocol,r=0;for(;r<t.length;){let i=t[r];i.id=de(i.rawId.trim()),i.preview=e+i.preview,i.image=e+i.image,r++}},setProductVariantsData(t,e,r){let i=[],s=0,n=[];for(;s<t.length;){let{id:c}=t[s],d={id:c,optionsImagesIds:[],images:[]},f=t[s].options.map((p,v)=>de(p.trim())),m=Wi(f).map((p,v)=>de(p.join("-").trim()));d.optionsImagesIds=[...f,...m],d.images=r.filter(p=>d.optionsImagesIds.indexOf(p.id)!=-1),d.images.length&&(n=[...n,...d.images]),i.push(d),s++}let a=[...new Set(n)],o=r.filter(this.compareImagesArr(a)),l=a.filter(this.compareImagesArr(r)),u=o.concat(l);return u.length&&i.forEach(c=>{c.images=[...c.images,...u]}),i},updateGallery(){return k(this,null,function*(){let t=this.currentProductVariant.images;this.loadingTimeout&&clearTimeout(this.loadingTimeout);let e=[],r=[],i=0;for(;i<t.length;){let l=t[i];r.push(l.preview),e.push(l.image),i++}let s=this.loadedImages.map(l=>l.id),n=e.filter(l=>s.indexOf(l)===-1),a=r.filter(l=>s.indexOf(l)===-1);[...n,...a].length&&(this.isGalleryLoading=!0),n.length&&(yield this.loadImages(n)),a.length&&(yield this.loadImages(a)),this.loadingTimeout=setTimeout(()=>{var l;this.galleryImages=[],this.galleryPreviews=[],t.forEach(u=>{let c=this.loadedImages.find(f=>f.id===u.image),d=this.loadedImages.find(f=>f.id===u.preview);this.galleryImages.push(c),this.galleryPreviews.push(d)}),(l=this.onUpdateGallery)==null||l.call(this),this.isFirstLoading=!1,this.isGalleryLoading=!1},tc)})},loadImages(t){return k(this,null,function*(){let e=[],r=0;for(;r<t.length;){let n=t[r];e.push(Ce(n)),r++}let i=yield Promise.all(e),s=0;for(;s<i.length;){let n=i[s];this.loadedImages.push({id:n.url,imageObj:n}),s++}})},onProductVariantChange(t){if(this.isFirstLoading){this.oldVariantId=t;return}!t||this.oldVariantId!==t&&(this.currentProductVariant=this.allProductVariants.find(e=>e.id===t),this.updateGallery(),this.oldVariantId=t)},compareImagesArr(t){return function(e){return t.filter(function(r){return r.id==e.id}).length==0}}}},on=rc;var ln=class extends I{constructor(t){super(t)}init(){this.productTitle=this.getData("title"),this.productVariants=JSON.parse(document.getElementById("productGalleryVariants").innerHTML),this.productCurrentVariantId=JSON.parse(this.getData("current-variant-id")),this.productImages=JSON.parse(this.getData("images")),this.initVue()}initVue(){let t=this;Vue.config.devtools=!0,this.app=new Vue({el:this.el,delimiters:["${","}"],mixins:[on],data:{activeSwiperIndex:0},beforeCreate(){this.moduleInstance=t},mounted(){this.initSwiper(),this.$nextTick(()=>{_.classList.add("is-gallery-ready")})},beforeDestroy(){var e,r;this.unbindSwiperEvents(),(e=this.swiperInstance)==null||e.destroy(),(r=this.swiperThumbsInstance)==null||r.destroy()},methods:{initSwiper(){!this.$refs.carousel&&!this.$refs.carouselPagination||(this.swiperInstance=new re(this.$refs.carousel,{slidesPerView:1}),this.swiperThumbsInstance=new re(this.$refs.carouselThumbs,{slidesPerView:3,spaceBetween:10,direction:"vertical"}),this.bindSwiperEvents())},onUpdateGallery(){this.$nextTick(()=>{var e,r,i,s;(e=this.swiperInstance)==null||e.update(),(r=this.swiperThumbsInstance)==null||r.update(),(i=this.swiperInstance)==null||i.slideTo(0,0),(s=this.swiperThumbsInstance)==null||s.slideTo(0,0)})},slideTo(e){var r;(r=this.swiperInstance)==null||r.slideTo(e)},bindSwiperEvents(){var e;this.onSlideChange=this.onSlideChange.bind(this),(e=this.swiperInstance)==null||e.on("slideChange",this.onSlideChange)},unbindSwiperEvents(){var e;(e=this.swiperInstance)==null||e.off("slideChange",this.onSlideChange)},onSlideChange(e){var r;this.activeSwiperIndex=e.activeIndex,(r=this.swiperThumbsInstance)==null||r.slideTo(e.activeIndex)}}})}onProductVariantChange(t){var e,r;(r=(e=this.app)==null?void 0:e.onProductVariantChange)==null||r.call(e,t)}destroy(){super.destroy(),this.app&&this.app.$destroy()}},un=ln;var cn=[],Or=class{constructor(e){this.apikey=e.apikey,this.storeUrl=e.storeUrl}getProductRatings(e){return new Promise(r=>{let i=JSON.stringify({productIds:[{productId:e}],apiKey:this.apikey,storeUrl:this.storeUrl}),s=new Headers;s.append("Content-Type","application/json"),fetch("http://stamped.io/api/widget/badges?isIncludeBreakdown=true&isincludehtml=false",{method:"POST",headers:s,body:i,redirect:"follow"}).then(o=>o.text()).then(o=>{let l={isError:!1,result:JSON.parse(o)};r(l)}).catch(o=>r({isError:!0,error:o}))})}getProductReviews(e,r={}){return new Promise(i=>{let s=r.page||this.activePage,n=r.take||10,a=r.sort||"featured",o=this.storeUrl,l=this.apikey,u=`https://stamped.io/api/widget/reviews?productId=${e}&take=${n}&page=${s}&minRating=1&sortReviews=${a}&storeUrl=${o}&apiKey=${l}`,c=cn.find(f=>f.id===u);if(c){console.log("Get from cache"),i(c.resultObj);return}fetch(u,{method:"GET",redirect:"follow"}).then(f=>f.text()).then(f=>{let h={isError:!1,result:JSON.parse(f)};cn.push({id:u,resultObj:h}),i(h)}).catch(f=>i({isError:!0,error:f}))})}};var ic=4,sc=5,dn=class extends I{constructor(t){super(t)}init(){return k(this,null,function*(){this.productId=this.getData("id"),this.apikey=this.getData("api-key"),this.storeUrl=this.getData("store-url"),this.initVue()})}initVue(){let t=this;Vue.config.devtools=!0,this.app=new Vue({el:this.el,delimiters:["${","}"],data:{sortedBy:"featured",sortOptions:[{value:"featured",label:"Featured"},{value:"highest-rating",label:"Highest Rating"},{value:"lowest-rating",label:"Lowest Rating"},{value:"photos",label:"Photos"},{value:"most-votes",label:"Most Votes"}],reviews:[],reviewCurrentPageIndex:0,reviewTotal:0,isLoadingReviews:!1,isLoadingSummary:!1,metrics:{}},computed:{reviewPagination(){return this.buildPagination(this.reviewCurrentPageIndex,this.reviewTotal,this.reviewPerPage,sc)},reviewPaginationLength(){return Math.ceil(this.reviewTotal/this.reviewPerPage)}},watch:{sortedBy:function(e,r){e!==r&&this.fetchProductReviews(1,!0)}},beforeCreate(){return k(this,null,function*(){this.moduleInstance=t,this.reviewPerPage=ic})},created(){this.stampedInstance=new Or({storeUrl:this.moduleInstance.storeUrl,apikey:this.moduleInstance.apikey}),this.defaultMetrics={countReviews:0,rating:0,breakdown:["0","0","0","0","0"],breakdownPercents:[-100,-100,-100,-100,-100]},this.metrics=K(K({},this.metrics),this.defaultMetrics),this.fetchProductMetrics()},methods:{fetchProductReviews(e=1,r=!1){return k(this,null,function*(){if(!r&&e===this.reviewCurrentPageIndex)return;this.isLoadingReviews=!0;let i=yield this.stampedInstance.getProductReviews(this.moduleInstance.productId,{page:e,take:this.reviewPerPage,sort:this.sortedBy});if(i.isError)return this.isLoadingReviews=!1,console.log("error",i.error);this.reviewCurrentPageIndex=e,this.reviews=[],this.formatReviewData(i.result)})},fetchProductMetrics(){return k(this,null,function*(){this.isLoadingSummary=!0;let e=yield this.stampedInstance.getProductRatings(this.moduleInstance.productId);if(e.isError){console.log("error",e.error);return}this.formatMetricsData(e.result)})},formatReviewData(e){var n;if(!((n=e==null?void 0:e.data)==null?void 0:n.length)){this.isLoadingReviews=!1;return}let{total:r,data:i,translations:s}=e;this.reviewTotal=r,i.forEach(a=>{let{author:o,avatar:l,reviewDate:u,reviewTitle:c,reviewMessage:d,reviewVerifiedType:f,reviewRating:h}=a,m="";f===2&&(m=s.label_verified_buyer),this.reviews.push({author:o,avatar:l,status:m,reviewDate:u,reviewTitle:c,reviewMessage:d,reviewRating:h})}),this.$nextTick(()=>{this.isLoadingReviews=!1})},formatMetricsData(e){if(!e.length){this.isLoadingSummary=!1;return}let{count:r,rating:i,breakdown:s}=e[0];this.reviewTotal=r;let n={countReviews:r,rating:Math.round(i*10)/10,breakdown:s?Object.values(s).reverse():[],breakdownPercents:[]};n.breakdown.length&&n.breakdown.forEach(a=>{n.breakdownPercents.push(-100+a/this.reviewTotal*100)}),this.metrics=K(K({},this.metrics),n),this.$nextTick(()=>{var a,o;this.isLoadingSummary=!1,(o=(a=this.moduleInstance)==null?void 0:a.setProductFormRating)==null||o.call(a,this.metrics.rating)})},buildPagination(e,r,i,s){let n=[],a=Math.ceil(r/i);if(a<=s)for(let o=1;o<a+1;o++)n.push({index:o,label:o.toString()});else if(e>a-s+1)for(let o=a-s+1;o<a+1;o++)n.push({index:o,label:o.toString()});else if(e===1){for(let o=e;o<e+s-1;o++)n.push({index:o,label:o===e+s-2?"...":o.toString()});n.push({index:a,label:a.toString()})}else{for(let o=e-1;o<e+s-2;o++)n.push({index:o,label:o===e+s-3?"...":o.toString()});n.push({index:a,label:a.toString()})}return n}}})}fetchData(){var t,e;(e=(t=this==null?void 0:this.app)==null?void 0:t.fetchProductReviews)==null||e.call(t)}setProductFormRating(t){this.call("setProductRating",t,"ProductForm")}destroy(){super.destroy(),this.app&&this.app.$destroy()}},fn=dn;function Fr(){return JSON.parse(JSON.stringify({credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json;"}}))}function Rr(t,e){return fetch(t,e).then(function(r){if(!r.ok)throw r;return r.json()})}function kr(){return Rr("/cart.js",Fr())}function hn(t,e,r){var i=Fr();return i.method="POST",i.body=JSON.stringify({id:t,quantity:e,properties:r}),Rr("/cart/add.js",i)}function Dr(t,e){var r=Fr();return e=e||{},r.method="POST",r.body=JSON.stringify({line:t,quantity:e.quantity,properties:e.properties}),Rr("/cart/change.js",r)}function We(t){if(typeof t!="string"||t.split(":").length!==2)throw new TypeError("Theme Cart: Provided key value is not a string with the format xxx:xxx")}function nc(t){if(typeof t!="number"||isNaN(t))throw new TypeError("Theme Cart: An object which specifies a quantity or properties value is required")}function pn(t){if(typeof t!="number"||isNaN(t))throw new TypeError("Theme Cart: Variant ID must be a number")}function ac(t){if(typeof t!="object")throw new TypeError("Theme Cart: Properties must be an object")}function mn(t){if(typeof t!="object")throw new TypeError("Theme Cart: Options must be an object");if(typeof t.quantity=="undefined"&&typeof t.properties=="undefined")throw new Error("Theme Cart: You muse define a value for quantity or properties");typeof t.quantity!="undefined"&&nc(t.quantity),typeof t.properties!="undefined"&&ac(t.properties)}function vn(){return kr()}function gn(t){return We(t),kr().then(function(e){var r=-1;return e.items.forEach(function(i,s){r=i.key===t?s+1:r}),r===-1?Promise.reject(new Error("Theme Cart: Unable to match line item with provided key")):r})}function yn(t,e){return e=e||{},pn(t),hn(t,e.quantity,e.properties)}function bn(t,e){return We(t),mn(e),gn(t).then(function(r){return Dr(r,e)})}function wn(t){return We(t),gn(t).then(function(e){return Dr(e,{quantity:0})})}var xn=class extends I{constructor(t){super(t)}init(){return new Promise(t=>k(this,null,function*(){this.cartInitialState=yield this.getState(),t()}))}getState(){return vn()}addItem(r){return k(this,arguments,function*({id:t,quantity:e=1}){var s,n;try{yield yn(t,{quantity:e})}catch(a){if(a.status===422)return(s=this.onCannotAddMoreItem)==null||s.call(this,t),alert("Sorry you can't add more item"),!1}let i=yield this.refresh();return i.latestItemAddedId=t,(n=this.onAddItem)==null||n.call(this,i),i})}removeItem(t){return k(this,null,function*(){var r;let e=yield wn(t);return(r=this.onRemoveItem)==null||r.call(this,e),e})}updateItem(r){return k(this,arguments,function*({key:t,quantity:e=1}){var s;let i=yield bn(t,{quantity:e});return(s=this.onUpdateItem)==null||s.call(this,i),i})}refresh(){return k(this,null,function*(){var e;let t=yield this.getState();return(e=this.onRefreshCart)==null||e.call(this,t),t})}destroy(){super.destroy()}},Ye=xn;var En=85*2,Tn=85*2,oc={data:{cartItems:[],cartTotal:{},isCartLoading:!1,isCheckoutLoading:!1},computed:{cartCounter(){let t=0;return this.cartItems.forEach(e=>{t+=e.quantity}),t}},watch:{},created(){if(!this.moduleInstance)return console.log("[beforeCreate] - Please store module instance 'this' into 'this.moduleInstance'");let t=this.moduleInstance.cartInitialState;this.setCartData(t,!0)},mounted(){var t;(t=this==null?void 0:this.bindEvents)==null||t.call(this)},beforeDestroy(){var t;(t=this==null?void 0:this.unbindEvents)==null||t.call(this)},methods:{setCartData(t,e){var a,o;let r=t.items;this.updateCartItems(r);let{original_total_price:i,total_price:s,total_discount:n}=t;this.cartTotal={originalTotal:te(i),total:te(s),discount:te(n)},e||(o=(a=this.moduleInstance)==null?void 0:a.setCartData)==null||o.call(a,t)},updateCartItems(t){this.cartItems=t.map(e=>{let r=null;return e.image&&(r=En&&Tn?this.getResizedImageUrl(e.image):e.image),{key:e.key,id:e.id,title:e.product_title,category:e.product_type,image:r,price:te(e.final_line_price),originalPrice:te(e.original_line_price),quantity:e.quantity,options:e.options_with_values,url:e.url}})},onAddNewItem(t){t.latestItemAddedId&&(this.latestItemAddedId=t.latestItemAddedId);let e=this.reorderCart(t);this.setCartData(e)},onAddItem(t){return k(this,null,function*(){let e=this.cartItems.find(n=>n.key===t),r=e.quantity+1;this.$set(e,"isLoading",!0),this.isCartLoading=!0;let i=yield this.moduleInstance.updateItem({key:t,quantity:r});this.$set(e,"isLoading",!1),this.isCartLoading=!1;let s=this.reorderCart(i);this.setCartData(s)})},onRemoveItem(t){return k(this,null,function*(){let e=this.cartItems.find(n=>n.key===t),r=e.quantity-1;this.$set(e,"isLoading",!0),this.isCartLoading=!0;let i=yield this.moduleInstance.updateItem({key:t,quantity:r});this.$set(e,"isLoading",!1),this.isCartLoading=!1;let s=this.reorderCart(i);this.setCartData(s)})},onDeleteItem(t){return k(this,null,function*(){this.isCartLoading=!0;let e=yield this.moduleInstance.removeItem(t);this.isCartLoading=!1,this.setCartData(e)})},reorderCart(t){if(!this.latestItemAddedId)return t;let e=t.items.map(r=>r.id).indexOf(this.latestItemAddedId);if(e>-1){let r=t.items.splice(e,1)[0];t.items.unshift(r)}else return t;return t},onOpen(){},onClose(){var t,e;(e=(t=this.moduleInstance)==null?void 0:t.onCloseModal)==null||e.call(t)},onCheckout(){this.isCheckoutLoading=!0},getResizedImageUrl(t){let e=t.split("."),r=`_${En}x${Tn}_crop_center.${e.pop()}`;return e.join(".")+r}}},Xe=oc;var Gr=Se(at());function jr(t,e,r){return t<e?e:t>r?r:t}function Un(t,e,r,i,s){return(t-e)*(s-i)/(r-e)+i}function Hn(){let t=" -webkit- -moz- -o- -ms- ".split(" "),e=function(i){return window.matchMedia(i).matches};if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;let r=["(",t.join("touch-enabled),("),"heartz",")"].join("");return e(r)}var Dc={created(){this.isTouchable=Hn(),this.dragState={isSwipeRafPlaying:!1,isDragAvailable:!1,isDragging:!1,isExpanded:!1,isOpen:!1,isClose:!0},this.drag={oldY:0,y:0,startY:0,smoothY:0,threshold:100},this.dragStep={openY:0,closeY:0}},mounted(){this.bindEvents(),this.isTouchable&&window.isMobile&&_.classList.add("has-swipe-cart-available")},beforeDestroy(){this.stopSwipeRaf(),this.unbindEvents()},methods:{bindEvents(){this.onResize=this.onResize.bind(this),window.addEventListener("resize",this.onResize)},unbindEvents(){window.removeEventListener("resize",this.onResize)},openSwipeCart(){!this.isTouchable||!window.isMobile||this.dragState.isOpen||!this.dragState.isClose||(this.computeDragMetrics(),this.$nextTick(()=>{this.playSwipeRaf(),this.expandSwipeCart(),this.dragState.isDragAvailable=!0,this.dragState.isOpen=!0,this.$refs.cartContent.scrollTop=0,requestAnimationFrame(()=>{var t,e;_.classList.add("has-swipe-cart-open"),(e=(t=this.moduleInstance)==null?void 0:t.onOpenSwipeModal)==null||e.call(t)})}))},expandSwipeCart(){!this.isTouchable||!window.isMobile||(this.dragState.isExpanded=!0,this.drag.y=this.dragStep.openY)},closeSwipeCart(){if(!this.dragState.isOpen||this.dragState.isClose)return;let e=this.$refs.cartInner.offsetHeight;this.dragStep.closeY=e,this.dragStep.openY=0,this.dragState.isDragAvailable=!1,this.dragState.isDragging=!1,this.dragState.isExpanded=!1,this.dragState.isOpen=!1,this.drag.y=this.dragStep.closeY},onCloseAnimationEnded(){var t,e;_.classList.remove("has-cart-open"),_.classList.remove("has-swipe-cart-open"),(e=(t=this.moduleInstance)==null?void 0:t.onCloseSwipeModal)==null||e.call(t)},onResize(){this.computeDragMetrics(!0)},onDragStart(t){!this.dragState.isDragAvailable||!this.dragState.isOpen||this.dragState.isClose||(this.dragState.isDragging=!0,this.pointerEvent=t.type!=="mousedown"?t.touches[0]||t.changedTouches[0]:t,this.drag.oldY=this.drag.y,this.drag.startY=this.pointerEvent.clientY,this.startTime=new Date().getTime())},onDrag(t){!this.dragState.isDragging||(this.pointerEvent=t.type!=="mousemove"?t.touches[0]||t.changedTouches[0]:t,this.drag.y=this.drag.oldY+(this.pointerEvent.clientY-this.drag.startY),this.drag.y=jr(this.drag.y,this.dragStep.openY,this.dragStep.closeY))},onDragEnd(t){!this.dragState.isDragging||(this.dragState.isDragging=!1,this.dragDistY=this.pointerEvent.clientY-this.drag.startY,!this.dragState.isExpanded&&this.dragDistY>this.drag.threshold?this.closeSwipeCart():this.dragState.isExpanded&&this.dragDistY>this.drag.threshold?this.closeSwipeCart():this.dragState.isExpanded&&this.dragDistY<this.drag.threshold?this.expandSwipeCart():!this.dragState.isExpanded&&this.dragDistY<this.drag.threshold&&this.expandSwipeCart())},computeDragMetrics(t=!1){let r=this.$refs.cartInner.offsetHeight;this.dragStep.closeY=r,this.dragStep.openY=0,t?this.dragState.isExpanded&&(this.drag.y=0):(this.$refs.cartInner.style.transform=`translate3d(0, ${r}px, 0)`,this.drag.y=this.drag.smoothY=r)},updateSwipeBackground(t,e,r){!this.$refs.cartBackground||(this.$refs.cartBackground.style.opacity=Un(t,e,r,0,1))},updateSwipeTransform(t){!this.$refs.cartInner||(this.$refs.cartInner.style.transform=`translate3d(0, ${t}px, 0)`)},playSwipeRaf(){this.dragState.isSwipeRafPlaying||(this.dragState.isSwipeRafPlaying=!0,this.updateSwipeRaf=this.updateSwipeRaf.bind(this),Gr.default.add(this.updateSwipeRaf))},stopSwipeRaf(){!this.dragState.isSwipeRafPlaying||(this.dragState.isSwipeRafPlaying=!1,Gr.default.remove(this.updateSwipeRaf))},updateSwipeRaf(){!this.dragState.isDragAvailable&&this.drag.smoothY>this.dragStep.closeY-1&&this.stopSwipeRaf(),this.drag.smoothY+=(this.drag.y-this.drag.smoothY)*.2,this.drag.smoothY=jr(this.drag.smoothY,this.dragStep.openY+.5,this.dragStep.closeY),this.updateSwipeTransform(this.drag.smoothY),this.updateSwipeBackground(this.drag.smoothY,this.dragStep.closeY,this.dragStep.openY),this.dragState.isOpen&&this.drag.smoothY<=this.dragStep.openY+.5&&(this.dragState.isClose=!1),!this.dragState.isOpen&&this.drag.smoothY>=this.dragStep.closeY-1&&(this.onCloseAnimationEnded(),this.dragState.isClose=!0)}}},Wn=Dc;var Yn=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Xn=Yn.join(","),ot=typeof Element=="undefined"?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,_c=function(e,r,i){var s=Array.prototype.slice.apply(e.querySelectorAll(Xn));return r&&ot.call(e,Xn)&&s.unshift(e),s=s.filter(i),s},zc=function(e){return e.contentEditable==="true"},Qn=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return isNaN(r)?zc(e)||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:r},Nc=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},Zn=function(e){return e.tagName==="INPUT"},$c=function(e){return Zn(e)&&e.type==="hidden"},Vc=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return r},Bc=function(e,r){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===r)return e[i]},qc=function(e){if(!e.name)return!0;var r=e.form||e.ownerDocument,i=r.querySelectorAll('input[type="radio"][name="'+e.name+'"]'),s=Bc(i,e.form);return!s||s===e},jc=function(e){return Zn(e)&&e.type==="radio"},Gc=function(e){return jc(e)&&!qc(e)},Uc=function(e){if(getComputedStyle(e).visibility==="hidden")return!0;var r=ot.call(e,"details>summary:first-of-type"),i=r?e.parentElement:e;if(ot.call(i,"details:not([open]) *"))return!0;for(;e;){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},Jn=function(e){return!(e.disabled||$c(e)||Uc(e)||Vc(e))},Hc=function(e){return!(!Jn(e)||Gc(e)||Qn(e)<0)},Wc=function(e,r){r=r||{};var i=[],s=[],n=_c(e,r.includeContainer,Hc);n.forEach(function(o,l){var u=Qn(o);u===0?i.push(o):s.push({documentOrder:l,tabIndex:u,node:o})});var a=s.sort(Nc).map(function(o){return o.node}).concat(i);return a},Yc=Yn.concat("iframe").join(","),Xc=function(e){if(!e)throw new Error("No node provided");return ot.call(e,Yc)===!1?!1:Jn(e)};function Qc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function Zc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kn(Object(r),!0).forEach(function(i){Qc(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var ea,ta=function(){var t=[];return{activateTrap:function(r){if(t.length>0){var i=t[t.length-1];i!==r&&i.pause()}var s=t.indexOf(r);s===-1||t.splice(s,1),t.push(r)},deactivateTrap:function(r){var i=t.indexOf(r);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}}(),Jc=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Kc=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},ed=function(e){return e.key==="Tab"||e.keyCode===9},ra=function(e){return setTimeout(e,0)},ia=function(e,r){var i=-1;return e.every(function(s,n){return r(s)?(i=n,!1):!0}),i},td=function(e,r){var i=document,s=Zc({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),n={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},a,o=function(b){return n.containers.some(function(y){return y.contains(b)})},l=function(b){var y=s[b];if(!y)return null;var E=y;if(typeof y=="string"&&(E=i.querySelector(y),!E))throw new Error("`".concat(b,"` refers to no known node"));if(typeof y=="function"&&(E=y(),!E))throw new Error("`".concat(b,"` did not return a node"));return E},u=function(){var b;if(l("initialFocus")!==null)b=l("initialFocus");else if(o(i.activeElement))b=i.activeElement;else{var y=n.tabbableGroups[0],E=y&&y.firstTabbableNode;b=E||l("fallbackFocus")}if(!b)throw new Error("Your focus-trap needs to have at least one focusable element");return b},c=function(){if(n.tabbableGroups=n.containers.map(function(b){var y=Wc(b);if(y.length>0)return{firstTabbableNode:y[0],lastTabbableNode:y[y.length-1]}}).filter(function(b){return!!b}),n.tabbableGroups.length<=0&&!l("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},d=function w(b){if(b!==i.activeElement){if(!b||!b.focus){w(u());return}b.focus({preventScroll:!!s.preventScroll}),n.mostRecentlyFocusedNode=b,Jc(b)&&b.select()}},f=function(b){var y=l("setReturnFocus");return y||b},h=function(b){if(!o(b.target)){if(s.clickOutsideDeactivates){a.deactivate({returnFocus:s.returnFocusOnDeactivate&&!Xc(b.target)});return}s.allowOutsideClick&&(typeof s.allowOutsideClick=="boolean"?s.allowOutsideClick:s.allowOutsideClick(b))||b.preventDefault()}},m=function(b){var y=o(b.target);y||b.target instanceof Document?y&&(n.mostRecentlyFocusedNode=b.target):(b.stopImmediatePropagation(),d(n.mostRecentlyFocusedNode||u()))},p=function(b){c();var y=null;if(n.tabbableGroups.length>0)if(b.shiftKey){var E=ia(n.tabbableGroups,function(A){var P=A.firstTabbableNode;return b.target===P});if(E>=0){var S=E===0?n.tabbableGroups.length-1:E-1,M=n.tabbableGroups[S];y=M.lastTabbableNode}}else{var C=ia(n.tabbableGroups,function(A){var P=A.lastTabbableNode;return b.target===P});if(C>=0){var L=C===n.tabbableGroups.length-1?0:C+1,O=n.tabbableGroups[L];y=O.firstTabbableNode}}else y=l("fallbackFocus");y&&(b.preventDefault(),d(y))},v=function(b){if(s.escapeDeactivates!==!1&&Kc(b)){b.preventDefault(),a.deactivate();return}if(ed(b)){p(b);return}},g=function(b){s.clickOutsideDeactivates||o(b.target)||s.allowOutsideClick&&(typeof s.allowOutsideClick=="boolean"?s.allowOutsideClick:s.allowOutsideClick(b))||(b.preventDefault(),b.stopImmediatePropagation())},T=function(){if(!!n.active)return ta.activateTrap(a),ea=s.delayInitialFocus?ra(function(){d(u())}):d(u()),i.addEventListener("focusin",m,!0),i.addEventListener("mousedown",h,{capture:!0,passive:!1}),i.addEventListener("touchstart",h,{capture:!0,passive:!1}),i.addEventListener("click",g,{capture:!0,passive:!1}),i.addEventListener("keydown",v,{capture:!0,passive:!1}),a},x=function(){if(!!n.active)return i.removeEventListener("focusin",m,!0),i.removeEventListener("mousedown",h,!0),i.removeEventListener("touchstart",h,!0),i.removeEventListener("click",g,!0),i.removeEventListener("keydown",v,!0),a};return a={activate:function(b){if(n.active)return this;c(),n.active=!0,n.paused=!1,n.nodeFocusedBeforeActivation=i.activeElement;var y=b&&b.onActivate?b.onActivate:s.onActivate;return y&&y(),T(),this},deactivate:function(b){if(!n.active)return this;clearTimeout(ea),x(),n.active=!1,n.paused=!1,ta.deactivateTrap(a);var y=b&&b.onDeactivate!==void 0?b.onDeactivate:s.onDeactivate;y&&y();var E=b&&b.returnFocus!==void 0?b.returnFocus:s.returnFocusOnDeactivate;return E&&ra(function(){d(f(n.nodeFocusedBeforeActivation))}),this},pause:function(){return n.paused||!n.active?this:(n.paused=!0,x(),this)},unpause:function(){return!n.paused||!n.active?this:(n.paused=!1,c(),T(),this)},updateContainerElements:function(b){var y=[].concat(b).filter(Boolean);return n.containers=y.map(function(E){return typeof E=="string"?i.querySelector(E):E}),n.active&&c(),this}},a.updateContainerElements(e),a},lt={props:{active:{type:Boolean,default:!0},escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:{type:Boolean,default:!1},initialFocus:[String,Function],fallbackFocus:[String,Function]},model:{event:"update:active",prop:"active"},mounted:function(){var t=this;this.$watch("active",function(e){e?(t.trap=td(t.$el,{escapeDeactivates:t.escapeDeactivates,allowOutsideClick:function(r){return typeof t.allowOutsideClick=="function"?t.allowOutsideClick(r):t.allowOutsideClick},clickOutsideDeactivates:t.clickOutsideDeactivates,returnFocusOnDeactivate:t.returnFocusOnDeactivate,onActivate:function(){t.$emit("update:active",!0),t.$emit("activate")},onDeactivate:function(){t.$emit("update:active",!1),t.$emit("deactivate")},initialFocus:t.initialFocus||function(){return t.$el},fallbackFocus:t.fallbackFocus}),t.trap.activate()):t.trap&&t.trap.deactivate()},{immediate:!0})},beforeDestroy:function(){this.trap&&this.trap.deactivate(),this.trap=null},methods:{activate:function(){this.trap.activate()},deactivate:function(){this.trap.deactivate()}},render:function(){var t=this.$slots.default;if(!t||!t.length||t.length>1)throw new Error("FocusTrap requires exactly one child");return t[0]}};function sa(t){let e=t.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"]');e[0]&&e[0].focus()}var rd={data:{checkoutChecked:!1},computed:{isCheckoutAvailable(){return this.checkoutChecked&&this.cartItems.length>0}},watch:{isCheckoutAvailable:function(t,e){}}},ut=rd;Vue.component("FocusTrap",lt);var na=class extends Ye{constructor(t){super(t)}init(){var t=e=>super[e];return k(this,null,function*(){yield t("init").call(this),this.closeBind=r=>{r.key==="Escape"&&this.onCloseModal()},this.bindEvents(),this.initVue()})}initVue(){let t=this;Vue.config.devtools=!0,this.app=new Vue({el:this.el,delimiters:["${","}"],data:{isActive:!1},mixins:[Xe,Wn,ut],beforeCreate(){this.moduleInstance=t},methods:{onActiveTrap(){this.isActive=!0,sa(this.$el)},onUnactiveTrap(){this.isActive=!1}}})}bindEvents(){document.addEventListener("keyup",this.closeBind)}unbindEvents(){document.removeEventListener("keyup",this.closeBind)}onOpenModal(){var t,e;_.classList.add("has-cart-open"),(e=(t=this.app)==null?void 0:t.openSwipeCart)==null||e.call(t),this.call("close",null,"Search"),this.call("close",null,"Menu"),setTimeout(()=>{var r,i;(i=(r=this.app)==null?void 0:r.onActiveTrap)==null||i.call(r)},600)}onCloseModal(){var t,e,r,i;_.classList.remove("has-cart-open"),(e=(t=this.app)==null?void 0:t.closeSwipeCart)==null||e.call(t),(i=(r=this.app)==null?void 0:r.onUnactiveTrap)==null||i.call(r)}onOpenSwipeModal(){}onCloseSwipeModal(){}onAddItem(t){var e,r;this.onOpenModal(),(r=(e=this.app)==null?void 0:e.onAddNewItem)==null||r.call(e,t),this.setCartCounter(t)}onRemoveItem(t){this.setCartCounter(t)}onUpdateItem(t){this.setCartCounter(t)}onRefreshCart(t){this.setCartCounter(t)}onCannotAddMoreItem(t){this.call("cannotAddMoreItem",t,"ProductForm")}setCartCounter(t){let e=t.item_count;this.call("setCartCounter",e,"CartCounter")}setCartData(t){this.call("setVueCartData",t,"Cart")}setVueCartData(t){var e,r;(r=(e=this.app)==null?void 0:e.setCartData)==null||r.call(e,t,!0)}destroy(){super.destroy(),this.unbindEvents(),this.app&&this.app.$destroy()}},aa=na;var oa=class extends I{constructor(t){super(t);this.events={click:"open"}}open(){this.call("onOpenModal",null,"CartModal")}},la=oa;var id="#smile-home",ua=class extends I{constructor(t){super(t);this.events={click:{"sublist-toggler":"onClick"},mouseenter:{"sublist-toggler":"onMouseEnter",sublist:"onMouseEnter"},mouseleave:{"sublist-toggler":"onMouseLeave",sublist:"onMouseLeave"}}}init(){this.$sublists=this.$("sublist"),this.$sublistTogglers=this.$("sublist-toggler"),this.$rewardsButtons=this.el.querySelectorAll("[href='"+id+"']"),this.bindEvents()}bindEvents(){this.onRewardsClickBind=this.onRewardsClick.bind(this),this.$rewardsButtons.length&&this.$rewardsButtons.forEach(t=>{t.addEventListener("click",this.onRewardsClickBind)})}unbindEvents(){this.$rewardsButtons.length&&this.$rewardsButtons.forEach(t=>{t.removeEventListener("click",this.onRewardsClickBind)})}onClick(t){this.toggle(t)}onMouseEnter(t){let e=t.curTarget.dataset.id;this.clearItemsState(),this.$sublists.forEach(r=>{if(r.dataset.id==e){let i=r.querySelectorAll("[data-lazy]");i!=null||(i=!1),i&&i.forEach(s=>{ne(s)}),r.classList.add("is-active")}}),this.$sublistTogglers.forEach(r=>{r.dataset.id==e&&r.classList.add("is-active")}),this.call("close",null,"Search")}onMouseLeave(t){this.clearItemsState()}onRewardsClick(){this.call("close",null,"Menu")}toggle(t){t.curTarget.classList.contains("is-active")?this.onMouseLeave(t):(this.onMouseLeave(t),this.onMouseEnter(t))}clearItemsState(){this.$sublists.forEach(t=>{t.classList.remove("is-active")}),this.$sublistTogglers.forEach(t=>{t.classList.remove("is-active")})}destroy(){super.destroy(),this.unbindEvents()}},ca=ua;var da=class extends I{constructor(t){super(t)}init(){setTimeout(()=>{this.call("scrollTo",[this.el,{duration:300,offset:-100}],"Scroll")},1500)}},fa=da;var Ur=Se(at()),sd={from:0,to:1,duration:300,onProgress:()=>{},onComplete:()=>{}};function nd(t,e=2){return 1-ki(1-t,e)}var Hr=class{constructor({to:e,from:r,duration:i,onProgress:s,onComplete:n}=sd){this.to=e,this.from=r,this.delta=e-r,this.duration=i,this.onProgress=s,this.onComplete=n,this._update=this._update.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this)}start(){this.isPlaying||(this.isPlaying=!0,this.startTime=performance.now(),Ur.default.add(this._update))}stop(){!this.isPlaying||(this.isPlaying=!1,Ur.default.remove(this._update))}_update(){var n,a;let r=performance.now()-this.startTime,i=Math.min(r/this.duration,1),s=this.from+nd(i)*this.delta;(n=this.onProgress)==null||n.call(this,s),i>=1&&(this.stop(),(a=this.onComplete)==null||a.call(this))}},we=Hr;var ha=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Wr=ha.join(","),ke=typeof Element=="undefined"?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ad=function(e,r,i){var s=Array.prototype.slice.apply(e.querySelectorAll(Wr));return r&&ke.call(e,Wr)&&s.unshift(e),s=s.filter(i),s},od=function(e){return e.contentEditable==="true"},pa=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return isNaN(r)?od(e)||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:r},ld=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},Yr=function(e){return e.tagName==="INPUT"},ud=function(e){return Yr(e)&&e.type==="hidden"},cd=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return r},dd=function(e,r){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===r)return e[i]},fd=function(e){if(!e.name)return!0;var r=e.form||e.ownerDocument,i=function(o){return r.querySelectorAll('input[type="radio"][name="'+o+'"]')},s;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")s=i(window.CSS.escape(e.name));else try{s=i(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var n=dd(s,e.form);return!n||n===e},hd=function(e){return Yr(e)&&e.type==="radio"},pd=function(e){return hd(e)&&!fd(e)},md=function(e,r){if(getComputedStyle(e).visibility==="hidden")return!0;var i=ke.call(e,"details>summary:first-of-type"),s=i?e.parentElement:e;if(ke.call(s,"details:not([open]) *"))return!0;if(!r||r==="full")for(;e;){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}else if(r==="non-zero-area"){var n=e.getBoundingClientRect(),a=n.width,o=n.height;return a===0&&o===0}return!1},vd=function(e){if(Yr(e)||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="BUTTON")for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var i=0;i<r.children.length;i++){var s=r.children.item(i);if(s.tagName==="LEGEND")return!s.contains(e)}return!0}r=r.parentElement}return!1},ma=function(e,r){return!(r.disabled||ud(r)||md(r,e.displayCheck)||cd(r)||vd(r))},va=function(e,r){return!(!ma(e,r)||pd(r)||pa(r)<0)},ga=function(e,r){r=r||{};var i=[],s=[],n=ad(e,r.includeContainer,va.bind(null,r));n.forEach(function(o,l){var u=pa(o);u===0?i.push(o):s.push({documentOrder:l,tabIndex:u,node:o})});var a=s.sort(ld).map(function(o){return o.node}).concat(i);return a};var Xr=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return ke.call(e,Wr)===!1?!1:va(r,e)},gd=ha.concat("iframe").join(","),ct=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return ke.call(e,gd)===!1?!1:ma(r,e)};function ya(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function bd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ya(Object(r),!0).forEach(function(i){yd(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function yd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ba=function(){var t=[];return{activateTrap:function(r){if(t.length>0){var i=t[t.length-1];i!==r&&i.pause()}var s=t.indexOf(r);s===-1||t.splice(s,1),t.push(r)},deactivateTrap:function(r){var i=t.indexOf(r);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}}(),wd=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},xd=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},Ed=function(e){return e.key==="Tab"||e.keyCode===9},wa=function(e){return setTimeout(e,0)},Qr=function(e,r){var i=-1;return e.every(function(s,n){return r(s)?(i=n,!1):!0}),i},De=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,i):e},dt=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},xa=function(e,r){var i=(r==null?void 0:r.document)||document,s=bd({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),n={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a,o=function(y,E,S){return y&&y[E]!==void 0?y[E]:s[S||E]},l=function(y){return!!(y&&n.containers.some(function(E){return E.contains(y)}))},u=function(y){var E=s[y];if(typeof E=="function"){for(var S=arguments.length,M=new Array(S>1?S-1:0),C=1;C<S;C++)M[C-1]=arguments[C];E=E.apply(void 0,M)}if(!E){if(E===void 0||E===!1)return E;throw new Error("`".concat(y,"` was specified but was not a node, or did not return a node"))}var L=E;if(typeof E=="string"&&(L=i.querySelector(E),!L))throw new Error("`".concat(y,"` as selector refers to no known node"));return L},c=function(){var y=u("initialFocus");if(y===!1)return!1;if(y===void 0)if(l(i.activeElement))y=i.activeElement;else{var E=n.tabbableGroups[0],S=E&&E.firstTabbableNode;y=S||u("fallbackFocus")}if(!y)throw new Error("Your focus-trap needs to have at least one focusable element");return y},d=function(){if(n.tabbableGroups=n.containers.map(function(y){var E=ga(y);if(E.length>0)return{container:y,firstTabbableNode:E[0],lastTabbableNode:E[E.length-1]}}).filter(function(y){return!!y}),n.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},f=function b(y){if(y!==!1&&y!==i.activeElement){if(!y||!y.focus){b(c());return}y.focus({preventScroll:!!s.preventScroll}),n.mostRecentlyFocusedNode=y,wd(y)&&y.select()}},h=function(y){var E=u("setReturnFocus",y);return E||(E===!1?!1:y)},m=function(y){var E=dt(y);if(!l(E)){if(De(s.clickOutsideDeactivates,y)){a.deactivate({returnFocus:s.returnFocusOnDeactivate&&!ct(E)});return}De(s.allowOutsideClick,y)||y.preventDefault()}},p=function(y){var E=dt(y),S=l(E);S||E instanceof Document?S&&(n.mostRecentlyFocusedNode=E):(y.stopImmediatePropagation(),f(n.mostRecentlyFocusedNode||c()))},v=function(y){var E=dt(y);d();var S=null;if(n.tabbableGroups.length>0){var M=Qr(n.tabbableGroups,function($){var q=$.container;return q.contains(E)});if(M<0)y.shiftKey?S=n.tabbableGroups[n.tabbableGroups.length-1].lastTabbableNode:S=n.tabbableGroups[0].firstTabbableNode;else if(y.shiftKey){var C=Qr(n.tabbableGroups,function($){var q=$.firstTabbableNode;return E===q});if(C<0&&(n.tabbableGroups[M].container===E||ct(E)&&!Xr(E))&&(C=M),C>=0){var L=C===0?n.tabbableGroups.length-1:C-1,O=n.tabbableGroups[L];S=O.lastTabbableNode}}else{var A=Qr(n.tabbableGroups,function($){var q=$.lastTabbableNode;return E===q});if(A<0&&(n.tabbableGroups[M].container===E||ct(E)&&!Xr(E))&&(A=M),A>=0){var P=A===n.tabbableGroups.length-1?0:A+1,R=n.tabbableGroups[P];S=R.firstTabbableNode}}}else S=u("fallbackFocus");S&&(y.preventDefault(),f(S))},g=function(y){if(xd(y)&&De(s.escapeDeactivates,y)!==!1){y.preventDefault(),a.deactivate();return}if(Ed(y)){v(y);return}},T=function(y){if(!De(s.clickOutsideDeactivates,y)){var E=dt(y);l(E)||De(s.allowOutsideClick,y)||(y.preventDefault(),y.stopImmediatePropagation())}},x=function(){if(!!n.active)return ba.activateTrap(a),n.delayInitialFocusTimer=s.delayInitialFocus?wa(function(){f(c())}):f(c()),i.addEventListener("focusin",p,!0),i.addEventListener("mousedown",m,{capture:!0,passive:!1}),i.addEventListener("touchstart",m,{capture:!0,passive:!1}),i.addEventListener("click",T,{capture:!0,passive:!1}),i.addEventListener("keydown",g,{capture:!0,passive:!1}),a},w=function(){if(!!n.active)return i.removeEventListener("focusin",p,!0),i.removeEventListener("mousedown",m,!0),i.removeEventListener("touchstart",m,!0),i.removeEventListener("click",T,!0),i.removeEventListener("keydown",g,!0),a};return a={activate:function(y){if(n.active)return this;var E=o(y,"onActivate"),S=o(y,"onPostActivate"),M=o(y,"checkCanFocusTrap");M||d(),n.active=!0,n.paused=!1,n.nodeFocusedBeforeActivation=i.activeElement,E&&E();var C=function(){M&&d(),x(),S&&S()};return M?(M(n.containers.concat()).then(C,C),this):(C(),this)},deactivate:function(y){if(!n.active)return this;clearTimeout(n.delayInitialFocusTimer),n.delayInitialFocusTimer=void 0,w(),n.active=!1,n.paused=!1,ba.deactivateTrap(a);var E=o(y,"onDeactivate"),S=o(y,"onPostDeactivate"),M=o(y,"checkCanReturnFocus");E&&E();var C=o(y,"returnFocus","returnFocusOnDeactivate"),L=function(){wa(function(){C&&f(h(n.nodeFocusedBeforeActivation)),S&&S()})};return C&&M?(M(h(n.nodeFocusedBeforeActivation)).then(L,L),this):(L(),this)},pause:function(){return n.paused||!n.active?this:(n.paused=!0,w(),this)},unpause:function(){return!n.paused||!n.active?this:(n.paused=!1,d(),x(),this)},updateContainerElements:function(y){var E=[].concat(y).filter(Boolean);return n.containers=E.map(function(S){return typeof S=="string"?i.querySelector(S):S}),n.active&&d(),this}},a.updateContainerElements(e),a};var Ea=class extends I{constructor(t){super(t);this.events={click:{toggler:"toggle"}},this.activeClass="-open"}init(){let t=this.el.querySelectorAll('[data-accordions="content"]');for(let e=0;e<t.length;e++){let r=t[e];r.style.visibility="hidden"}this.lastItemIndex=null,this.bindEvents()}toggle(t){let r=t.curTarget.parentNode;r.classList.contains(this.activeClass)?this.close():(this.close(),this.open(r))}open(t){this.$currentItem=t;let e=t.querySelector('[data-accordions="content"]');this.lastItemIndex=Array.from(t.parentNode.children).indexOf(t);let r=t.querySelectorAll("[data-lazy]");r!=null||(r=!1),r&&r.forEach(i=>{ne(i)}),e.style.visibility="visible",requestAnimationFrame(()=>{let i=t.querySelector('[data-accordions="inner"]');new we({from:0,to:this.compute(i).height,duration:200,onProgress:(n=number)=>{e.style.height=n+"px"},onComplete:()=>{this.$currentItem.classList.add(this.activeClass),this.call("scrollTo",[t,{duration:800,offset:-80}],"Scroll","main")}}).start()})}close(){if(this.lastItemIndex==null)return;let t=this.$("item")[this.lastItemIndex],e=t.querySelector('[data-accordions="content"]');e&&new we({from:this.compute(e).height,to:0,duration:200,onProgress:(i=number)=>{e.style.height=i+"px"},onComplete:()=>{requestAnimationFrame(()=>{t.classList.remove(this.activeClass),e.style.visibility="hidden"})}}).start(),this.lastItemIndex=null}compute(t){return t.getBoundingClientRect()}bindEvents(){this.bindOnResize=this.onResize.bind(this),window.addEventListener("resize",this.bindOnResize)}unbindEvents(){window.removeEventListener("resize",this.bindOnResize)}onResize(){if(this.lastItemIndex==null)return;let t=this.$("item")[this.lastItemIndex],e=t.querySelector('[data-accordions="content"]'),r=t.querySelector('[data-accordions="inner"]');requestAnimationFrame(()=>{e.style.height=this.compute(r).height+"px"})}destroy(){super.destroy(),this.unbindEvents()}},Ta=Ea;var Sa=class extends I{constructor(t){super(t);this.moduleName=t.name,this.events={click:{close:"close"}},this.closeBind=e=>{e.key==="Escape"&&this.close()},this.toggler=null,this.focusTrapOptions={checkCanFocusTrap:e=>{let r=e.map(i=>new Promise(s=>{let n=setInterval(()=>{getComputedStyle(i).visibility!=="hidden"&&(s(),clearInterval(n))},5)}));return Promise.all(r)},onActivate:()=>{_.classList.add(this.activeClass),this.el.setAttribute("aria-hidden",!1)},onPostActivate:()=>{this.toggler&&this.toggler.setAttribute("aria-expanded",!0)},onDeactivate:()=>{_.classList.remove(this.activeClass),this.el.setAttribute("aria-hidden",!0)},onPostDeactivate:()=>{this.toggler&&(this.toggler.setAttribute("aria-expanded",!1),this.toggler=null)}}}init(){var t;if(typeof this.activeClass!="string"||!this.activeClass)throw new TypeError(`${this.moduleName} expects a CSS class name for the 'activeClass' property`);this.focusTrap=xa(this.el,this.focusTrapOptions),document.addEventListener("keyup",this.closeBind),(t=this.onInit)==null||t.call(this)}toggle(t){t&&(this.toggler=t),_.classList.contains(this.activeClass)?this.close():this.open()}open(){var t,e,r;(e=(t=this.focusTrap)==null?void 0:t.activate)==null||e.call(t),(r=this.onOpen)==null||r.call(this)}close(){var t,e,r;(e=(t=this.focusTrap)==null?void 0:t.deactivate)==null||e.call(t),(r=this.onClose)==null||r.call(this)}destroy(){var t,e,r;(e=(t=this.focusTrap)==null?void 0:t.deactivate)==null||e.call(t,{returnFocus:!1}),document.removeEventListener("keyup",this.closeBind),(r=this.onDestroy)==null||r.call(this),super.destroy()}},xe=Sa;var Td="#smile-home",Ca=class extends xe{constructor(){super(...arguments);ve(this,"activeClass","has-menu-open")}onInit(){this.$close=this.$("close")[0],this.$rewardsButtons=this.el.querySelectorAll("[href='"+Td+"']"),this.bindEvents()}onDestroy(){this.unbindEvents()}onOpen(){this.call("close",null,"Search"),this.call("onPlay",null,"Globe","menu"),setTimeout(()=>{this.$close.focus()},200)}onClose(){this.call("close",null,"Accordions","menu"),this.call("onStop",null,"Globe","menu")}onRewardsClick(){this.close()}bindEvents(){this.onRewardsClickBind=this.onRewardsClick.bind(this),this.$rewardsButtons.length&&this.$rewardsButtons.forEach(t=>{t.addEventListener("click",this.onRewardsClickBind)})}unbindEvents(){this.$rewardsButtons.length&&this.$rewardsButtons.forEach(t=>{t.removeEventListener("click",this.onRewardsClickBind)})}},Ma=Ca;var Aa=class extends I{constructor(t){super(t);this.events={click:"toggle"}}init(){}toggle(){this.call("toggle",null,"Menu")}},Pa=Aa;var Ti=Se(at());function Zr(t){let e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}function ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ia(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}function Jr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Kr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function La(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Oa(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function ht(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Fa(t,e){let r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}function Ra(t,e){let r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2];return r*r+i*i+s*s}function ei(t){let e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}function ka(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Da(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function pt(t,e){let r=e[0],i=e[1],s=e[2],n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ti(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ri(t,e,r){let i=e[0],s=e[1],n=e[2],a=r[0],o=r[1],l=r[2];return t[0]=s*l-n*o,t[1]=n*a-i*l,t[2]=i*o-s*a,t}function _a(t,e,r,i){let s=e[0],n=e[1],a=e[2];return t[0]=s+i*(r[0]-s),t[1]=n+i*(r[1]-n),t[2]=a+i*(r[2]-a),t}function za(t,e,r){let i=e[0],s=e[1],n=e[2],a=r[3]*i+r[7]*s+r[11]*n+r[15];return a=a||1,t[0]=(r[0]*i+r[4]*s+r[8]*n+r[12])/a,t[1]=(r[1]*i+r[5]*s+r[9]*n+r[13])/a,t[2]=(r[2]*i+r[6]*s+r[10]*n+r[14])/a,t}function Na(t,e,r){let i=e[0],s=e[1],n=e[2],a=r[3]*i+r[7]*s+r[11]*n+r[15];return a=a||1,t[0]=(r[0]*i+r[4]*s+r[8]*n)/a,t[1]=(r[1]*i+r[5]*s+r[9]*n)/a,t[2]=(r[2]*i+r[6]*s+r[10]*n)/a,t}function $a(t,e,r){let i=e[0],s=e[1],n=e[2],a=r[0],o=r[1],l=r[2],u=r[3],c=o*n-l*s,d=l*i-a*n,f=a*s-o*i,h=o*f-l*d,m=l*c-a*f,p=a*d-o*c,v=u*2;return c*=v,d*=v,f*=v,h*=2,m*=2,p*=2,t[0]=i+c+h,t[1]=s+d+m,t[2]=n+f+p,t}var Va=function(){let t=[0,0,0],e=[0,0,0];return function(r,i){ft(t,r),ft(e,i),pt(t,t),pt(e,e);let s=ti(t,e);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();function Ba(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}var D=class extends Array{constructor(e=0,r=e,i=e){return super(e,r,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,r=e,i=e){return e.length?this.copy(e):(Ia(this,e,r,i),this)}copy(e){return ft(this,e),this}add(e,r){return r?Jr(this,e,r):Jr(this,this,e),this}sub(e,r){return r?Kr(this,e,r):Kr(this,this,e),this}multiply(e){return e.length?La(this,this,e):ht(this,this,e),this}divide(e){return e.length?Oa(this,this,e):ht(this,this,1/e),this}inverse(e=this){return Da(this,e),this}len(){return Zr(this)}distance(e){return e?Fa(this,e):Zr(this)}squaredLen(){return ei(this)}squaredDistance(e){return e?Ra(this,e):ei(this)}negate(e=this){return ka(this,e),this}cross(e,r){return r?ri(this,e,r):ri(this,this,e),this}scale(e){return ht(this,this,e),this}normalize(){return pt(this,this),this}dot(e){return ti(this,e)}equals(e){return Ba(this,e)}applyMatrix4(e){return za(this,this,e),this}scaleRotateMatrix4(e){return Na(this,this,e),this}applyQuaternion(e){return $a(this,this,e),this}angle(e){return Va(this,e)}lerp(e,r){return _a(this,this,e,r),this}clone(){return new D(this[0],this[1],this[2])}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}transformDirection(e){let r=this[0],i=this[1],s=this[2];return this[0]=e[0]*r+e[4]*i+e[8]*s,this[1]=e[1]*r+e[5]*i+e[9]*s,this[2]=e[2]*r+e[6]*i+e[10]*s,this.normalize()}};var qa=new D,Sd=1,Cd=1,ja=!1,_e=class{constructor(e,r={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=r,this.id=Sd++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in r)this.addAttribute(i,r[i])}addAttribute(e,r){if(this.attributes[e]=r,r.id=Cd++,r.size=r.size||1,r.type=r.type||(r.data.constructor===Float32Array?this.gl.FLOAT:r.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),r.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,r.normalized=r.normalized||!1,r.stride=r.stride||0,r.offset=r.offset||0,r.count=r.count||(r.stride?r.data.byteLength/r.stride:r.data.length/r.size),r.divisor=r.instanced||0,r.needsUpdate=!1,r.buffer||(r.buffer=this.gl.createBuffer(),this.updateAttribute(r)),r.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==r.count*r.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,r.count*r.divisor);this.instancedCount=r.count*r.divisor}else e==="index"?this.drawRange.count=r.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,r.count))}updateAttribute(e){this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),this.gl.bufferData(e.target,e.data,this.gl.STATIC_DRAW),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((r,{name:i,type:s})=>{if(!this.attributes[i]){console.warn(`active attribute ${i} not being supplied`);return}let n=this.attributes[i];this.gl.bindBuffer(n.target,n.buffer),this.glState.boundBuffer=n.buffer;let a=1;s===35674&&(a=2),s===35675&&(a=3),s===35676&&(a=4);let o=n.size/a,l=a===1?0:a*a*a,u=a===1?0:a*a;for(let c=0;c<a;c++)this.gl.vertexAttribPointer(r+c,o,n.type,n.normalized,n.stride+l,n.offset+c*u),this.gl.enableVertexAttribArray(r+c),this.gl.renderer.vertexAttribDivisor(r+c,n.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:r=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((i,{name:s})=>{let n=this.attributes[s];n.needsUpdate&&this.updateAttribute(n)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2,this.instancedCount):this.gl.renderer.drawArraysInstanced(r,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2):this.gl.drawArrays(r,this.drawRange.start,this.drawRange.count)}getPosition(){let e=this.attributes.position;if(e.data)return e;if(!ja)return console.warn("No position buffer data found to compute bounds"),ja=!0}computeBoundingBox(e){e||(e=this.getPosition());let r=e.data,i=e.offset||0,s=e.stride||e.size;this.bounds||(this.bounds={min:new D,max:new D,center:new D,scale:new D,radius:Infinity});let n=this.bounds.min,a=this.bounds.max,o=this.bounds.center,l=this.bounds.scale;n.set(Infinity),a.set(-Infinity);for(let u=i,c=r.length;u<c;u+=s){let d=r[u],f=r[u+1],h=r[u+2];n.x=Math.min(d,n.x),n.y=Math.min(f,n.y),n.z=Math.min(h,n.z),a.x=Math.max(d,a.x),a.y=Math.max(f,a.y),a.z=Math.max(h,a.z)}l.sub(a,n),o.add(n,a).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());let r=e.data,i=e.offset||0,s=e.stride||e.size;this.bounds||this.computeBoundingBox(e);let n=0;for(let a=i,o=r.length;a<o;a+=s)qa.fromArray(r,a),n=Math.max(n,this.bounds.center.squaredDistance(qa));this.bounds.radius=Math.sqrt(n)}remove(){this.vao&&this.gl.renderer.deleteVertexArray(this.vao);for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}};var Md=1,Ga={},he=class{constructor(e,{vertex:r,fragment:i,uniforms:s={},transparent:n=!1,cullFace:a=e.BACK,frontFace:o=e.CCW,depthTest:l=!0,depthWrite:u=!0,depthFunc:c=e.LESS}={}){e.canvas||console.error("gl not passed as fist argument to Program"),this.gl=e,this.uniforms=s,this.id=Md++,r||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=n,this.cullFace=a,this.frontFace=o,this.depthTest=l,this.depthWrite=u,this.depthFunc=c,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));let d=e.createShader(e.VERTEX_SHADER);e.shaderSource(d,r),e.compileShader(d),e.getShaderInfoLog(d)!==""&&console.warn(`${e.getShaderInfoLog(d)}
Vertex Shader
${Ua(r)}`);let f=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(f,i),e.compileShader(f),e.getShaderInfoLog(f)!==""&&console.warn(`${e.getShaderInfoLog(f)}
Fragment Shader
${Ua(i)}`),this.program=e.createProgram(),e.attachShader(this.program,d),e.attachShader(this.program,f),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS))return console.warn(e.getProgramInfoLog(this.program));e.deleteShader(d),e.deleteShader(f),this.uniformLocations=new Map;let h=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS);for(let v=0;v<h;v++){let g=e.getActiveUniform(this.program,v);this.uniformLocations.set(g,e.getUniformLocation(this.program,g.name));let T=g.name.match(/(\w+)/g);g.uniformName=T[0],T.length===3?(g.isStructArray=!0,g.structIndex=Number(T[1]),g.structProperty=T[2]):T.length===2&&isNaN(Number(T[1]))&&(g.isStruct=!0,g.structProperty=T[1])}this.attributeLocations=new Map;let m=[],p=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES);for(let v=0;v<p;v++){let g=e.getActiveAttrib(this.program,v),T=e.getAttribLocation(this.program,g.name);m[T]=g.name,this.attributeLocations.set(g,T)}this.attributeOrder=m.join("")}setBlendFunc(e,r,i,s){this.blendFunc.src=e,this.blendFunc.dst=r,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=s,e&&(this.transparent=!0)}setBlendEquation(e,r){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:e=!1}={}){let r=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach((s,n)=>{let a=n.uniformName,o=this.uniforms[a];if(n.isStruct&&(o=o[n.structProperty],a+=`.${n.structProperty}`),n.isStructArray&&(o=o[n.structIndex][n.structProperty],a+=`[${n.structIndex}].${n.structProperty}`),!o)return Ha(`Active uniform ${a} has not been supplied`);if(o&&o.value===void 0)return Ha(`${a} uniform is missing a value parameter`);if(o.value.texture)return r=r+1,o.value.update(r),ii(this.gl,n.type,s,r);if(o.value.length&&o.value[0].texture){let l=[];return o.value.forEach(u=>{r=r+1,u.update(r),l.push(r)}),ii(this.gl,n.type,s,l)}ii(this.gl,n.type,s,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}};function ii(t,e,r,i){i=i.length?Ad(i):i;let s=t.renderer.state.uniformLocations.get(r);if(i.length)if(s===void 0||s.length!==i.length)t.renderer.state.uniformLocations.set(r,i.slice(0));else{if(Pd(s,i))return;s.set?s.set(i):Id(s,i),t.renderer.state.uniformLocations.set(r,s)}else{if(s===i)return;t.renderer.state.uniformLocations.set(r,i)}switch(e){case 5126:return i.length?t.uniform1fv(r,i):t.uniform1f(r,i);case 35664:return t.uniform2fv(r,i);case 35665:return t.uniform3fv(r,i);case 35666:return t.uniform4fv(r,i);case 35670:case 5124:case 35678:case 35680:return i.length?t.uniform1iv(r,i):t.uniform1i(r,i);case 35671:case 35667:return t.uniform2iv(r,i);case 35672:case 35668:return t.uniform3iv(r,i);case 35673:case 35669:return t.uniform4iv(r,i);case 35674:return t.uniformMatrix2fv(r,!1,i);case 35675:return t.uniformMatrix3fv(r,!1,i);case 35676:return t.uniformMatrix4fv(r,!1,i)}}function Ua(t){let e=t.split(`
`);for(let r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join(`
`)}function Ad(t){let e=t.length,r=t[0].length;if(r===void 0)return t;let i=e*r,s=Ga[i];s||(Ga[i]=s=new Float32Array(i));for(let n=0;n<e;n++)s.set(t[n],n*r);return s}function Pd(t,e){if(t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0}function Id(t,e){for(let r=0,i=t.length;r<i;r++)t[r]=e[r]}var si=0;function Ha(t){si>100||(console.warn(t),si++,si>100&&console.warn("More than 100 program warnings - stopping logs."))}var ni=new D,Ld=1,ai=class{constructor({canvas:e=document.createElement("canvas"),width:r=300,height:i=150,dpr:s=1,alpha:n=!1,depth:a=!0,stencil:o=!1,antialias:l=!1,premultipliedAlpha:u=!1,preserveDrawingBuffer:c=!1,powerPreference:d="default",autoClear:f=!0,webgl:h=2}={}){let m={alpha:n,depth:a,stencil:o,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:d};this.dpr=s,this.alpha=n,this.color=!0,this.depth=a,this.stencil=o,this.premultipliedAlpha=u,this.autoClear=f,this.id=Ld++,h===2&&(this.gl=e.getContext("webgl2",m)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",m)||e.getContext("experimental-webgl",m)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(r,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,r){this.width=e,this.height=r,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=r*this.dpr,Object.assign(this.gl.canvas.style,{width:e+"px",height:r+"px"})}setViewport(e,r){this.state.viewport.width===e&&this.state.viewport.height===r||(this.state.viewport.width=e,this.state.viewport.height=r,this.gl.viewport(0,0,e,r))}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,r,i,s){this.state.blendFunc.src===e&&this.state.blendFunc.dst===r&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=e,this.state.blendFunc.dst=r,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=s,i!==void 0?this.gl.blendFuncSeparate(e,r,i,s):this.gl.blendFunc(e,r))}setBlendEquation(e,r){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===r)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=r,r!==void 0?this.gl.blendEquationSeparate(e,r):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:r=null}={}){this.state.framebuffer!==r&&(this.state.framebuffer=r,this.gl.bindFramebuffer(e,r))}getExtension(e,r,i){return r&&this.gl[r]?this.gl[r].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),r?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.program.id!==r.program.id?e.program.id-r.program.id:e.zDepth!==r.zDepth?e.zDepth-r.zDepth:r.id-e.id}sortTransparent(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.zDepth!==r.zDepth?r.zDepth-e.zDepth:r.id-e.id}sortUI(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.program.id!==r.program.id?e.program.id-r.program.id:r.id-e.id}getRenderList({scene:e,camera:r,frustumCull:i,sort:s}){let n=[];if(r&&i&&r.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;!a.draw||i&&a.frustumCulled&&r&&!r.frustumIntersectsMesh(a)||n.push(a)}),s){let a=[],o=[],l=[];n.forEach(u=>{u.program.transparent?u.program.depthTest?o.push(u):l.push(u):a.push(u),u.zDepth=0,!(u.renderOrder!==0||!u.program.depthTest||!r)&&(u.worldMatrix.getTranslation(ni),ni.applyMatrix4(r.projectionViewMatrix),u.zDepth=ni.z)}),a.sort(this.sortOpaque),o.sort(this.sortTransparent),l.sort(this.sortUI),n=a.concat(o,l)}return n}render({scene:e,camera:r,target:i=null,update:s=!0,sort:n=!0,frustumCull:a=!0,clear:o}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(o||this.autoClear&&o!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&e.updateMatrixWorld(),r&&r.updateMatrixWorld(),this.getRenderList({scene:e,camera:r,frustumCull:a,sort:n}).forEach(u=>{u.draw({camera:r})})}};function Wa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Ya(t,e,r,i,s){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t}function Xa(t,e){let r=e[0],i=e[1],s=e[2],n=e[3],a=r*r+i*i+s*s+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=i*a,t[2]=s*a,t[3]=n*a,t}function Qa(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Za(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ja(t,e,r){r=r*.5;let i=Math.sin(r);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(r),t}function oi(t,e,r){let i=e[0],s=e[1],n=e[2],a=e[3],o=r[0],l=r[1],u=r[2],c=r[3];return t[0]=i*c+a*o+s*u-n*l,t[1]=s*c+a*l+n*o-i*u,t[2]=n*c+a*u+i*l-s*o,t[3]=a*c-i*o-s*l-n*u,t}function Ka(t,e,r){r*=.5;let i=e[0],s=e[1],n=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=i*l+a*o,t[1]=s*l+n*o,t[2]=n*l-s*o,t[3]=a*l-i*o,t}function eo(t,e,r){r*=.5;let i=e[0],s=e[1],n=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=i*l-n*o,t[1]=s*l+a*o,t[2]=n*l+i*o,t[3]=a*l-s*o,t}function to(t,e,r){r*=.5;let i=e[0],s=e[1],n=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=i*l+s*o,t[1]=s*l-i*o,t[2]=n*l+a*o,t[3]=a*l-n*o,t}function ro(t,e,r,i){let s=e[0],n=e[1],a=e[2],o=e[3],l=r[0],u=r[1],c=r[2],d=r[3],f,h,m,p,v;return h=s*l+n*u+a*c+o*d,h<0&&(h=-h,l=-l,u=-u,c=-c,d=-d),1-h>1e-6?(f=Math.acos(h),m=Math.sin(f),p=Math.sin((1-i)*f)/m,v=Math.sin(i*f)/m):(p=1-i,v=i),t[0]=p*s+v*l,t[1]=p*n+v*u,t[2]=p*a+v*c,t[3]=p*o+v*d,t}function io(t,e){let r=e[0],i=e[1],s=e[2],n=e[3],a=r*r+i*i+s*s+n*n,o=a?1/a:0;return t[0]=-r*o,t[1]=-i*o,t[2]=-s*o,t[3]=n*o,t}function so(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function no(t,e){let r=e[0]+e[4]+e[8],i;if(r>0)i=Math.sqrt(r+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[s*3+s]&&(s=2);let n=(s+1)%3,a=(s+2)%3;i=Math.sqrt(e[s*3+s]-e[n*3+n]-e[a*3+a]+1),t[s]=.5*i,i=.5/i,t[3]=(e[n*3+a]-e[a*3+n])*i,t[n]=(e[n*3+s]+e[s*3+n])*i,t[a]=(e[a*3+s]+e[s*3+a])*i}return t}function ao(t,e,r="YXZ"){let i=Math.sin(e[0]*.5),s=Math.cos(e[0]*.5),n=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),o=Math.sin(e[2]*.5),l=Math.cos(e[2]*.5);return r==="XYZ"?(t[0]=i*a*l+s*n*o,t[1]=s*n*l-i*a*o,t[2]=s*a*o+i*n*l,t[3]=s*a*l-i*n*o):r==="YXZ"?(t[0]=i*a*l+s*n*o,t[1]=s*n*l-i*a*o,t[2]=s*a*o-i*n*l,t[3]=s*a*l+i*n*o):r==="ZXY"?(t[0]=i*a*l-s*n*o,t[1]=s*n*l+i*a*o,t[2]=s*a*o+i*n*l,t[3]=s*a*l-i*n*o):r==="ZYX"?(t[0]=i*a*l-s*n*o,t[1]=s*n*l+i*a*o,t[2]=s*a*o-i*n*l,t[3]=s*a*l+i*n*o):r==="YZX"?(t[0]=i*a*l+s*n*o,t[1]=s*n*l+i*a*o,t[2]=s*a*o-i*n*l,t[3]=s*a*l-i*n*o):r==="XZY"&&(t[0]=i*a*l-s*n*o,t[1]=s*n*l-i*a*o,t[2]=s*a*o+i*n*l,t[3]=s*a*l+i*n*o),t}var oo=Wa,lo=Ya;var uo=Qa;var co=Xa;var le=class extends Array{constructor(e=0,r=0,i=0,s=1){return super(e,r,i,s),this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set w(e){this[3]=e,this.onChange()}identity(){return Za(this),this.onChange(),this}set(e,r,i,s){return e.length?this.copy(e):(lo(this,e,r,i,s),this.onChange(),this)}rotateX(e){return Ka(this,this,e),this.onChange(),this}rotateY(e){return eo(this,this,e),this.onChange(),this}rotateZ(e){return to(this,this,e),this.onChange(),this}inverse(e=this){return io(this,e),this.onChange(),this}conjugate(e=this){return so(this,e),this.onChange(),this}copy(e){return oo(this,e),this.onChange(),this}normalize(e=this){return co(this,e),this.onChange(),this}multiply(e,r){return r?oi(this,e,r):oi(this,this,e),this.onChange(),this}dot(e){return uo(this,e)}fromMatrix3(e){return no(this,e),this.onChange(),this}fromEuler(e){return ao(this,e,e.order),this}fromAxisAngle(e,r){return Ja(this,e,r),this}slerp(e,r){return ro(this,this,e,r),this}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this[3]=e[r+3],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e}};var Od=1e-6;function fo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ho(t,e,r,i,s,n,a,o,l,u,c,d,f,h,m,p,v){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t[4]=n,t[5]=a,t[6]=o,t[7]=l,t[8]=u,t[9]=c,t[10]=d,t[11]=f,t[12]=h,t[13]=m,t[14]=p,t[15]=v,t}function po(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mo(t,e){let r=e[0],i=e[1],s=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],h=e[11],m=e[12],p=e[13],v=e[14],g=e[15],T=r*o-i*a,x=r*l-s*a,w=r*u-n*a,b=i*l-s*o,y=i*u-n*o,E=s*u-n*l,S=c*p-d*m,M=c*v-f*m,C=c*g-h*m,L=d*v-f*p,O=d*g-h*p,A=f*g-h*v,P=T*A-x*O+w*L+b*C-y*M+E*S;return P?(P=1/P,t[0]=(o*A-l*O+u*L)*P,t[1]=(s*O-i*A-n*L)*P,t[2]=(p*E-v*y+g*b)*P,t[3]=(f*y-d*E-h*b)*P,t[4]=(l*C-a*A-u*M)*P,t[5]=(r*A-s*C+n*M)*P,t[6]=(v*w-m*E-g*x)*P,t[7]=(c*E-f*w+h*x)*P,t[8]=(a*O-o*C+u*S)*P,t[9]=(i*C-r*O-n*S)*P,t[10]=(m*y-p*w+g*T)*P,t[11]=(d*w-c*y-h*T)*P,t[12]=(o*M-a*L-l*S)*P,t[13]=(r*L-i*M+s*S)*P,t[14]=(p*x-m*b-v*T)*P,t[15]=(c*b-d*x+f*T)*P,t):null}function vo(t){let e=t[0],r=t[1],i=t[2],s=t[3],n=t[4],a=t[5],o=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],h=t[12],m=t[13],p=t[14],v=t[15],g=e*a-r*n,T=e*o-i*n,x=e*l-s*n,w=r*o-i*a,b=r*l-s*a,y=i*l-s*o,E=u*m-c*h,S=u*p-d*h,M=u*v-f*h,C=c*p-d*m,L=c*v-f*m,O=d*v-f*p;return g*O-T*L+x*C+w*M-b*S+y*E}function li(t,e,r){let i=e[0],s=e[1],n=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=e[9],h=e[10],m=e[11],p=e[12],v=e[13],g=e[14],T=e[15],x=r[0],w=r[1],b=r[2],y=r[3];return t[0]=x*i+w*o+b*d+y*p,t[1]=x*s+w*l+b*f+y*v,t[2]=x*n+w*u+b*h+y*g,t[3]=x*a+w*c+b*m+y*T,x=r[4],w=r[5],b=r[6],y=r[7],t[4]=x*i+w*o+b*d+y*p,t[5]=x*s+w*l+b*f+y*v,t[6]=x*n+w*u+b*h+y*g,t[7]=x*a+w*c+b*m+y*T,x=r[8],w=r[9],b=r[10],y=r[11],t[8]=x*i+w*o+b*d+y*p,t[9]=x*s+w*l+b*f+y*v,t[10]=x*n+w*u+b*h+y*g,t[11]=x*a+w*c+b*m+y*T,x=r[12],w=r[13],b=r[14],y=r[15],t[12]=x*i+w*o+b*d+y*p,t[13]=x*s+w*l+b*f+y*v,t[14]=x*n+w*u+b*h+y*g,t[15]=x*a+w*c+b*m+y*T,t}function go(t,e,r){let i=r[0],s=r[1],n=r[2],a,o,l,u,c,d,f,h,m,p,v,g;return e===t?(t[12]=e[0]*i+e[4]*s+e[8]*n+e[12],t[13]=e[1]*i+e[5]*s+e[9]*n+e[13],t[14]=e[2]*i+e[6]*s+e[10]*n+e[14],t[15]=e[3]*i+e[7]*s+e[11]*n+e[15]):(a=e[0],o=e[1],l=e[2],u=e[3],c=e[4],d=e[5],f=e[6],h=e[7],m=e[8],p=e[9],v=e[10],g=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=u,t[4]=c,t[5]=d,t[6]=f,t[7]=h,t[8]=m,t[9]=p,t[10]=v,t[11]=g,t[12]=a*i+c*s+m*n+e[12],t[13]=o*i+d*s+p*n+e[13],t[14]=l*i+f*s+v*n+e[14],t[15]=u*i+h*s+g*n+e[15]),t}function yo(t,e,r){let i=r[0],s=r[1],n=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function bo(t,e,r,i){let s=i[0],n=i[1],a=i[2],o=Math.hypot(s,n,a),l,u,c,d,f,h,m,p,v,g,T,x,w,b,y,E,S,M,C,L,O,A,P,R;return Math.abs(o)<Od?null:(o=1/o,s*=o,n*=o,a*=o,l=Math.sin(r),u=Math.cos(r),c=1-u,d=e[0],f=e[1],h=e[2],m=e[3],p=e[4],v=e[5],g=e[6],T=e[7],x=e[8],w=e[9],b=e[10],y=e[11],E=s*s*c+u,S=n*s*c+a*l,M=a*s*c-n*l,C=s*n*c-a*l,L=n*n*c+u,O=a*n*c+s*l,A=s*a*c+n*l,P=n*a*c-s*l,R=a*a*c+u,t[0]=d*E+p*S+x*M,t[1]=f*E+v*S+w*M,t[2]=h*E+g*S+b*M,t[3]=m*E+T*S+y*M,t[4]=d*C+p*L+x*O,t[5]=f*C+v*L+w*O,t[6]=h*C+g*L+b*O,t[7]=m*C+T*L+y*O,t[8]=d*A+p*P+x*R,t[9]=f*A+v*P+w*R,t[10]=h*A+g*P+b*R,t[11]=m*A+T*P+y*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function wo(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ui(t,e){let r=e[0],i=e[1],s=e[2],n=e[4],a=e[5],o=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(r,i,s),t[1]=Math.hypot(n,a,o),t[2]=Math.hypot(l,u,c),t}function xo(t){let e=t[0],r=t[1],i=t[2],s=t[4],n=t[5],a=t[6],o=t[8],l=t[9],u=t[10],c=e*e+r*r+i*i,d=s*s+n*n+a*a,f=o*o+l*l+u*u;return Math.sqrt(Math.max(c,d,f))}var Eo=function(){let t=[0,0,0];return function(e,r){let i=t;ui(i,r);let s=1/i[0],n=1/i[1],a=1/i[2],o=r[0]*s,l=r[1]*n,u=r[2]*a,c=r[4]*s,d=r[5]*n,f=r[6]*a,h=r[8]*s,m=r[9]*n,p=r[10]*a,v=o+d+p,g=0;return v>0?(g=Math.sqrt(v+1)*2,e[3]=.25*g,e[0]=(f-m)/g,e[1]=(h-u)/g,e[2]=(l-c)/g):o>d&&o>p?(g=Math.sqrt(1+o-d-p)*2,e[3]=(f-m)/g,e[0]=.25*g,e[1]=(l+c)/g,e[2]=(h+u)/g):d>p?(g=Math.sqrt(1+d-o-p)*2,e[3]=(h-u)/g,e[0]=(l+c)/g,e[1]=.25*g,e[2]=(f+m)/g):(g=Math.sqrt(1+p-o-d)*2,e[3]=(l-c)/g,e[0]=(h+u)/g,e[1]=(f+m)/g,e[2]=.25*g),e}}();function To(t,e,r,i){let s=e[0],n=e[1],a=e[2],o=e[3],l=s+s,u=n+n,c=a+a,d=s*l,f=s*u,h=s*c,m=n*u,p=n*c,v=a*c,g=o*l,T=o*u,x=o*c,w=i[0],b=i[1],y=i[2];return t[0]=(1-(m+v))*w,t[1]=(f+x)*w,t[2]=(h-T)*w,t[3]=0,t[4]=(f-x)*b,t[5]=(1-(d+v))*b,t[6]=(p+g)*b,t[7]=0,t[8]=(h+T)*y,t[9]=(p-g)*y,t[10]=(1-(d+m))*y,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function So(t,e){let r=e[0],i=e[1],s=e[2],n=e[3],a=r+r,o=i+i,l=s+s,u=r*a,c=i*a,d=i*o,f=s*a,h=s*o,m=s*l,p=n*a,v=n*o,g=n*l;return t[0]=1-d-m,t[1]=c+g,t[2]=f-v,t[3]=0,t[4]=c-g,t[5]=1-u-m,t[6]=h+p,t[7]=0,t[8]=f+v,t[9]=h-p,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Co(t,e,r,i,s){let n=1/Math.tan(e/2),a=1/(i-s);return t[0]=n/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(s+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*s*i*a,t[15]=0,t}function Mo(t,e,r,i,s,n,a){let o=1/(e-r),l=1/(i-s),u=1/(n-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*o,t[13]=(s+i)*l,t[14]=(a+n)*u,t[15]=1,t}function Ao(t,e,r,i){let s=e[0],n=e[1],a=e[2],o=i[0],l=i[1],u=i[2],c=s-r[0],d=n-r[1],f=a-r[2],h=c*c+d*d+f*f;h===0?f=1:(h=1/Math.sqrt(h),c*=h,d*=h,f*=h);let m=l*f-u*d,p=u*c-o*f,v=o*d-l*c;return h=m*m+p*p+v*v,h===0&&(u?o+=1e-6:l?u+=1e-6:l+=1e-6,m=l*f-u*d,p=u*c-o*f,v=o*d-l*c,h=m*m+p*p+v*v),h=1/Math.sqrt(h),m*=h,p*=h,v*=h,t[0]=m,t[1]=p,t[2]=v,t[3]=0,t[4]=d*v-f*p,t[5]=f*m-c*v,t[6]=c*p-d*m,t[7]=0,t[8]=c,t[9]=d,t[10]=f,t[11]=0,t[12]=s,t[13]=n,t[14]=a,t[15]=1,t}var U=class extends Array{constructor(e=1,r=0,i=0,s=0,n=0,a=1,o=0,l=0,u=0,c=0,d=1,f=0,h=0,m=0,p=0,v=1){return super(e,r,i,s,n,a,o,l,u,c,d,f,h,m,p,v),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,r,i,s,n,a,o,l,u,c,d,f,h,m,p,v){return e.length?this.copy(e):(ho(this,e,r,i,s,n,a,o,l,u,c,d,f,h,m,p,v),this)}translate(e,r=this){return go(this,r,e),this}rotate(e,r,i=this){return bo(this,i,e,r),this}scale(e,r=this){return yo(this,r,typeof e=="number"?[e,e,e]:e),this}multiply(e,r){return r?li(this,e,r):li(this,this,e),this}identity(){return po(this),this}copy(e){return fo(this,e),this}fromPerspective({fov:e,aspect:r,near:i,far:s}={}){return Co(this,e,r,i,s),this}fromOrthogonal({left:e,right:r,bottom:i,top:s,near:n,far:a}){return Mo(this,e,r,i,s,n,a),this}fromQuaternion(e){return So(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return mo(this,e),this}compose(e,r,i){return To(this,e,r,i),this}getRotation(e){return Eo(e,this),this}getTranslation(e){return wo(e,this),this}getScaling(e){return ui(e,this),this}getMaxScaleOnAxis(){return xo(this)}lookAt(e,r,i){return Ao(this,e,r,i),this}determinant(){return vo(this)}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this[3]=e[r+3],this[4]=e[r+4],this[5]=e[r+5],this[6]=e[r+6],this[7]=e[r+7],this[8]=e[r+8],this[9]=e[r+9],this[10]=e[r+10],this[11]=e[r+11],this[12]=e[r+12],this[13]=e[r+13],this[14]=e[r+14],this[15]=e[r+15],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e[r+4]=this[4],e[r+5]=this[5],e[r+6]=this[6],e[r+7]=this[7],e[r+8]=this[8],e[r+9]=this[9],e[r+10]=this[10],e[r+11]=this[11],e[r+12]=this[12],e[r+13]=this[13],e[r+14]=this[14],e[r+15]=this[15],e}};function Po(t,e,r="YXZ"){return r==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):r==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):r==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):r==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):r==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):r==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}var Io=new U,ci=class extends Array{constructor(e=0,r=e,i=e,s="YXZ"){return super(e,r,i),this.order=s,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set(e,r=e,i=e){return e.length?this.copy(e):(this[0]=e,this[1]=r,this[2]=i,this.onChange(),this)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.onChange(),this}reorder(e){return this.order=e,this.onChange(),this}fromRotationMatrix(e,r=this.order){return Po(this,e,r),this}fromQuaternion(e,r=this.order){return Io.fromQuaternion(e),this.fromRotationMatrix(Io,r)}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}};var se=class{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new U,this.worldMatrix=new U,this.matrixAutoUpdate=!0,this.position=new D,this.quaternion=new le,this.scale=new D(1),this.rotation=new ci,this.up=new D(0,1,0),this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(e,r=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,r&&e&&e.addChild(this,!1)}addChild(e,r=!0){~this.children.indexOf(e)||this.children.push(e),r&&e.setParent(this,!1)}removeChild(e,r=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),r&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let r=0,i=this.children.length;r<i;r++)this.children[r].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let r=0,i=this.children.length;r<i;r++)this.children[r].traverse(e)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,r=!1){r?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}};var Fd=new U,Rd=new D,kd=new D,di=class extends se{constructor(e,{near:r=.1,far:i=100,fov:s=45,aspect:n=1,left:a,right:o,bottom:l,top:u,zoom:c=1}={}){super();Object.assign(this,{near:r,far:i,fov:s,aspect:n,left:a,right:o,bottom:l,top:u,zoom:c}),this.projectionMatrix=new U,this.viewMatrix=new U,this.projectionViewMatrix=new U,this.worldPosition=new D,this.type=a||o?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:r=this.far,fov:i=this.fov,aspect:s=this.aspect}={}){return Object.assign(this,{near:e,far:r,fov:i,aspect:s}),this.projectionMatrix.fromPerspective({fov:i*(Math.PI/180),aspect:s,near:e,far:r}),this.type="perspective",this}orthographic({near:e=this.near,far:r=this.far,left:i=this.left,right:s=this.right,bottom:n=this.bottom,top:a=this.top,zoom:o=this.zoom}={}){return Object.assign(this,{near:e,far:r,left:i,right:s,bottom:n,top:a,zoom:o}),i/=o,s/=o,n/=o,a/=o,this.projectionMatrix.fromOrthogonal({left:i,right:s,bottom:n,top:a,near:e,far:r}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(Fd.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new D,new D,new D,new D,new D,new D]);let e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let r=0;r<6;r++){let i=1/this.frustum[r].distance();this.frustum[r].multiply(i),this.frustum[r].constant*=i}}frustumIntersectsMesh(e){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===Infinity)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;let r=Rd;r.copy(e.geometry.bounds.center),r.applyMatrix4(e.worldMatrix);let i=e.geometry.bounds.radius*e.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(r,i)}frustumIntersectsSphere(e,r){let i=kd;for(let s=0;s<6;s++){let n=this.frustum[s];if(i.copy(n).dot(e)+n.constant<-r)return!1}return!0}};function Lo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Oo(t,e){let r=e[0],i=e[1],s=e[2],n=e[3],a=r+r,o=i+i,l=s+s,u=r*a,c=i*a,d=i*o,f=s*a,h=s*o,m=s*l,p=n*a,v=n*o,g=n*l;return t[0]=1-d-m,t[3]=c-g,t[6]=f+v,t[1]=c+g,t[4]=1-u-m,t[7]=h-p,t[2]=f-v,t[5]=h+p,t[8]=1-u-d,t}function Fo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ro(t,e,r,i,s,n,a,o,l,u){return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t[4]=n,t[5]=a,t[6]=o,t[7]=l,t[8]=u,t}function ko(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Do(t,e){let r=e[0],i=e[1],s=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=c*a-o*u,f=-c*n+o*l,h=u*n-a*l,m=r*d+i*f+s*h;return m?(m=1/m,t[0]=d*m,t[1]=(-c*i+s*u)*m,t[2]=(o*i-s*a)*m,t[3]=f*m,t[4]=(c*r-s*l)*m,t[5]=(-o*r+s*n)*m,t[6]=h*m,t[7]=(-u*r+i*l)*m,t[8]=(a*r-i*n)*m,t):null}function fi(t,e,r){let i=e[0],s=e[1],n=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=r[0],h=r[1],m=r[2],p=r[3],v=r[4],g=r[5],T=r[6],x=r[7],w=r[8];return t[0]=f*i+h*a+m*u,t[1]=f*s+h*o+m*c,t[2]=f*n+h*l+m*d,t[3]=p*i+v*a+g*u,t[4]=p*s+v*o+g*c,t[5]=p*n+v*l+g*d,t[6]=T*i+x*a+w*u,t[7]=T*s+x*o+w*c,t[8]=T*n+x*l+w*d,t}function _o(t,e,r){let i=e[0],s=e[1],n=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=r[0],h=r[1];return t[0]=i,t[1]=s,t[2]=n,t[3]=a,t[4]=o,t[5]=l,t[6]=f*i+h*a+u,t[7]=f*s+h*o+c,t[8]=f*n+h*l+d,t}function zo(t,e,r){let i=e[0],s=e[1],n=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=Math.sin(r),h=Math.cos(r);return t[0]=h*i+f*a,t[1]=h*s+f*o,t[2]=h*n+f*l,t[3]=h*a-f*i,t[4]=h*o-f*s,t[5]=h*l-f*n,t[6]=u,t[7]=c,t[8]=d,t}function No(t,e,r){let i=r[0],s=r[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function $o(t,e){let r=e[0],i=e[1],s=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],h=e[11],m=e[12],p=e[13],v=e[14],g=e[15],T=r*o-i*a,x=r*l-s*a,w=r*u-n*a,b=i*l-s*o,y=i*u-n*o,E=s*u-n*l,S=c*p-d*m,M=c*v-f*m,C=c*g-h*m,L=d*v-f*p,O=d*g-h*p,A=f*g-h*v,P=T*A-x*O+w*L+b*C-y*M+E*S;return P?(P=1/P,t[0]=(o*A-l*O+u*L)*P,t[1]=(l*C-a*A-u*M)*P,t[2]=(a*O-o*C+u*S)*P,t[3]=(s*O-i*A-n*L)*P,t[4]=(r*A-s*C+n*M)*P,t[5]=(i*C-r*O-n*S)*P,t[6]=(p*E-v*y+g*b)*P,t[7]=(v*w-m*E-g*x)*P,t[8]=(m*y-p*w+g*T)*P,t):null}var hi=class extends Array{constructor(e=1,r=0,i=0,s=0,n=1,a=0,o=0,l=0,u=1){return super(e,r,i,s,n,a,o,l,u),this}set(e,r,i,s,n,a,o,l,u){return e.length?this.copy(e):(Ro(this,e,r,i,s,n,a,o,l,u),this)}translate(e,r=this){return _o(this,r,e),this}rotate(e,r=this){return zo(this,r,e),this}scale(e,r=this){return No(this,r,e),this}multiply(e,r){return r?fi(this,e,r):fi(this,this,e),this}identity(){return ko(this),this}copy(e){return Fo(this,e),this}fromMatrix4(e){return Lo(this,e),this}fromQuaternion(e){return Oo(this,e),this}fromBasis(e,r,i){return this.set(e[0],e[1],e[2],r[0],r[1],r[2],i[0],i[1],i[2]),this}inverse(e=this){return Do(this,e),this}getNormalMatrix(e){return $o(this,e),this}};var Dd=0,pe=class extends se{constructor(e,{geometry:r,program:i,mode:s=e.TRIANGLES,frustumCulled:n=!0,renderOrder:a=0}={}){super();e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=Dd++,this.geometry=r,this.program=i,this.mode=s,this.frustumCulled=n,this.renderOrder=a,this.modelViewMatrix=new U,this.normalMatrix=new hi,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e})),e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let r=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:r}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}))}};var Vo=new Uint8Array(4);function Bo(t){return(t&t-1)==0}var _d=1,ue=class{constructor(e,{image:r,target:i=e.TEXTURE_2D,type:s=e.UNSIGNED_BYTE,format:n=e.RGBA,internalFormat:a=n,wrapS:o=e.CLAMP_TO_EDGE,wrapT:l=e.CLAMP_TO_EDGE,generateMipmaps:u=!0,minFilter:c=u?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:d=e.LINEAR,premultiplyAlpha:f=!1,unpackAlignment:h=4,flipY:m=i==e.TEXTURE_2D,anisotropy:p=0,level:v=0,width:g,height:T=g}={}){this.gl=e,this.id=_d++,this.image=r,this.target=i,this.type=s,this.format=n,this.internalFormat=a,this.minFilter=c,this.magFilter=d,this.wrapS=o,this.wrapT=l,this.generateMipmaps=u,this.premultiplyAlpha=f,this.unpackAlignment=h,this.flipY=m,this.anisotropy=Math.min(p,this.gl.renderer.parameters.maxAnisotropy),this.level=v,this.width=g,this.height=T,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){let r=!(this.image===this.store.image&&!this.needsUpdate);if((r||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),!!r){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let i=0;i<6;i++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,this.level,this.internalFormat,this.format,this.type,this.image[i]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let i=0;i<this.image.length;i++)this.gl.compressedTexImage2D(this.target,i,this.internalFormat,this.image[i].width,this.image[i].height,0,this.image[i].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(!this.gl.renderer.isWebgl2&&(!Bo(this.image.width)||!Bo(this.image.height))?(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR):this.gl.generateMipmap(this.target)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let i=0;i<6;i++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Vo);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Vo);this.store.image=this.image}}};var mt=class{constructor(e,{width:r=e.canvas.width,height:i=e.canvas.height,target:s=e.FRAMEBUFFER,color:n=1,depth:a=!0,stencil:o=!1,depthTexture:l=!1,wrapS:u=e.CLAMP_TO_EDGE,wrapT:c=e.CLAMP_TO_EDGE,minFilter:d=e.LINEAR,magFilter:f=d,type:h=e.UNSIGNED_BYTE,format:m=e.RGBA,internalFormat:p=m,unpackAlignment:v,premultiplyAlpha:g}={}){this.gl=e,this.width=r,this.height=i,this.depth=a,this.buffer=this.gl.createFramebuffer(),this.target=s,this.gl.bindFramebuffer(this.target,this.buffer),this.textures=[];let T=[];for(let x=0;x<n;x++)this.textures.push(new ue(e,{width:r,height:i,wrapS:u,wrapT:c,minFilter:d,magFilter:f,type:h,format:m,internalFormat:p,unpackAlignment:v,premultiplyAlpha:g,flipY:!1,generateMipmaps:!1})),this.textures[x].update(),this.gl.framebufferTexture2D(this.target,this.gl.COLOR_ATTACHMENT0+x,this.gl.TEXTURE_2D,this.textures[x].texture,0),T.push(this.gl.COLOR_ATTACHMENT0+x);T.length>1&&this.gl.renderer.drawBuffers(T),this.texture=this.textures[0],l&&(this.gl.renderer.isWebgl2||this.gl.renderer.getExtension("WEBGL_depth_texture"))?(this.depthTexture=new ue(e,{width:r,height:i,minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST,format:this.gl.DEPTH_COMPONENT,internalFormat:e.renderer.isWebgl2?this.gl.DEPTH_COMPONENT16:this.gl.DEPTH_COMPONENT,type:this.gl.UNSIGNED_INT}),this.depthTexture.update(),this.gl.framebufferTexture2D(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.texture,0)):(a&&!o&&(this.depthBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,r,i),this.gl.framebufferRenderbuffer(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depthBuffer)),o&&!a&&(this.stencilBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.stencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.STENCIL_INDEX8,r,i),this.gl.framebufferRenderbuffer(this.target,this.gl.STENCIL_ATTACHMENT,this.gl.RENDERBUFFER,this.stencilBuffer)),a&&o&&(this.depthStencilBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthStencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_STENCIL,r,i),this.gl.framebufferRenderbuffer(this.target,this.gl.DEPTH_STENCIL_ATTACHMENT,this.gl.RENDERBUFFER,this.depthStencilBuffer))),this.gl.bindFramebuffer(this.target,null)}};function qo(t,e){return t[0]=e[0],t[1]=e[1],t}function jo(t,e,r){return t[0]=e,t[1]=r,t}function pi(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function mi(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Go(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function Uo(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function vt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function Ho(t,e){var r=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(r*r+i*i)}function Wo(t,e){var r=e[0]-t[0],i=e[1]-t[1];return r*r+i*i}function vi(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function Yo(t){var e=t[0],r=t[1];return e*e+r*r}function Xo(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Qo(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Zo(t,e){var r=e[0],i=e[1],s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t}function Jo(t,e){return t[0]*e[0]+t[1]*e[1]}function gi(t,e){return t[0]*e[1]-t[1]*e[0]}function Ko(t,e,r,i){var s=e[0],n=e[1];return t[0]=s+i*(r[0]-s),t[1]=n+i*(r[1]-n),t}function el(t,e,r){var i=e[0],s=e[1];return t[0]=r[0]*i+r[3]*s+r[6],t[1]=r[1]*i+r[4]*s+r[7],t}function tl(t,e,r){let i=e[0],s=e[1];return t[0]=r[0]*i+r[4]*s+r[12],t[1]=r[1]*i+r[5]*s+r[13],t}function rl(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ee=class extends Array{constructor(e=0,r=e){return super(e,r),this}get x(){return this[0]}get y(){return this[1]}set x(e){this[0]=e}set y(e){this[1]=e}set(e,r=e){return e.length?this.copy(e):(jo(this,e,r),this)}copy(e){return qo(this,e),this}add(e,r){return r?pi(this,e,r):pi(this,this,e),this}sub(e,r){return r?mi(this,e,r):mi(this,this,e),this}multiply(e){return e.length?Go(this,this,e):vt(this,this,e),this}divide(e){return e.length?Uo(this,this,e):vt(this,this,1/e),this}inverse(e=this){return Qo(this,e),this}len(){return vi(this)}distance(e){return e?Ho(this,e):vi(this)}squaredLen(){return this.squaredDistance()}squaredDistance(e){return e?Wo(this,e):Yo(this)}negate(e=this){return Xo(this,e),this}cross(e,r){return r?gi(e,r):gi(this,e)}scale(e){return vt(this,this,e),this}normalize(){return Zo(this,this),this}dot(e){return Jo(this,e)}equals(e){return rl(this,e)}applyMatrix3(e){return el(this,this,e),this}applyMatrix4(e){return tl(this,this,e),this}lerp(e,r){Ko(this,this,e,r)}clone(){return new Ee(this[0],this[1])}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e}};var yi=class extends _e{constructor(e,{attributes:r={}}={}){Object.assign(r,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,r)}};var bi=class{constructor(e,{width:r,height:i,dpr:s,wrapS:n=e.CLAMP_TO_EDGE,wrapT:a=e.CLAMP_TO_EDGE,minFilter:o=e.LINEAR,magFilter:l=e.LINEAR,geometry:u=new yi(e),targetOnly:c=null}={}){this.gl=e,this.options={wrapS:n,wrapT:a,minFilter:o,magFilter:l},this.passes=[],this.geometry=u,this.uniform={value:null},this.targetOnly=c;let d=this.fbo={read:null,write:null,swap:()=>{let f=d.read;d.read=d.write,d.write=f}};this.resize({width:r,height:i,dpr:s})}addPass({vertex:e=zd,fragment:r=Nd,uniforms:i={},textureUniform:s="tMap",enabled:n=!0}={}){i[s]={value:this.fbo.read.texture};let a=new he(this.gl,{vertex:e,fragment:r,uniforms:i}),l={mesh:new pe(this.gl,{geometry:this.geometry,program:a}),program:a,uniforms:i,enabled:n,textureUniform:s};return this.passes.push(l),l}resize({width:e,height:r,dpr:i}={}){i&&(this.dpr=i),e&&(this.width=e,this.height=r||e),i=this.dpr||this.gl.renderer.dpr,e=Math.floor((this.width||this.gl.renderer.width)*i),r=Math.floor((this.height||this.gl.renderer.height)*i),this.options.width=e,this.options.height=r,this.fbo.read=new mt(this.gl,this.options),this.fbo.write=new mt(this.gl,this.options)}render({scene:e,camera:r,texture:i,target:s=null,update:n=!0,sort:a=!0,frustumCull:o=!0}){let l=this.passes.filter(u=>u.enabled);i||(this.gl.renderer.render({scene:e,camera:r,target:l.length||!s&&this.targetOnly?this.fbo.write:s,update:n,sort:a,frustumCull:o}),this.fbo.swap()),l.forEach((u,c)=>{u.mesh.program.uniforms[u.textureUniform].value=!c&&i?i:this.fbo.read.texture,this.gl.renderer.render({scene:u.mesh,target:c===l.length-1&&(s||!this.targetOnly)?s:this.fbo.write,clear:!0}),this.fbo.swap()}),this.uniform.value=this.fbo.read.texture}},zd=`
    attribute vec2 uv;
    attribute vec2 position;

    varying vec2 vUv;

    void main() {
        vUv = uv;
        gl_Position = vec4(position, 0, 1);
    }
`,Nd=`
    precision highp float;

    uniform sampler2D tMap;
    varying vec2 vUv;

    void main() {
        gl_FragColor = texture2D(tMap, vUv);
    }
`;var $d=`
    precision highp float;
    precision highp int;

    attribute vec3 position;
    attribute vec3 normal;

    uniform mat3 normalMatrix;
    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;

    varying vec3 vNormal;

    void main() {
        vNormal = normalize(normalMatrix * normal);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
`,Vd=`
    precision highp float;
    precision highp int;

    varying vec3 vNormal;

    void main() {
        gl_FragColor.rgb = normalize(vNormal);
        gl_FragColor.a = 1.0;
    }
`;function il(t){return new he(t,{vertex:$d,fragment:Vd,cullFace:null})}var Bd=new D,qd=new D,jd=new D,Gd=new D,Ud=new le,Hd=new le,Wd=new le,Yd=new le,wi=class{constructor(e,r=1){this.data=e,this.elapsed=0,this.weight=r,this.loop=!0,this.startTime=e.reduce((i,{times:s})=>Math.min(i,s[0]),Infinity),this.endTime=e.reduce((i,{times:s})=>Math.max(i,s[s.length-1]),0),this.duration=this.endTime-this.startTime}update(e=1,r){let i=r?1:this.weight/e,s=(this.loop?this.elapsed%this.duration:Math.min(this.elapsed,this.duration-.001))+this.startTime;this.data.forEach(({node:n,transform:a,interpolation:o,times:l,values:u})=>{let c=Math.max(1,l.findIndex(T=>T>s))-1,d=c+1,f=(s-l[c])/(l[d]-l[c]);o==="STEP"&&(f=0);let h=Bd,m=qd,p=jd,v=Gd,g=3;a==="quaternion"&&(h=Ud,m=Hd,p=Wd,v=Yd,g=4),o==="CUBICSPLINE"?(h.fromArray(u,c*g*3+g*1),m.fromArray(u,c*g*3+g*2),p.fromArray(u,d*g*3+g*0),v.fromArray(u,d*g*3+g*1),h=this.cubicSplineInterpolate(f,h,m,p,v),g===4&&h.normalize()):(h.fromArray(u,c*g),v.fromArray(u,d*g),g===4?h.slerp(v,f):h.lerp(v,f)),g===4?n[a].slerp(h,i):n[a].lerp(h,i)})}cubicSplineInterpolate(e,r,i,s,n){let a=e*e,o=a*e,l=3*a-2*o,u=o-a,c=1-l,d=u-a+e;for(let f=0;f<r.length;f++)r[f]=c*r[f]+d*(1-e)*i[f]+l*n[f]+u*e*s[f];return r}};var sl=new U,Xd=new U,xi=class extends pe{constructor(e,{skeleton:r,geometry:i,program:s,mode:n=e.TRIANGLES}={}){super(e,{geometry:i,program:s,mode:n});this.skeleton=r,this.program=s,this.createBoneTexture(),this.animations=[]}createBoneTexture(){if(!this.skeleton.joints.length)return;let e=Math.max(4,Math.pow(2,Math.ceil(Math.log(Math.sqrt(this.skeleton.joints.length*4))/Math.LN2)));this.boneMatrices=new Float32Array(e*e*4),this.boneTextureSize=e,this.boneTexture=new ue(this.gl,{image:this.boneMatrices,generateMipmaps:!1,type:this.gl.FLOAT,internalFormat:this.gl.renderer.isWebgl2?this.gl.RGBA32F:this.gl.RGBA,minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST,flipY:!1,width:e})}updateUniforms(){this.skeleton.joints.forEach((e,r)=>{sl.multiply(e.worldMatrix,e.bindInverse),this.boneMatrices.set(sl,r*16)}),this.boneTexture&&(this.boneTexture.needsUpdate=!0)}draw({camera:e}={}){this.program.uniforms.boneTexture||Object.assign(this.program.uniforms,{boneTexture:{value:this.boneTexture},boneTextureSize:{value:this.boneTextureSize}}),this.updateUniforms();let r=this.worldMatrix;this.worldMatrix=Xd,super.draw({camera:e}),this.worldMatrix=r}};var nl={5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array,"image/jpeg":Uint8Array,"image/png":Uint8Array},Qd={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Zd={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Jd={translation:"position",rotation:"quaternion",scale:"scale"},Ei=class{static load(e,r){return k(this,null,function*(){let i=r.split("/").slice(0,-1).join("/")+"/",s=yield this.parseDesc(r);return yield this.parse(e,s,i)})}static parse(e,r,i){return k(this,null,function*(){(r.asset===void 0||r.asset.version[0]<2)&&console.warn("Only GLTF >=2.0 supported. Attempting to parse.");let s=yield this.loadBuffers(r,i);e.renderer.bindVertexArray(null);let n=this.parseBufferViews(e,r,s),a=this.parseImages(e,r,i,n),o=this.parseTextures(e,r,a),l=this.parseMaterials(e,r,o),u=this.parseSkins(e,r,n),c=this.parseMeshes(e,r,n,l,u),d=this.parseNodes(e,r,c,u);this.populateSkins(u,d);let f=this.parseAnimations(e,r,d,n),h=this.parseScenes(r,d),m=h[r.scene];for(let p=d.length;p>=0;p--)d[p]||d.splice(p,1);return{json:r,buffers:s,bufferViews:n,images:a,textures:o,materials:l,meshes:c,nodes:d,animations:f,scenes:h,scene:m}})}static parseDesc(e){return k(this,null,function*(){return e.match(/\.glb$/)?yield fetch(e).then(r=>r.arrayBuffer()).then(r=>this.unpackGLB(r)):yield fetch(e).then(r=>r.json())})}static unpackGLB(e){let r=new Uint32Array(e,0,3);if(r[0]!==1179937895)throw new Error("Invalid glTF asset.");if(r[1]!==2)throw new Error(`Unsupported glTF binary version, "${r[1]}".`);let i=new Uint32Array(e,12,2),s=20,n=i[0];if(i[1]!==1313821514)throw new Error("Unexpected GLB layout.");let a=new TextDecoder().decode(e.slice(s,s+n)),o=JSON.parse(a);if(s+n===e.byteLength)return o;let l=new Uint32Array(e,s+n,2);if(l[1]!==5130562)throw new Error("Unexpected GLB layout.");let u=s+n+8,c=l[0],d=e.slice(u,u+c);return o.buffers[0].binary=d,o}static resolveURI(e,r){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(r)&&/^\//.test(e)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:r+e)}static loadBuffers(e,r){return k(this,null,function*(){return e.buffers?yield Promise.all(e.buffers.map(i=>{if(i.binary)return i.binary;let s=this.resolveURI(i.uri,r);return fetch(s).then(n=>n.arrayBuffer())})):null})}static parseBufferViews(e,r,i){if(!r.bufferViews)return null;let s=r.bufferViews.map(n=>Object.assign({},n));return r.meshes&&r.meshes.forEach(({primitives:n})=>{n.forEach(({attributes:a,indices:o})=>{for(let l in a)s[r.accessors[a[l]].bufferView].isAttribute=!0;o!==void 0&&(s[r.accessors[o].bufferView].isAttribute=!0,s[r.accessors[o].bufferView].target=e.ELEMENT_ARRAY_BUFFER)})}),r.accessors.forEach(({bufferView:n,componentType:a})=>{s[n].componentType=a}),r.images&&r.images.forEach(({uri:n,bufferView:a,mimeType:o})=>{a!==void 0&&(s[a].mimeType=o)}),s.forEach(({buffer:n,byteOffset:a=0,byteLength:o,byteStride:l,target:u=e.ARRAY_BUFFER,name:c,extensions:d,extras:f,componentType:h,mimeType:m,isAttribute:p},v)=>{let g=nl[h||m],T=g.BYTES_PER_ELEMENT,x=new g(i[n],a,o/T);if(s[v].data=x,s[v].originalBuffer=i[n],!p)return;let w=e.createBuffer();e.bindBuffer(u,w),e.renderer.state.boundBuffer=w,e.bufferData(u,x,e.STATIC_DRAW),s[v].buffer=w}),s}static parseImages(e,r,i,s){return r.images?r.images.map(({uri:n,bufferView:a,mimeType:o,name:l})=>{let u=new Image;if(u.name=l,n)u.src=this.resolveURI(n,i);else if(a!==void 0){let{data:c}=s[a],d=new Blob([c],{type:o});u.src=URL.createObjectURL(d)}return u.ready=new Promise(c=>{u.onload=()=>c()}),u}):null}static parseTextures(e,r,i){return r.textures?r.textures.map(({sampler:s,source:n,name:a,extensions:o,extras:l})=>{let u={flipY:!1,wrapS:e.REPEAT,wrapT:e.REPEAT},c=s!==void 0?r.samplers[s]:null;c&&["magFilter","minFilter","wrapS","wrapT"].forEach(h=>{c[h]&&(u[h]=c[h])});let d=new ue(e,u);d.name=a;let f=i[n];return f.ready.then(()=>d.image=f),d}):null}static parseMaterials(e,r,i){return r.materials?r.materials.map(({name:s,extensions:n,extras:a,pbrMetallicRoughness:o={},normalTexture:l,occlusionTexture:u,emissiveTexture:c,emissiveFactor:d=[0,0,0],alphaMode:f="OPAQUE",alphaCutoff:h=.5,doubleSided:m=!1})=>{let{baseColorFactor:p=[1,1,1,1],baseColorTexture:v,metallicFactor:g=1,roughnessFactor:T=1,metallicRoughnessTexture:x}=o;return v&&(v.texture=i[v.index]),l&&(l.texture=i[l.index]),x&&(x.texture=i[x.index]),u&&(u.texture=i[u.index]),c&&(c.texture=i[c.index]),{name:s,baseColorFactor:p,baseColorTexture:v,metallicFactor:g,roughnessFactor:T,metallicRoughnessTexture:x,normalTexture:l,occlusionTexture:u,emissiveTexture:c,emissiveFactor:d,alphaMode:f,alphaCutoff:h,doubleSided:m}}):null}static parseSkins(e,r,i){return r.skins?r.skins.map(({inverseBindMatrices:s,skeleton:n,joints:a})=>({inverseBindMatrices:this.parseAccessor(s,r,i),skeleton:n,joints:a})):null}static parseMeshes(e,r,i,s,n){return r.meshes?r.meshes.map(({primitives:a,weights:o,name:l,extensions:u,extras:c},d)=>{let f=0,h=!1;return r.nodes&&r.nodes.forEach(({mesh:m,skin:p})=>{m===d&&(f++,p!==void 0&&(h=p))}),a=this.parsePrimitives(e,a,r,i,s,f).map(({geometry:m,program:p,mode:v})=>{let g=typeof h=="number"?new xi(e,{skeleton:n[h],geometry:m,program:p,mode:v}):new pe(e,{geometry:m,program:p,mode:v});return g.name=l,g.geometry.isInstanced&&(g.numInstances=f,g.frustumCulled=!1),g}),{primitives:a,weights:o,name:l}}):null}static parsePrimitives(e,r,i,s,n,a){return r.map(({attributes:o,indices:l,material:u,mode:c=4,targets:d,extensions:f,extras:h})=>{let m=new _e(e);for(let v in o)m.addAttribute(Zd[v],this.parseAccessor(o[v],i,s));l!==void 0&&m.addAttribute("index",this.parseAccessor(l,i,s)),a>1&&m.addAttribute("instanceMatrix",{instanced:1,size:16,data:new Float32Array(a*16)});let p=new il(e);return u!==void 0&&(p.gltfMaterial=n[u]),{geometry:m,program:p,mode:c}})}static parseAccessor(e,r,i){let{bufferView:s,byteOffset:n=0,componentType:a,normalized:o=!1,count:l,type:u,min:c,max:d,sparse:f}=r.accessors[e],{data:h,originalBuffer:m,buffer:p,byteOffset:v=0,byteStride:g=0,target:T}=i[s],x=Qd[u],w=nl[a],b=h.BYTES_PER_ELEMENT,y=n/b,E=g/b;return{data:!!g&&E!==x?h:new w(m,n+v,l*x),size:x,type:a,normalized:o,buffer:p,stride:g,offset:n,count:l,min:c,max:d}}static parseNodes(e,r,i,s){if(!r.nodes)return null;let n=r.nodes.map(({camera:a,children:o,skin:l,matrix:u,mesh:c,rotation:d,scale:f,translation:h,weights:m,name:p,extensions:v,extras:g})=>{let T=new se;p&&(T.name=p),u?(T.matrix.copy(u),T.decompose()):(d&&T.quaternion.copy(d),f&&T.scale.copy(f),h&&T.position.copy(h),T.updateMatrix());let x=!1,w=!0;if(c!==void 0&&i[c].primitives.forEach(b=>{b.geometry.isInstanced&&(x=!0,b.instanceCount?w=!1:b.instanceCount=0,T.matrix.toArray(b.geometry.attributes.instanceMatrix.data,b.instanceCount*16),b.instanceCount++,b.instanceCount===b.numInstances&&(delete b.numInstances,delete b.instanceCount,b.geometry.attributes.instanceMatrix.needsUpdate=!0)),x?w&&b.setParent(T):b.setParent(T)}),x){if(!w)return null;T.matrix.identity(),T.decompose()}return T});return r.nodes.forEach(({children:a=[]},o)=>{a.forEach(l=>{!n[l]||n[l].setParent(n[o])})}),n}static populateSkins(e,r){!e||e.forEach(i=>{i.joints=i.joints.map((s,n)=>{let a=r[s];return a.bindInverse=new U(...i.inverseBindMatrices.data.slice(n*16,(n+1)*16)),a}),i.skeleton&&(i.skeleton=r[i.skeleton])})}static parseAnimations(e,r,i,s){return r.animations?r.animations.map(({channels:n,samplers:a,name:o})=>{let l=n.map(({sampler:u,target:c})=>{let{input:d,interpolation:f="LINEAR",output:h}=a[u],{node:m,path:p}=c,v=i[m],g=Jd[p],T=this.parseAccessor(d,r,s).data,x=this.parseAccessor(h,r,s).data;return{node:v,transform:g,interpolation:f,times:T,values:x}});return{name:o,animation:new wi(l)}}):null}static parseScenes(e,r){return e.scenes?e.scenes.map(({nodes:i=[],name:s,extensions:n,extras:a})=>i.reduce((o,l)=>(r[l]&&o.push(r[l]),o),[])):null}};var al=`
    attribute vec3 position;
    attribute vec3 normal;

    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix
    ;
    uniform mat3 normalMatrix;
    varying vec3 vNormal;

    void main() {
        vNormal = normalize(normalMatrix * normal);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
`;var ol=`
    precision highp float;

    varying vec3 vNormal;
    
    uniform vec3 uColor;
    uniform float uLight;

    void main() {
        vec3 normal = normalize(vNormal);
        float lighting = dot(normal, normalize(vec3(-0.3, 0.8, 0.6)));
        gl_FragColor.rgb = uColor + lighting * 0.1 * uLight;
        gl_FragColor.a = 1.0;
    }
`;var Kd=`
    precision highp float;

    // Default uniform for previous pass is 'tMap'.
    // Can change this using the 'textureUniform' property
    // when adding a pass.
    uniform sampler2D tMap;
    uniform vec2 uResolution;
    varying vec2 vUv;

    vec3 mod289(vec3 x) {
        return x - floor(x * (1.0 / 289.0)) * 289.0;
    }

    vec4 mod289(vec4 x) {
        return x - floor(x * (1.0 / 289.0)) * 289.0;
    }

    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }

    vec4 taylorInvSqrt(vec4 r) {
        return 1.79284291400159 - 0.85373472095314 * r;
    }

    vec3 fade(vec3 t) {
        return t*t*t*(t*(t*6.0-15.0)+10.0);
    }

    float cnoise(vec3 P) {
        vec3 Pi0 = floor(P); // Integer part for indexing
        vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
        Pi0 = mod289(Pi0);
        Pi1 = mod289(Pi1);
        vec3 Pf0 = fract(P); // Fractional part for interpolation
        vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
        vec4 iy = vec4(Pi0.yy, Pi1.yy);
        vec4 iz0 = Pi0.zzzz;
        vec4 iz1 = Pi1.zzzz;

        vec4 ixy = permute(permute(ix) + iy);
        vec4 ixy0 = permute(ixy + iz0);
        vec4 ixy1 = permute(ixy + iz1);

        vec4 gx0 = ixy0 * (1.0 / 7.0);
        vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
        gx0 = fract(gx0);
        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
        vec4 sz0 = step(gz0, vec4(0.0));
        gx0 -= sz0 * (step(0.0, gx0) - 0.5);
        gy0 -= sz0 * (step(0.0, gy0) - 0.5);

        vec4 gx1 = ixy1 * (1.0 / 7.0);
        vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
        gx1 = fract(gx1);
        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
        vec4 sz1 = step(gz1, vec4(0.0));
        gx1 -= sz1 * (step(0.0, gx1) - 0.5);
        gy1 -= sz1 * (step(0.0, gy1) - 0.5);

        vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
        vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
        vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
        vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
        vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
        vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
        vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
        vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
        g000 *= norm0.x;
        g010 *= norm0.y;
        g100 *= norm0.z;
        g110 *= norm0.w;
        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
        g001 *= norm1.x;
        g011 *= norm1.y;
        g101 *= norm1.z;
        g111 *= norm1.w;

        float n000 = dot(g000, Pf0);
        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
        float n111 = dot(g111, Pf1);

        vec3 fade_xyz = fade(Pf0);
        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
        return 2.2 * n_xyz;
    }

    vec4 fxaa(sampler2D tex, vec2 uv, vec2 resolution) {
        vec2 pixel = vec2(1) / resolution;
        vec3 l = vec3(0.299, 0.587, 0.114);
        float lNW = dot(texture2D(tex, uv + vec2(-1, -1) * pixel).rgb, l);
        float lNE = dot(texture2D(tex, uv + vec2( 1, -1) * pixel).rgb, l);
        float lSW = dot(texture2D(tex, uv + vec2(-1,  1) * pixel).rgb, l);
        float lSE = dot(texture2D(tex, uv + vec2( 1,  1) * pixel).rgb, l);
        float lM  = dot(texture2D(tex, uv).rgb, l);
        float lMin = min(lM, min(min(lNW, lNE), min(lSW, lSE)));
        float lMax = max(lM, max(max(lNW, lNE), max(lSW, lSE)));

        vec2 dir = vec2(
            -((lNW + lNE) - (lSW + lSE)),
            ((lNW + lSW) - (lNE + lSE))
        );

        float dirReduce = max((lNW + lNE + lSW + lSE) * 0.03125, 0.0078125);
        float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
        dir = min(vec2(8, 8), max(vec2(-8, -8), dir * rcpDirMin)) * pixel;

        vec3 rgbA = 0.5 * (
            texture2D(tex, uv + dir * (1.0 / 3.0 - 0.5)).rgb +
            texture2D(tex, uv + dir * (2.0 / 3.0 - 0.5)).rgb);
        vec3 rgbB = rgbA * 0.5 + 0.25 * (
            texture2D(tex, uv + dir * -0.5).rgb +
            texture2D(tex, uv + dir * 0.5).rgb);
        float lB = dot(rgbB, l);
        return mix(
            vec4(rgbB, 1),
            vec4(rgbA, 1),
            max(sign(lB - lMin), 0.0) * max(sign(lB - lMax), 0.0)
        );
    }


    void main() {
        vec2 uv = vUv;

        float noise = cnoise(vec3(uv, cos(.1 * 0.1)) * 2.0 + .1 * 0.5);

        uv.x += noise * .1;
        uv.y += noise * .1;


        vec4 raw = texture2D(tMap, uv);
        vec4 aa = fxaa(tMap, uv, uResolution);

        gl_FragColor = raw;
    }
`,ll=class extends I{constructor(t){super(t);this.isPlaying=!1,this.isGltfLoaded=!1,this.wrapperBCR=this.el.getBoundingClientRect(),this.onRender=this.onRender.bind(this),this.onResize=this.onResize.bind(this),this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.gltfUrl=this.getData("gltf"),this.gltfColors=[{value:this.getData("wires-color")?this.hexToGlsl(this.getData("wires-color")):new D(0,.886,.929)}],this.gltfDefaultColorRGB=this.getData("wires-color")?this.hexToRgb(this.getData("wires-color")):{r:0,g:0,b:0},this.gltfHoverColorRGB=this.getData("wires-color-hover")?this.hexToRgb(this.getData("wires-color-hover")):{r:0,g:0,b:0},this.programs=[],this.rotationX=.01,this.rotationY=.01,this.rotationZ=0,this.light=0}init(){this.bindUI(),this.bindEvents(),this.initCanvas(),this.hoverEnterTween=new we({from:0,to:1,duration:0,onProgress:t=>{this.animeEnterColor(t)}}),this.hoverLeaveTween=new we({from:0,to:1,duration:0,onProgress:t=>{this.animeLeaveColor(t)}})}destroy(){super.destroy(),this.unbindEvents(),this.onStop()}bindUI(){this.ui={},this.ui.$el=this.el,this.ui.$wrapper=this.$("wrap")[0],this.ui.$panel=this.$("panel")[0],this.ui.$parent=Y(this.ui.$el,".c-phone")}bindEvents(){window.addEventListener("resize",this.onResize),this.ui.$parent.addEventListener("pointerenter",this.onEnter),this.ui.$parent.addEventListener("pointerleave",this.onLeave)}unbindEvents(){window.removeEventListener("resize",this.onResize),this.ui.$parent.removeEventListener("pointerenter",this.onEnter),this.ui.$parent.removeEventListener("pointerleave",this.onLeave)}initCanvas(){return k(this,null,function*(){this.renderer=new ai({dpr:1,antialias:!0,webgl:1,alpha:!0}),this.renderer.setSize(this.wrapperBCR.width,this.wrapperBCR.height),this.gl=this.renderer.gl,this.ui.$wrapper.appendChild(this.gl.canvas),this.post=new bi(this.gl),this.uResolution={value:new Ee(this.gl.canvas.width,this.gl.canvas.height)},this.initScene(),this.initCamera(),yield this.initShape(),this.onResize(!0),this.onRender()})}initScene(){this.scene=new se}initCamera(){this.camera=new di(this.gl),this.camera.fov=45,this.camera.position.z=2.65,this.camera.lookAt([0,0,0])}initShape(){return k(this,null,function*(){let t=this.gltfUrl.split("?")[0];this.gltf=yield Ei.load(this.gl,t),this.addGltf(this.gltf);let e=this.post.addPass({fragment:Kd,uniforms:{uResolution:this.uResolution}})})}onEnter(){var t;(t=this.hoverEnterTween)==null||t.start()}onLeave(){var t;(t=this.hoverLeaveTween)==null||t.start()}onToggle(){this.isPlaying?this.onStop():this.isPlaying||this.onPlay()}onPlay(){this.isPlaying||(this.isPlaying=!0,Ti.default.add(this.onRender))}onStop(){!this.isPlaying||(this.isPlaying=!1,Ti.default.remove(this.onRender))}onResize(t=!1){let e=this.el.offsetWidth,r=this.el.offsetHeight;e==this.wrapperBCR.width&&!t||r==this.wrapperBCR.height&&!t||(this.wrapperBCR=this.el.getBoundingClientRect(),this.gl.canvas.style.width=`${this.wrapperBCR.width}px`,this.gl.canvas.style.height=`${this.wrapperBCR.height}px`,this.renderer.setSize(this.wrapperBCR.width,this.wrapperBCR.height),this.aspect=this.wrapperBCR.width/this.wrapperBCR.height,this.camera.perspective({aspect:this.aspect}),this.post.resize(),this.uResolution={value:new Ee(this.gl.canvas.width,this.gl.canvas.height)})}onRender(){!this.isGltfLoaded||(this.renderer.render({scene:this.scene,camera:this.camera,sort:!1,frustumCull:!1}),this.scene.children[0].rotation.x+=this.rotationX,this.scene.children[0].rotation.y+=this.rotationY,this.scene.children[0].rotation.z+=this.rotationZ)}addGltf(){this.gltf.scene.forEach((e,r)=>{e.setParent(this.scene),e.traverse(i=>{i.program&&(i.program=this.createProgram(i,r),this.programs.push(i.program))})}),this.scene.updateMatrixWorld(),this.isGltfLoaded=!0}createProgram(t,e){let r=t.program.gltfMaterial||{},i=this.renderer.isWebgl2?`#version 300 es
            #define attribute in
            #define varying out
            #define texture2D texture
        `:"",s=this.renderer.isWebgl2?`#version 300 es
            precision highp float;
            #define varying in
            #define texture2D texture
            #define gl_FragColor FragColor
            out vec4 FragColor;
        `:`#extension GL_OES_standard_derivatives : enable
            precision highp float;
        `,n=`
            ${t.geometry.attributes.uv?"#define UV":""}
            ${t.geometry.attributes.normal?"#define NORMAL":""}
            ${t.geometry.isInstanced?"#define INSTANCED":""}
            ${t.boneTexture?"#define SKINNING":""}
            ${r.alphaMode==="MASK"?"#define ALPHA_MASK":""}
            ${r.baseColorTexture?"#define COLOR_MAP":""}
            ${r.normalTexture?"#define NORMAL_MAP":""}
            ${r.metallicRoughnessTexture?"#define RM_MAP":""}
            ${r.occlusionTexture?"#define OCC_MAP":""}
            ${r.emissiveTexture?"#define EMISSIVE_MAP":""}
        `,a=i+n+al,o=s+n+ol;return new he(this.gl,{vertex:a,fragment:o,uniforms:{uColor:this.gltfColors[e],uLight:{value:this.light}},transparent:r.alphaMode==="BLEND",cullFace:r.doubleSided?null:this.gl.BACK})}animeEnterColor(t){let e=this.gltfHoverColorRGB.r,r=this.gltfHoverColorRGB.g,i=this.gltfHoverColorRGB.b,s=this.gltfDefaultColorRGB.r,n=this.gltfDefaultColorRGB.g,a=this.gltfDefaultColorRGB.b,o=e-s,l=r-n,u=i-a;this.programs[0].uniforms.uColor.value=new D((s+o*t)/255,(n+l*t)/255,(a+u*t)/255)}animeLeaveColor(t){let e=this.gltfDefaultColorRGB.r,r=this.gltfDefaultColorRGB.g,i=this.gltfDefaultColorRGB.b,s=this.gltfHoverColorRGB.r,n=this.gltfHoverColorRGB.g,a=this.gltfHoverColorRGB.b,o=e-s,l=r-n,u=i-a;this.programs[0].uniforms.uColor.value=new D((s+o*t)/255,(n+l*t)/255,(a+u*t)/255)}hexToRgb(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),r=parseInt(e[1],16),i=parseInt(e[2],16),s=parseInt(e[3],16);return{r,g:i,b:s}}hexToGlsl(t){let{r:e,g:r,b:i}=this.hexToRgb(t);return new D(e/255,r/255,i/255)}},ul=ll;var cl=class extends I{constructor(t){super(t);this.$links=this.el.querySelectorAll("[data-index]"),this.$wrapper=this.$("wrapper")[0],this.$section=Y(this.el,".js-carousel-section"),this.onFocusBind=this.onFocus.bind(this)}init(){re.use([He]),this.carousel=new re(this.$("carousel")[0],{grabCursor:!0,slidesPerView:1.2,spaceBetween:18,threshold:3,breakpoints:{1e3:{slidesPerView:3,slidesPerGroup:3,spaceBetween:18,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}},700:{slidesPerView:2,slidesPerGroup:2,spaceBetween:18,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}}}}),this.bindEvents()}destroy(){super.destroy(),this.carousel.destroy(!0,!0),this.unbindEvents()}bindEvents(){for(let t=0;t<this.$links.length;t++)this.$links[t].addEventListener("focus",this.onFocusBind)}unbindEvents(){for(let t=0;t<this.$links.length;t++)this.$links[t].removeEventListener("focus",this.onFocusBind)}onFocus(t){let e=t.target.dataset.index;this.$section.scrollLeft=0,this.carousel.slideTo(e)}},dl=cl;var fl=/android/i.test(navigator.userAgent),gt=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream,qy=gt&&/CriOS\//.test(navigator.userAgent),jy=gt&&/Safari\//.test(navigator.userAgent);var hl=class extends I{constructor(t){super(t)}init(){this.$model=this.$("model")[0],this.$buttonOpen=this.$("buttonOpen")[0],this.$buttonClose=this.$("buttonClose")[0],this.isAndroid=fl,this.isIOS=gt,this.loaded=!1,this.bindEvents()}bindEvents(){this.modelLoaded=this.modelLoaded.bind(this),this.showModal=this.showModal.bind(this),this.hideModal=this.hideModal.bind(this),this.$model.addEventListener("load",this.modelLoaded),this.$buttonOpen.addEventListener("click",this.showModal),this.$buttonClose.addEventListener("click",this.hideModal)}unbindEvents(){this.$model.removeEventListener("load",this.modelLoaded),this.$buttonOpen.addEventListener("click",this.showModal),this.$buttonClose.addEventListener("click",this.hideModal)}showModal(){this.el.classList.add("is-open"),this.show3dContent()}hideModal(){this.el.classList.remove("is-open")}show3dContent(){this.loaded||this.$model.dismissPoster()}modelLoaded(){this.loaded=!0}destroy(){super.destroy(),this.unbindEvents()}},pl=hl;function ml(t){for(var e=t.length,r,i,s=["align","background","bgcolor","border","cellpadding","cellspacing","color","face","height","hspace","marginheight","marginwidth","noshade","nowrap","valign","vspace","width","vlink","alink","text","link","frame","frameborder","clear","scrolling","style"],n=s.length;e--;){for(i=t[e].style.display==="none",r=n;r--;)t[e].removeAttribute(s[r]);i&&(t[e].style.display="none",i=!1)}}var ef="600",tf="900",rf="1360",sf="730",vl=class extends I{constructor(t){super(t)}init(){let t=this.$("content")[0];t&&t.children.length&&t.children[0].classList.add("c-wysiwyg-first-element");let e=this.el.querySelectorAll("[style]");e.length&&ml(e);let r=this.el.querySelectorAll("iframe");this.setIframes(r),setTimeout(()=>{let i=this.el.querySelectorAll("img");if(i.length){let s=this.clearImagesSrc(i);s=this.setImagesSrcSizes(s),this.replaceImage(s)}},200)}setIframes(t){if(!t.length)return;let e=0;for(;e<t.length;){let r=t[e],i=Y(r,"p")||Y(r,"center");i&&i.classList&&i.classList.add("c-wysiwyg_iframe"),e++}}clearImagesSrc(t){if(!t.length)return[];let e=[],r=0;for(;r<t.length;){let i=t[r],s=i.src.toString(),n=/_\d{1,4}x\d{1,4}/g;n.exec(s)?e.push({image:i,src:s.split(n).join("")}):e.push({image:i,src:s}),r++}return e}setImagesSrcSizes(t){if(!t.length)return;let e=0;for(;e<t.length;){let r=t[e].image,i=r.naturalWidth,s=r.naturalHeight;i>=s?(t[e].src=this.getResizedImageUrl(t[e].src,rf,sf),t[e].modifier="-landscape"):(t[e].src=this.getResizedImageUrl(t[e].src,ef,tf),t[e].modifier="-portrait"),e++}return t}replaceImage(t){if(!t.length)return;let e=0;for(;e<t.length;){let r=t[e];Ce(r.src).then(i=>{requestAnimationFrame(()=>{r.image.setAttribute("src",i.url);let s=Y(r.image,"p");s.classList.add("c-wysiwyg_image"),s.classList.add(r.modifier)})}),e++}return t}getResizedImageUrl(t,e,r){let i=t.split("."),s=`_${e}x${r}_crop_center.${i.pop()}`;return i.join(".")+s}destroy(){super.destroy()}},gl=vl;var yl=class extends xe{constructor(t){super(t);ve(this,"activeClass","has-share-open");this.shareBind=this.share.bind(this),this.$buttons=this.$("share")}share(t){let e=t.target,r=this.getData("platform",t.target),i=window.location.href,s;switch(r){case"facebook":s="https://facebook.com/sharer/sharer.php?u="+i,this.openWindow(s);break;case"twitter":s="https://twitter.com/share?url="+i+"&amp;text="+encodeURIComponent(this.getData("text",t.target)),this.openWindow(s);break;case"mail":let n=encodeURIComponent(this.getData("subject",t.target)),a=encodeURIComponent(this.getData("body",t.target));this.openMail(n,a);break;case"linkedin":s=`http://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(i)}`,this.openWindow(s);break;case"copy":this.copyUrl(i);break}}openWindow(t){window.open(t,"Share","menubar=no, toolbar=no, resizable=yes, scrollbars=yes, height=500, width=600")}openMail(t,e){window.location="mailto:?subject="+t+"&body="+e}copyUrl(t){this.el.classList.add("has-copy-feedback"),this.copyTimeout!=null&&clearTimeout(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.el.classList.remove("has-copy-feedback")},1500),window.copyToClipboard(t)}bindEvents(){for(let t=0;t<this.$buttons.length;t++)this.$buttons[t].addEventListener("click",this.shareBind)}unbindEvents(){for(let t=0;t<this.$buttons.length;t++)this.$buttons[t].removeEventListener("click",this.shareBind)}onInit(){this.bindEvents()}onDestroy(){this.unbindEvents()}},bl=yl;var wl=class extends I{constructor(t){super(t);this.events={click:"toggle"}}toggle(){this.call("open",null,"Share")}},xl=wl;var El=class extends I{constructor(t){super(t)}init(){if(this.$select=this.$("select")[0],this.resetUrl=this.getData("reset-url"),this.queryUrl=this.getData("query-url"),!this.queryUrl||!this.resetUrl)return console.log("Please set reset-url and query-url data");this.bindEvents()}bindEvents(){this.onChange=this.onChange.bind(this),this.$select.addEventListener("change",this.onChange)}unbindEvents(){this.$select.removeEventListener("change",this.onChange)}onChange(){this.changeRoute()}changeRoute(){let t,e=this.$select.value;e?t=this.queryUrl+e:t=this.resetUrl,window.location.href=t}destroy(){super.destroy(),this.unbindEvents()}},Tl=El;var Sl=class extends I{constructor(t){super(t)}init(){this.$select=this.$("select")[0],this.queryParams={},this.saveExistingSortParameters(),this.bindEvents()}bindEvents(){this.onChange=this.onChange.bind(this),this.$select.addEventListener("change",this.onChange)}unbindEvents(){this.$select.removeEventListener("change",this.onChange)}onChange(t){let e=t.currentTarget.value;this.queryParams.sort_by=e,location.search=new URLSearchParams(this.queryParams).toString()}saveExistingSortParameters(){if(location.search.length)for(var t,e=0,r=location.search.substr(1).split("&");e<r.length;e++)t=r[e].split("="),t.length>1&&(this.queryParams[decodeURIComponent(t[0])]=decodeURIComponent(t[1]))}destroy(){super.destroy(),this.unbindEvents()}},Cl=Sl;var Ml=class extends I{constructor(t){super(t);this.events={click:{toggler:"toggle"}}}init(){window.location.hash=="#recover"&&this.el.classList.add("is-forgot-password")}toggle(){this.el.classList.contains("is-forgot-password")?this.el.classList.remove("is-forgot-password"):this.el.classList.add("is-forgot-password")}},Al=Ml;var nf="query countries($locale: SupportedLocale!) {  countries(locale: $locale) {    name    code    labels {      address1      address2      city      company      country      firstName      lastName      phone      postalCode      zone    }    formatting {      edit    }    zones {      name      code    }  }}",af="https://country-service.shopifycloud.com/graphql";function Pl(t){var e=fetch(af,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({query:nf,operationName:"countries",variables:{locale:of(t)}})});return e.then(function(r){return r.json()}).then(function(r){return r.data.countries})}var lf="EN",Il=["DA","DE","EN","ES","FR","IT","JA","NL","PT","PT_BR"];function of(t){var e=t.replace(/-/,"_").toUpperCase();return Il.indexOf(e)!==-1?e:Il.indexOf(e.substring(0,2))!==-1?e.substring(0,2):lf}function Ll(){for(var t=Object({}),e=0;e<arguments.length;e++){var r=arguments[e];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}var uf=/({\w+})/g,cf="_",Ol={lastName:'[name="address[last_name]"]',firstName:'[name="address[first_name]"]',company:'[name="address[company]"]',address1:'[name="address[address1]"]',address2:'[name="address[address2]"]',country:'[name="address[country]"]',zone:'[name="address[province]"]',postalCode:'[name="address[zip]"]',city:'[name="address[city]"]',phone:'[name="address[phone]"]'};function yt(t,e,r){e=e||"en",r=r||{inputSelectors:{}};var i=hf(t,Ll(Ol,r.inputSelectors));return ff(i),pf(r.shippingCountriesOnly).then(function(s){return Pl(e).then(function(n){df(t,i,mf(n,s))})})}function df(t,e,r){gf(e,r);var i=e.country.input?e.country.input.value:null;vf(t,e,r),Fl(t,e,i,r)}function Fl(t,e,r,i){var s=xf(r,i);bf(e,s),yf(t,e,s),wf(e,s)}function vf(t,e,r){e.country.input.addEventListener("change",function(i){Fl(t,e,i.target.value,r)})}function yf(t,e,r){var i=r.formatting.edit,s=e.country.wrapper,n=!1;Ef(i).forEach(function(a){a.forEach(function(o){if(e[o].wrapper.dataset.lineCount=a.length,!!e[o].wrapper){if(o==="country"){n=!0;return}n?t.append(e[o].wrapper):t.insertBefore(e[o].wrapper,s)}})})}function bf(t,e){Object.keys(t).forEach(function(r){t[r].labels.forEach(function(i){i.textContent=e.labels[r]})})}function gf(t,e){var r=t.country.input,i=r.cloneNode(!0);e.forEach(function(s){var n=document.createElement("option");n.value=s.code,n.textContent=s.name,i.appendChild(n)}),r.innerHTML=i.innerHTML,r.dataset.default&&(r.value=r.dataset.default)}function wf(t,e){var r=t.zone;if(!!r){if(e.zones.length===0){r.wrapper.dataset.ariaHidden="true",r.input.innerHTML="";return}r.wrapper.dataset.ariaHidden="false";var i=r.input,s=i.cloneNode(!0);s.innerHTML="",e.zones.forEach(function(n){var a=document.createElement("option");a.value=n.code,a.textContent=n.name,s.appendChild(a)}),i.innerHTML=s.innerHTML,i.dataset.default&&(i.value=i.dataset.default)}}function ff(t){Object.keys(t).forEach(function(e){var r=t[e].input,i=t[e].labels;if(!!r){if(typeof r!="object")throw new TypeError(t[e]+" is missing an input or select.");if(typeof i!="object")throw new TypeError(t[e]+" is missing a label.")}})}function xf(t,e){return t=t||"CA",e.filter(function(r){return r.code===t})[0]}function Ef(t){return t.split(cf).map(function(e){var r=e.match(uf);return r?r.map(function(i){var s=i.replace(/[{}]/g,"");switch(s){case"zip":return"postalCode";case"province":return"zone";default:return s}}):[]})}function hf(t,e){var r={};return Object.keys(Ol).forEach(function(i){var s=t.querySelector(e[i]);r[i]=s?{wrapper:s.parentElement,input:s,labels:document.querySelectorAll('[for="'+s.id+'"]')}:{}}),r}function pf(t){if(!t)return Promise.resolve(null);var e=fetch(location.origin+"/meta.json");return e.then(function(r){return r.json()}).then(function(r){return r.ships_to_countries.indexOf("*")!==-1?null:r.ships_to_countries}).catch(function(){return null})}function mf(t,e){return e?t.filter(function(r){return e.indexOf(r.code)!==-1}):t}var Rl=class extends I{constructor(t){super(t);this.events={click:{"edit-toggler":"toggleEdit"}}}init(){this.id=this.getData("id");let t=yt(this.$("form-wrapper-inner")[0],"en")}toggleEdit(){this.el.classList.contains("is-edit")?this.el.classList.remove("is-edit"):this.el.classList.add("is-edit")}},kl=Rl;Vue.component("FocusTrap",lt);var Si=85*2,Ci=85*2,Dl=class extends I{constructor(t){super(t);this.closeBind=e=>{e.key==="Escape"&&this.close()}}init(){this.bindEvents(),this.initVue()}destroy(){this.unbindEvents()}bindEvents(){document.addEventListener("keyup",this.closeBind)}unbindEvents(){document.removeEventListener("keyup",this.closeBind)}initVue(){let t=this;Vue.config.devtools=!0,this.app=new Vue({el:this.el,delimiters:["${","}"],data:{searchInput:"",products:[],articles:[],isActive:!1},watch:{searchInput:function(e){this.requestSuggestDebounce(e)},products:function(e,r){this.$nextTick(()=>{let i=!e.length;r.length>e.length&&!i?setTimeout(()=>{this.setSuggestHeight(i)},400):this.setSuggestHeight(i)})},articles:function(e,r){this.$nextTick(()=>{let i=!e.length;r.length>e.length&&!i?setTimeout(()=>{this.setSuggestHeight(i)},400):this.setSuggestHeight(i)})}},beforeCreate(){this.moduleInstance=t},created(){this.isRequested=!1,this.requestPool=[],this.suggestOptions={type:"product,article",limit:8,options:{unavailable_products:"last"}}},mounted(){this.requestSuggestDebounce=this.debounceCall(this.requestSuggest,500)},beforeDestroy(){},methods:{requestSuggest(e){return k(this,null,function*(){if(!this.requestPool.length&&!this.isRequested){if(this.isRequested=!0,e?yield this.fetchSuggest(e):(this.products=[],this.articles=[]),this.isRequested=!1,this.requestPool.length){let r=this.requestPool[this.requestPool.length-1];this.requestPool=[],this.requestSuggest(r)}}else this.requestPool.push(e)})},fetchSuggest(e){return new Promise(r=>{fetch(`/search/suggest.json?q=${e}&resources[type]=${this.suggestOptions.type}&resources[limit]=${this.suggestOptions.limit}&resources[options][unavailable_products]=${this.suggestOptions.options.unavailable_products}`).then(i=>i.json()).then(i=>{if(i.resources.results.products.length>0){let a=i.resources.results.products;a.forEach(o=>{o.featured_image.url=this.getResizedImageUrl(o.featured_image.url),o.featured_image.width=Si,o.featured_image.height=Ci}),this.products=a}else this.products=[];if(i.resources.results.articles.length>0){let o=i.resources.results.articles.filter((l,u,c)=>u===c.findIndex(d=>d.handle===l.handle));o.forEach(l=>{l.featured_image.url=this.getResizedImageUrl(l.featured_image.url),l.featured_image.width=Si,l.featured_image.height=Ci}),this.articles=o}else this.articles=[];r()})})},getResizedImageUrl(e){let r=e.split("."),i=`_${Si}x${Ci}_crop_center.${r.pop()}`;return r.join(".")+i},setSuggestHeight(e){if(e)return this.$el.style.setProperty("--suggestHeight","0px");let r=this.$refs.suggest.offsetHeight;this.$el.style.setProperty("--suggestHeight",`${r}px`)},onResize(){let e=!this.products.length;this.setSuggestHeight(e)},onToggle(){var e;(e=this.moduleInstance)==null||e.toggle()},onOpen(){this.isActive=!0,setTimeout(()=>{this.$refs.input.focus()},700)},onClose(){this.searchInput="",this.products=[],this.isActive=!1},displayDate(e){return new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})},debounceCall(e,r){let i;return function(){let s=this,n=arguments;clearTimeout(i),i=setTimeout(()=>e.apply(s,n),r)}}}})}toggle(){_.classList.contains("has-search-open")?this.close():this.open()}open(){var t,e;_.classList.add("has-search-open"),this.call("close",null,"Menu"),this.call("onCloseModal",null,"CartModal"),(e=(t=this.app)==null?void 0:t.onOpen)==null||e.call(t)}close(){var t,e;_.classList.remove("has-search-open"),(e=(t=this.app)==null?void 0:t.onClose)==null||e.call(t)}destroy(){super.destroy(),this.app&&this.app.$destroy()}},_l=Dl;var zl=class extends I{constructor(t){super(t);this.events={click:"toggle"}}toggle(){this.call("toggle",null,"Search")}},Nl=zl;var $l=class extends xe{constructor(){super(...arguments);ve(this,"activeClass","has-popup-open")}onOpen(){this.el.classList.add("is-active")}onClose(){this.el.classList.remove("is-active")}},Vl=$l;var Bl=class extends Ye{constructor(t){super(t)}init(){var t=e=>super[e];return k(this,null,function*(){yield t("init").call(this),this.initVue()})}initVue(){let t=this;Vue.config.devtools=!0,this.app=new Vue({el:this.el,delimiters:["${","}"],mixins:[Xe,ut],beforeCreate(){this.moduleInstance=t},mounted(){},methods:{}})}onAddItem(t){var e,r;this.onOpenModal(),(r=(e=this.app)==null?void 0:e.onAddNewItem)==null||r.call(e,t),this.setCartCounter(t)}onRemoveItem(t){this.setCartCounter(t)}onUpdateItem(t){this.setCartCounter(t)}onRefreshCart(t){this.setCartCounter(t)}onCannotAddMoreItem(t){this.call("cannotAddMoreItem",t,"ProductForm")}setCartCounter(t){let e=t.item_count;this.call("setCartCounter",e,"CartCounter")}setCartData(t){this.call("setVueCartData",t,"CartModal")}setVueCartData(t){var e,r;(r=(e=this.app)==null?void 0:e.setCartData)==null||r.call(e,t,!0)}destroy(){super.destroy(),this.app&&this.app.$destroy()}},ql=Bl;var jl=class extends I{constructor(t){super(t)}init(){}setCartCounter(t){this.el.innerHTML=`(${t})`}destroy(){super.destroy()}},Gl=jl;var Ul=class extends I{constructor(t){super(t);this.events={click:{toggler:"toggle"}}}init(){}toggle(){this.el.classList.contains("is-password")?this.el.classList.remove("is-password"):this.el.classList.add("is-password")}},Hl=Ul;var Wl=class extends I{constructor(t){super(t);this.recommendationsUrl=this.getData("url"),this.onFocusBind=this.onFocus.bind(this)}init(){}destroy(){var t,e;super.destroy(),(e=(t=this.carousel)==null?void 0:t.destroy)==null||e.call(t,!0,!0),this.unbindEvents()}getRecommendations(){this.el.classList.add("is-loading"),fetch(this.recommendationsUrl).then(t=>t.text()).then(t=>{let e=document.createElement("div");e.innerHTML=t;let r=e.querySelector(".c-product-recommendations");r.querySelectorAll(".c-product-tile").length>0&&r.innerHTML.trim().length?(this.el.innerHTML=r.innerHTML,requestAnimationFrame(()=>{this.initCarousel()})):(this.el.classList.remove("is-loading"),setTimeout(()=>{this.el.classList.add("is-empty")},600))}).catch(t=>{this.el.classList.remove("is-loading"),console.error(t)})}initCarousel(){let t=this.el.querySelector(".swiper-container");this.$wrapper=this.el.querySelector(".swiper-wrapper"),this.$links=this.el.querySelectorAll("[data-index]"),this.$section=Y(t,".js-carousel-section"),this.bindEvents(),re.use([He]),this.carousel=new re(t,{grabCursor:!0,slidesPerView:1.2,spaceBetween:20,threshold:3,breakpoints:{700:{slidesPerView:3,slidesPerGroup:3,spaceBetween:40,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}}},on:{init:()=>{this.el.classList.remove("is-loading"),this.loadImages()}}})}loadImages(){let t=this.el.querySelectorAll("img"),e=0;for(;e<t.length;){let r=t[e];ne(r),e++}}bindEvents(){for(let t=0;t<this.$links.length;t++)this.$links[t].addEventListener("focus",this.onFocusBind)}unbindEvents(){for(let t=0;t<this.$links.length;t++)this.$links[t].removeEventListener("focus",this.onFocusBind)}onFocus(t){let e=t.target.dataset.index;this.$section.scrollLeft=0,this.carousel.slideTo(e)}},Yl=Wl;var Xl=class extends I{constructor(t){super(t);this.onClickBind=this.onClick.bind(this),this.$el=this.el,this.productID=this.getData("id")}init(){this.bindEvents()}destroy(){super.destroy(),this.unbindEvents()}bindEvents(){this.$el.addEventListener("click",this.onClickBind)}unbindEvents(){this.$el.removeEventListener("click",this.onClickBind)}onClick(){this.addToCart()}addToCart(){this.call("addItem",{id:parseInt(this.productID,10),quantity:1},"CartModal")}},Ql=Xl;var Zl=class extends I{constructor(t){super(t);this.onChangeBind=this.onChange.bind(this),this.$images=this.$("image"),this.$ctas=this.$("cta"),this.$prices=this.$("price"),this.$sales=this.$("sale"),this.$links=this.$("link"),this.$radios=this.$("radio"),this.currentValue=""}init(){this.bindEvents(),this.setDefaultValue()}destroy(){super.destroy(),this.unbindEvents()}bindEvents(){for(let t=0;t<this.$radios.length;t++)this.$radios[t].addEventListener("change",this.onChangeBind)}unbindEvents(){for(let t=0;t<this.$radios.length;t++)this.$radios[t].removeEventListener("change",this.onChangeBind)}onChange(t){let e="",r=[...this.$radios].filter(i=>i.checked);for(let i=0;i<r.length;i++){let s=r[i];i>0?e+=`-${s.value}`:e+=s.value}this.currentValue=e,this.updateContent()}setDefaultValue(){let t="",e=[...this.$radios].filter(r=>r.checked);for(let r=0;r<e.length;r++){let i=e[r];r>0?t+=`-${i.value}`:t+=i.value}this.currentValue=t,this.updateContent()}updateContent(){for(let t=0;t<this.$images.length;t++){let e=this.$images[t];e.dataset.variant===this.currentValue?e.classList.remove("is-hidden"):e.classList.add("is-hidden")}for(let t=0;t<this.$ctas.length;t++){let e=this.$ctas[t];e.dataset.variant===this.currentValue?e.classList.remove("is-hidden"):e.classList.add("is-hidden")}for(let t=0;t<this.$prices.length;t++){let e=this.$prices[t];e.dataset.variant===this.currentValue?e.classList.remove("is-hidden"):e.classList.add("is-hidden")}for(let t=0;t<this.$sales.length;t++){let e=this.$sales[t];e.dataset.variant===this.currentValue?e.classList.remove("is-hidden"):e.classList.add("is-hidden")}for(let t=0;t<this.$links.length;t++){let e=this.$links[t];e.dataset.variant===this.currentValue?e.classList.remove("is-hidden"):e.classList.add("is-hidden")}}},Jl=Zl;var Kl=class extends I{constructor(t){super(t);this.onEnterBind=this.onEnter.bind(this),this.onLeaveBind=this.onLeave.bind(this),this.$el=this.el,this.$parent=Y(this.$el,"[data-hovered]")}init(){this.bindEvents()}destroy(){super.destroy(),this.unbindEvents()}bindEvents(){this.$el.addEventListener("mouseenter",this.onEnterBind),this.$el.addEventListener("mouseleave",this.onLeaveBind)}unbindEvents(){this.$el.removeEventListener("mouseenter",this.onEnterBind),this.$el.removeEventListener("mouseleave",this.onLeaveBind)}onEnter(){this.$parent.classList.add("is-hovered")}onLeave(){this.$parent.classList.remove("is-hovered")}},eu=Kl;var tu=class extends I{constructor(t){super(t);this.events={click:"handleClick"}}init(){}handleClick(){var t;((t=window.SmileUI)==null?void 0:t.openPanel)&&(window.SmileUI.openPanel(),this.call("close",null,"Menu"))}},ru=tu;var nu=Se(su());function au(){(0,nu.default)()}(()=>{let t=new Bi({modules:Mi});window.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,window.isMobile&&_.classList.add("is-mobile");let e={init(){let r=document.getElementById("stylesheet"),i=()=>{console.log("%c[Styles]: Loaded","color: #9d4edd;"),r.removeEventListener("load",i),this.start()};console.log("%c[Styles]: Loading","color: #9d4edd;"),r.isLoaded?i():r.addEventListener("load",i),document.addEventListener("focusin",function(){},!0)},start(){console.log("%c[App]: Start","color: #5bc0be;"),this.bindEvents(),au(),t.init(t),_.classList.add("is-first-hit"),_.classList.add("is-loaded"),_.classList.remove("is-loading"),this.fontsLoader(["AeonikPro-Medium","AeonikPro-Regular","MaisonNeue-Mono","Druk-WideMedium","MonopolTRIALKompakt"],()=>{_.classList.add("is-fonts-loaded")})},fontsLoader(r,i){return k(this,null,function*(){let s=[];if(!!r.length){r.forEach(n=>{let a=new ou.default(n);s.push(a)});try{yield Promise.all(s),i==null||i()}catch(n){console.warn("Some critical font are not available:",n)}}})},onInteractive(r){console.log("%c[Document]: Interactive","color: #ffc857;");let i=!!document.documentMode,s=document.querySelector(".js-outdated");i?s.classList.add("is-active"):(document.body.removeChild(s),this.init())},onComplete(r){console.log("%c[Document]: Complete","color: #ffc857;"),_.classList.add("is-ready"),setTimeout(()=>{console.log("%c[Document]: Complete => Animation completed","color: #ffc857;"),_.classList.add("is-anim-completed")},600)},bindEvents(){window.isMobile?(window.addEventListener("resize",this.onMobileResize),this.onMobileResize()):(window.addEventListener("resize",this.onResize),this.onResize())},onResize(){let r=_.offsetWidth*.01,i=window.innerHeight*.01;document.documentElement.style.setProperty("--vw",`${r}px`),document.documentElement.style.setProperty("--vh",`${i}px`)},onMobileResize(){if(window.innerWidth>window.innerHeight&&window.customOrientation!="landscape"){window.customOrientation="landscape";let r=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${r}px`)}if(window.innerWidth<window.innerHeight&&window.customOrientation!="portrait"){window.customOrientation="portrait";let r=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${r}px`)}}};document.addEventListener("readystatechange",r=>{var i,s;switch(document.readyState){case"interactive":(i=e.onInteractive)==null||i.call(e,r);break;case"complete":(s=e.onComplete)==null||s.call(e,r);break}})})();})();}
/*!
  * focus-trap-vue v1.1.1
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
/*!
* focus-trap 6.2.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
/*!
* focus-trap 6.7.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
/*!
* tabbable 5.1.4
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
/*!
* tabbable 5.2.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
/*! svg4everybody v2.1.9 | github.com/jonathantneal/svg4everybody */
/**
 * Logger class.
 *
 * @class
 *
 * @license https://opensource.org/licenses/MIT
 *
 * @author Patrick Heng & Fabien Motte <hengpatrick.pro@gmail.com / contact@fabienmotte.com>
 *
 * @example
 * const logger = new Logger()
 * logger.log('Test')
 */
/**
 * Raf class.
 *
 * @class
 *
 * @license https://opensource.org/licenses/MIT
 *
 * @author Patrick Heng & Fabien Motte <hengpatrick.pro@gmail.com/contact@fabienmotte.com>
 *
 * @example
 * const callback = () => { }
 * Raf.add(callback)
 */
//# sourceMappingURL=app.js.map
